import"./style.c0ed6924.js";var Vs={exports:{}},W={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var pa=Symbol.for("react.element"),hg=Symbol.for("react.portal"),pg=Symbol.for("react.fragment"),mg=Symbol.for("react.strict_mode"),gg=Symbol.for("react.profiler"),yg=Symbol.for("react.provider"),vg=Symbol.for("react.context"),_g=Symbol.for("react.forward_ref"),wg=Symbol.for("react.suspense"),bg=Symbol.for("react.memo"),Eg=Symbol.for("react.lazy"),Wc=Symbol.iterator;function Sg(t){return t===null||typeof t!="object"?null:(t=Wc&&t[Wc]||t["@@iterator"],typeof t=="function"?t:null)}var rh={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},ih=Object.assign,ah={};function Kr(t,e,n){this.props=t,this.context=e,this.refs=ah,this.updater=n||rh}Kr.prototype.isReactComponent={};Kr.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Kr.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function sh(){}sh.prototype=Kr.prototype;function _l(t,e,n){this.props=t,this.context=e,this.refs=ah,this.updater=n||rh}var wl=_l.prototype=new sh;wl.constructor=_l;ih(wl,Kr.prototype);wl.isPureReactComponent=!0;var Jc=Array.isArray,oh=Object.prototype.hasOwnProperty,bl={current:null},uh={key:!0,ref:!0,__self:!0,__source:!0};function lh(t,e,n){var r,i={},a=null,s=null;if(e!=null)for(r in e.ref!==void 0&&(s=e.ref),e.key!==void 0&&(a=""+e.key),e)oh.call(e,r)&&!uh.hasOwnProperty(r)&&(i[r]=e[r]);var o=arguments.length-2;if(o===1)i.children=n;else if(1<o){for(var u=Array(o),l=0;l<o;l++)u[l]=arguments[l+2];i.children=u}if(t&&t.defaultProps)for(r in o=t.defaultProps,o)i[r]===void 0&&(i[r]=o[r]);return{$$typeof:pa,type:t,key:a,ref:s,props:i,_owner:bl.current}}function kg(t,e){return{$$typeof:pa,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function El(t){return typeof t=="object"&&t!==null&&t.$$typeof===pa}function Tg(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var Qc=/\/+/g;function Eo(t,e){return typeof t=="object"&&t!==null&&t.key!=null?Tg(""+t.key):e.toString(36)}function Ja(t,e,n,r,i){var a=typeof t;(a==="undefined"||a==="boolean")&&(t=null);var s=!1;if(t===null)s=!0;else switch(a){case"string":case"number":s=!0;break;case"object":switch(t.$$typeof){case pa:case hg:s=!0}}if(s)return s=t,i=i(s),t=r===""?"."+Eo(s,0):r,Jc(i)?(n="",t!=null&&(n=t.replace(Qc,"$&/")+"/"),Ja(i,e,n,"",function(l){return l})):i!=null&&(El(i)&&(i=kg(i,n+(!i.key||s&&s.key===i.key?"":(""+i.key).replace(Qc,"$&/")+"/")+t)),e.push(i)),1;if(s=0,r=r===""?".":r+":",Jc(t))for(var o=0;o<t.length;o++){a=t[o];var u=r+Eo(a,o);s+=Ja(a,e,n,u,i)}else if(u=Sg(t),typeof u=="function")for(t=u.call(t),o=0;!(a=t.next()).done;)a=a.value,u=r+Eo(a,o++),s+=Ja(a,e,n,u,i);else if(a==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return s}function ka(t,e,n){if(t==null)return t;var r=[],i=0;return Ja(t,r,"","",function(a){return e.call(n,a,i++)}),r}function xg(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var He={current:null},Qa={transition:null},Og={ReactCurrentDispatcher:He,ReactCurrentBatchConfig:Qa,ReactCurrentOwner:bl};function ch(){throw Error("act(...) is not supported in production builds of React.")}W.Children={map:ka,forEach:function(t,e,n){ka(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return ka(t,function(){e++}),e},toArray:function(t){return ka(t,function(e){return e})||[]},only:function(t){if(!El(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};W.Component=Kr;W.Fragment=pg;W.Profiler=gg;W.PureComponent=_l;W.StrictMode=mg;W.Suspense=wg;W.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Og;W.act=ch;W.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=ih({},t.props),i=t.key,a=t.ref,s=t._owner;if(e!=null){if(e.ref!==void 0&&(a=e.ref,s=bl.current),e.key!==void 0&&(i=""+e.key),t.type&&t.type.defaultProps)var o=t.type.defaultProps;for(u in e)oh.call(e,u)&&!uh.hasOwnProperty(u)&&(r[u]=e[u]===void 0&&o!==void 0?o[u]:e[u])}var u=arguments.length-2;if(u===1)r.children=n;else if(1<u){o=Array(u);for(var l=0;l<u;l++)o[l]=arguments[l+2];r.children=o}return{$$typeof:pa,type:t.type,key:i,ref:a,props:r,_owner:s}};W.createContext=function(t){return t={$$typeof:vg,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:yg,_context:t},t.Consumer=t};W.createElement=lh;W.createFactory=function(t){var e=lh.bind(null,t);return e.type=t,e};W.createRef=function(){return{current:null}};W.forwardRef=function(t){return{$$typeof:_g,render:t}};W.isValidElement=El;W.lazy=function(t){return{$$typeof:Eg,_payload:{_status:-1,_result:t},_init:xg}};W.memo=function(t,e){return{$$typeof:bg,type:t,compare:e===void 0?null:e}};W.startTransition=function(t){var e=Qa.transition;Qa.transition={};try{t()}finally{Qa.transition=e}};W.unstable_act=ch;W.useCallback=function(t,e){return He.current.useCallback(t,e)};W.useContext=function(t){return He.current.useContext(t)};W.useDebugValue=function(){};W.useDeferredValue=function(t){return He.current.useDeferredValue(t)};W.useEffect=function(t,e){return He.current.useEffect(t,e)};W.useId=function(){return He.current.useId()};W.useImperativeHandle=function(t,e,n){return He.current.useImperativeHandle(t,e,n)};W.useInsertionEffect=function(t,e){return He.current.useInsertionEffect(t,e)};W.useLayoutEffect=function(t,e){return He.current.useLayoutEffect(t,e)};W.useMemo=function(t,e){return He.current.useMemo(t,e)};W.useReducer=function(t,e,n){return He.current.useReducer(t,e,n)};W.useRef=function(t){return He.current.useRef(t)};W.useState=function(t){return He.current.useState(t)};W.useSyncExternalStore=function(t,e,n){return He.current.useSyncExternalStore(t,e,n)};W.useTransition=function(){return He.current.useTransition()};W.version="18.3.1";(function(t){t.exports=W})(Vs);var dh={exports:{}},ot={},fh={exports:{}},hh={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(b,S){var R=b.length;b.push(S);e:for(;0<R;){var F=R-1>>>1,D=b[F];if(0<i(D,S))b[F]=S,b[R]=D,R=F;else break e}}function n(b){return b.length===0?null:b[0]}function r(b){if(b.length===0)return null;var S=b[0],R=b.pop();if(R!==S){b[0]=R;e:for(var F=0,D=b.length,Y=D>>>1;F<Y;){var oe=2*(F+1)-1,re=b[oe],Pe=oe+1,jn=b[Pe];if(0>i(re,R))Pe<D&&0>i(jn,re)?(b[F]=jn,b[Pe]=R,F=Pe):(b[F]=re,b[oe]=R,F=oe);else if(Pe<D&&0>i(jn,R))b[F]=jn,b[Pe]=R,F=Pe;else break e}}return S}function i(b,S){var R=b.sortIndex-S.sortIndex;return R!==0?R:b.id-S.id}if(typeof performance=="object"&&typeof performance.now=="function"){var a=performance;t.unstable_now=function(){return a.now()}}else{var s=Date,o=s.now();t.unstable_now=function(){return s.now()-o}}var u=[],l=[],c=1,d=null,f=3,h=!1,p=!1,v=!1,_=typeof setTimeout=="function"?setTimeout:null,m=typeof clearTimeout=="function"?clearTimeout:null,g=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function y(b){for(var S=n(l);S!==null;){if(S.callback===null)r(l);else if(S.startTime<=b)r(l),S.sortIndex=S.expirationTime,e(u,S);else break;S=n(l)}}function w(b){if(v=!1,y(b),!p)if(n(u)!==null)p=!0,U(E);else{var S=n(l);S!==null&&j(w,S.startTime-b)}}function E(b,S){p=!1,v&&(v=!1,m(P),P=-1),h=!0;var R=f;try{for(y(S),d=n(u);d!==null&&(!(d.expirationTime>S)||b&&!le());){var F=d.callback;if(typeof F=="function"){d.callback=null,f=d.priorityLevel;var D=F(d.expirationTime<=S);S=t.unstable_now(),typeof D=="function"?d.callback=D:d===n(u)&&r(u),y(S)}else r(u);d=n(u)}if(d!==null)var Y=!0;else{var oe=n(l);oe!==null&&j(w,oe.startTime-S),Y=!1}return Y}finally{d=null,f=R,h=!1}}var T=!1,C=null,P=-1,J=5,B=-1;function le(){return!(t.unstable_now()-B<J)}function Ge(){if(C!==null){var b=t.unstable_now();B=b;var S=!0;try{S=C(!0,b)}finally{S?yt():(T=!1,C=null)}}else T=!1}var yt;if(typeof g=="function")yt=function(){g(Ge)};else if(typeof MessageChannel<"u"){var $=new MessageChannel,I=$.port2;$.port1.onmessage=Ge,yt=function(){I.postMessage(null)}}else yt=function(){_(Ge,0)};function U(b){C=b,T||(T=!0,yt())}function j(b,S){P=_(function(){b(t.unstable_now())},S)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(b){b.callback=null},t.unstable_continueExecution=function(){p||h||(p=!0,U(E))},t.unstable_forceFrameRate=function(b){0>b||125<b?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):J=0<b?Math.floor(1e3/b):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_getFirstCallbackNode=function(){return n(u)},t.unstable_next=function(b){switch(f){case 1:case 2:case 3:var S=3;break;default:S=f}var R=f;f=S;try{return b()}finally{f=R}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(b,S){switch(b){case 1:case 2:case 3:case 4:case 5:break;default:b=3}var R=f;f=b;try{return S()}finally{f=R}},t.unstable_scheduleCallback=function(b,S,R){var F=t.unstable_now();switch(typeof R=="object"&&R!==null?(R=R.delay,R=typeof R=="number"&&0<R?F+R:F):R=F,b){case 1:var D=-1;break;case 2:D=250;break;case 5:D=1073741823;break;case 4:D=1e4;break;default:D=5e3}return D=R+D,b={id:c++,callback:S,priorityLevel:b,startTime:R,expirationTime:D,sortIndex:-1},R>F?(b.sortIndex=R,e(l,b),n(u)===null&&b===n(l)&&(v?(m(P),P=-1):v=!0,j(w,R-F))):(b.sortIndex=D,e(u,b),p||h||(p=!0,U(E))),b},t.unstable_shouldYield=le,t.unstable_wrapCallback=function(b){var S=f;return function(){var R=f;f=S;try{return b.apply(this,arguments)}finally{f=R}}}})(hh);(function(t){t.exports=hh})(fh);/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Cg=Vs.exports,st=fh.exports;function k(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var ph=new Set,Ai={};function lr(t,e){Mr(t,e),Mr(t+"Capture",e)}function Mr(t,e){for(Ai[t]=e,t=0;t<e.length;t++)ph.add(e[t])}var Yt=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),vu=Object.prototype.hasOwnProperty,Pg=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,qc={},Kc={};function Rg(t){return vu.call(Kc,t)?!0:vu.call(qc,t)?!1:Pg.test(t)?Kc[t]=!0:(qc[t]=!0,!1)}function Ig(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function Ng(t,e,n,r){if(e===null||typeof e>"u"||Ig(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Ve(t,e,n,r,i,a,s){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=a,this.removeEmptyString=s}var Ce={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Ce[t]=new Ve(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Ce[e]=new Ve(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Ce[t]=new Ve(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Ce[t]=new Ve(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Ce[t]=new Ve(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Ce[t]=new Ve(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Ce[t]=new Ve(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Ce[t]=new Ve(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Ce[t]=new Ve(t,5,!1,t.toLowerCase(),null,!1,!1)});var Sl=/[\-:]([a-z])/g;function kl(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(Sl,kl);Ce[e]=new Ve(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(Sl,kl);Ce[e]=new Ve(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(Sl,kl);Ce[e]=new Ve(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Ce[t]=new Ve(t,1,!1,t.toLowerCase(),null,!1,!1)});Ce.xlinkHref=new Ve("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Ce[t]=new Ve(t,1,!1,t.toLowerCase(),null,!0,!0)});function Tl(t,e,n,r){var i=Ce.hasOwnProperty(e)?Ce[e]:null;(i!==null?i.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(Ng(e,n,i,r)&&(n=null),r||i===null?Rg(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):i.mustUseProperty?t[i.propertyName]=n===null?i.type===3?!1:"":n:(e=i.attributeName,r=i.attributeNamespace,n===null?t.removeAttribute(e):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var an=Cg.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Ta=Symbol.for("react.element"),gr=Symbol.for("react.portal"),yr=Symbol.for("react.fragment"),xl=Symbol.for("react.strict_mode"),_u=Symbol.for("react.profiler"),mh=Symbol.for("react.provider"),gh=Symbol.for("react.context"),Ol=Symbol.for("react.forward_ref"),wu=Symbol.for("react.suspense"),bu=Symbol.for("react.suspense_list"),Cl=Symbol.for("react.memo"),cn=Symbol.for("react.lazy"),yh=Symbol.for("react.offscreen"),Xc=Symbol.iterator;function ii(t){return t===null||typeof t!="object"?null:(t=Xc&&t[Xc]||t["@@iterator"],typeof t=="function"?t:null)}var he=Object.assign,So;function gi(t){if(So===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);So=e&&e[1]||""}return`
`+So+t}var ko=!1;function To(t,e){if(!t||ko)return"";ko=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(l){var r=l}Reflect.construct(t,[],e)}else{try{e.call()}catch(l){r=l}t.call(e.prototype)}else{try{throw Error()}catch(l){r=l}t()}}catch(l){if(l&&r&&typeof l.stack=="string"){for(var i=l.stack.split(`
`),a=r.stack.split(`
`),s=i.length-1,o=a.length-1;1<=s&&0<=o&&i[s]!==a[o];)o--;for(;1<=s&&0<=o;s--,o--)if(i[s]!==a[o]){if(s!==1||o!==1)do if(s--,o--,0>o||i[s]!==a[o]){var u=`
`+i[s].replace(" at new "," at ");return t.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",t.displayName)),u}while(1<=s&&0<=o);break}}}finally{ko=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?gi(t):""}function $g(t){switch(t.tag){case 5:return gi(t.type);case 16:return gi("Lazy");case 13:return gi("Suspense");case 19:return gi("SuspenseList");case 0:case 2:case 15:return t=To(t.type,!1),t;case 11:return t=To(t.type.render,!1),t;case 1:return t=To(t.type,!0),t;default:return""}}function Eu(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case yr:return"Fragment";case gr:return"Portal";case _u:return"Profiler";case xl:return"StrictMode";case wu:return"Suspense";case bu:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case gh:return(t.displayName||"Context")+".Consumer";case mh:return(t._context.displayName||"Context")+".Provider";case Ol:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case Cl:return e=t.displayName||null,e!==null?e:Eu(t.type)||"Memo";case cn:e=t._payload,t=t._init;try{return Eu(t(e))}catch{}}return null}function Ag(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Eu(e);case 8:return e===xl?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Tn(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function vh(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function Lg(t){var e=vh(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,a=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(s){r=""+s,a.call(this,s)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(s){r=""+s},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function xa(t){t._valueTracker||(t._valueTracker=Lg(t))}function _h(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=vh(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function ss(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Su(t,e){var n=e.checked;return he({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n!=null?n:t._wrapperState.initialChecked})}function Yc(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=Tn(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function wh(t,e){e=e.checked,e!=null&&Tl(t,"checked",e,!1)}function ku(t,e){wh(t,e);var n=Tn(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?Tu(t,e.type,n):e.hasOwnProperty("defaultValue")&&Tu(t,e.type,Tn(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function ed(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function Tu(t,e,n){(e!=="number"||ss(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var yi=Array.isArray;function Ir(t,e,n,r){if(t=t.options,e){e={};for(var i=0;i<n.length;i++)e["$"+n[i]]=!0;for(n=0;n<t.length;n++)i=e.hasOwnProperty("$"+t[n].value),t[n].selected!==i&&(t[n].selected=i),i&&r&&(t[n].defaultSelected=!0)}else{for(n=""+Tn(n),e=null,i=0;i<t.length;i++){if(t[i].value===n){t[i].selected=!0,r&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function xu(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(k(91));return he({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function td(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(k(92));if(yi(n)){if(1<n.length)throw Error(k(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:Tn(n)}}function bh(t,e){var n=Tn(e.value),r=Tn(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function nd(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function Eh(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Ou(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?Eh(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Oa,Sh=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,i){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,i)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Oa=Oa||document.createElement("div"),Oa.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Oa.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Li(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var Ei={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},jg=["Webkit","ms","Moz","O"];Object.keys(Ei).forEach(function(t){jg.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Ei[e]=Ei[t]})});function kh(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||Ei.hasOwnProperty(t)&&Ei[t]?(""+e).trim():e+"px"}function Th(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=kh(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,i):t[n]=i}}var Dg=he({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Cu(t,e){if(e){if(Dg[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(k(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(k(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(k(61))}if(e.style!=null&&typeof e.style!="object")throw Error(k(62))}}function Pu(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Ru=null;function Pl(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Iu=null,Nr=null,$r=null;function rd(t){if(t=ya(t)){if(typeof Iu!="function")throw Error(k(280));var e=t.stateNode;e&&(e=Qs(e),Iu(t.stateNode,t.type,e))}}function xh(t){Nr?$r?$r.push(t):$r=[t]:Nr=t}function Oh(){if(Nr){var t=Nr,e=$r;if($r=Nr=null,rd(t),e)for(t=0;t<e.length;t++)rd(e[t])}}function Ch(t,e){return t(e)}function Ph(){}var xo=!1;function Rh(t,e,n){if(xo)return t(e,n);xo=!0;try{return Ch(t,e,n)}finally{xo=!1,(Nr!==null||$r!==null)&&(Ph(),Oh())}}function ji(t,e){var n=t.stateNode;if(n===null)return null;var r=Qs(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(k(231,e,typeof n));return n}var Nu=!1;if(Yt)try{var ai={};Object.defineProperty(ai,"passive",{get:function(){Nu=!0}}),window.addEventListener("test",ai,ai),window.removeEventListener("test",ai,ai)}catch{Nu=!1}function Mg(t,e,n,r,i,a,s,o,u){var l=Array.prototype.slice.call(arguments,3);try{e.apply(n,l)}catch(c){this.onError(c)}}var Si=!1,os=null,us=!1,$u=null,Ug={onError:function(t){Si=!0,os=t}};function Fg(t,e,n,r,i,a,s,o,u){Si=!1,os=null,Mg.apply(Ug,arguments)}function zg(t,e,n,r,i,a,s,o,u){if(Fg.apply(this,arguments),Si){if(Si){var l=os;Si=!1,os=null}else throw Error(k(198));us||(us=!0,$u=l)}}function cr(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,(e.flags&4098)!==0&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function Ih(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function id(t){if(cr(t)!==t)throw Error(k(188))}function Bg(t){var e=t.alternate;if(!e){if(e=cr(t),e===null)throw Error(k(188));return e!==t?null:t}for(var n=t,r=e;;){var i=n.return;if(i===null)break;var a=i.alternate;if(a===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===a.child){for(a=i.child;a;){if(a===n)return id(i),t;if(a===r)return id(i),e;a=a.sibling}throw Error(k(188))}if(n.return!==r.return)n=i,r=a;else{for(var s=!1,o=i.child;o;){if(o===n){s=!0,n=i,r=a;break}if(o===r){s=!0,r=i,n=a;break}o=o.sibling}if(!s){for(o=a.child;o;){if(o===n){s=!0,n=a,r=i;break}if(o===r){s=!0,r=a,n=i;break}o=o.sibling}if(!s)throw Error(k(189))}}if(n.alternate!==r)throw Error(k(190))}if(n.tag!==3)throw Error(k(188));return n.stateNode.current===n?t:e}function Nh(t){return t=Bg(t),t!==null?$h(t):null}function $h(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=$h(t);if(e!==null)return e;t=t.sibling}return null}var Ah=st.unstable_scheduleCallback,ad=st.unstable_cancelCallback,Hg=st.unstable_shouldYield,Vg=st.unstable_requestPaint,ge=st.unstable_now,Zg=st.unstable_getCurrentPriorityLevel,Rl=st.unstable_ImmediatePriority,Lh=st.unstable_UserBlockingPriority,ls=st.unstable_NormalPriority,Gg=st.unstable_LowPriority,jh=st.unstable_IdlePriority,Zs=null,Dt=null;function Wg(t){if(Dt&&typeof Dt.onCommitFiberRoot=="function")try{Dt.onCommitFiberRoot(Zs,t,void 0,(t.current.flags&128)===128)}catch{}}var Ot=Math.clz32?Math.clz32:qg,Jg=Math.log,Qg=Math.LN2;function qg(t){return t>>>=0,t===0?32:31-(Jg(t)/Qg|0)|0}var Ca=64,Pa=4194304;function vi(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function cs(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,i=t.suspendedLanes,a=t.pingedLanes,s=n&268435455;if(s!==0){var o=s&~i;o!==0?r=vi(o):(a&=s,a!==0&&(r=vi(a)))}else s=n&~i,s!==0?r=vi(s):a!==0&&(r=vi(a));if(r===0)return 0;if(e!==0&&e!==r&&(e&i)===0&&(i=r&-r,a=e&-e,i>=a||i===16&&(a&4194240)!==0))return e;if((r&4)!==0&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-Ot(e),i=1<<n,r|=t[n],e&=~i;return r}function Kg(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Xg(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,i=t.expirationTimes,a=t.pendingLanes;0<a;){var s=31-Ot(a),o=1<<s,u=i[s];u===-1?((o&n)===0||(o&r)!==0)&&(i[s]=Kg(o,e)):u<=e&&(t.expiredLanes|=o),a&=~o}}function Au(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function Dh(){var t=Ca;return Ca<<=1,(Ca&4194240)===0&&(Ca=64),t}function Oo(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function ma(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-Ot(e),t[e]=n}function Yg(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var i=31-Ot(n),a=1<<i;e[i]=0,r[i]=-1,t[i]=-1,n&=~a}}function Il(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-Ot(n),i=1<<r;i&e|t[r]&e&&(t[r]|=e),n&=~i}}var te=0;function Mh(t){return t&=-t,1<t?4<t?(t&268435455)!==0?16:536870912:4:1}var Uh,Nl,Fh,zh,Bh,Lu=!1,Ra=[],yn=null,vn=null,_n=null,Di=new Map,Mi=new Map,fn=[],ey="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function sd(t,e){switch(t){case"focusin":case"focusout":yn=null;break;case"dragenter":case"dragleave":vn=null;break;case"mouseover":case"mouseout":_n=null;break;case"pointerover":case"pointerout":Di.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Mi.delete(e.pointerId)}}function si(t,e,n,r,i,a){return t===null||t.nativeEvent!==a?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:a,targetContainers:[i]},e!==null&&(e=ya(e),e!==null&&Nl(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function ty(t,e,n,r,i){switch(e){case"focusin":return yn=si(yn,t,e,n,r,i),!0;case"dragenter":return vn=si(vn,t,e,n,r,i),!0;case"mouseover":return _n=si(_n,t,e,n,r,i),!0;case"pointerover":var a=i.pointerId;return Di.set(a,si(Di.get(a)||null,t,e,n,r,i)),!0;case"gotpointercapture":return a=i.pointerId,Mi.set(a,si(Mi.get(a)||null,t,e,n,r,i)),!0}return!1}function Hh(t){var e=zn(t.target);if(e!==null){var n=cr(e);if(n!==null){if(e=n.tag,e===13){if(e=Ih(n),e!==null){t.blockedOn=e,Bh(t.priority,function(){Fh(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function qa(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=ju(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);Ru=r,n.target.dispatchEvent(r),Ru=null}else return e=ya(n),e!==null&&Nl(e),t.blockedOn=n,!1;e.shift()}return!0}function od(t,e,n){qa(t)&&n.delete(e)}function ny(){Lu=!1,yn!==null&&qa(yn)&&(yn=null),vn!==null&&qa(vn)&&(vn=null),_n!==null&&qa(_n)&&(_n=null),Di.forEach(od),Mi.forEach(od)}function oi(t,e){t.blockedOn===e&&(t.blockedOn=null,Lu||(Lu=!0,st.unstable_scheduleCallback(st.unstable_NormalPriority,ny)))}function Ui(t){function e(i){return oi(i,t)}if(0<Ra.length){oi(Ra[0],t);for(var n=1;n<Ra.length;n++){var r=Ra[n];r.blockedOn===t&&(r.blockedOn=null)}}for(yn!==null&&oi(yn,t),vn!==null&&oi(vn,t),_n!==null&&oi(_n,t),Di.forEach(e),Mi.forEach(e),n=0;n<fn.length;n++)r=fn[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<fn.length&&(n=fn[0],n.blockedOn===null);)Hh(n),n.blockedOn===null&&fn.shift()}var Ar=an.ReactCurrentBatchConfig,ds=!0;function ry(t,e,n,r){var i=te,a=Ar.transition;Ar.transition=null;try{te=1,$l(t,e,n,r)}finally{te=i,Ar.transition=a}}function iy(t,e,n,r){var i=te,a=Ar.transition;Ar.transition=null;try{te=4,$l(t,e,n,r)}finally{te=i,Ar.transition=a}}function $l(t,e,n,r){if(ds){var i=ju(t,e,n,r);if(i===null)Do(t,e,r,fs,n),sd(t,r);else if(ty(i,t,e,n,r))r.stopPropagation();else if(sd(t,r),e&4&&-1<ey.indexOf(t)){for(;i!==null;){var a=ya(i);if(a!==null&&Uh(a),a=ju(t,e,n,r),a===null&&Do(t,e,r,fs,n),a===i)break;i=a}i!==null&&r.stopPropagation()}else Do(t,e,r,null,n)}}var fs=null;function ju(t,e,n,r){if(fs=null,t=Pl(r),t=zn(t),t!==null)if(e=cr(t),e===null)t=null;else if(n=e.tag,n===13){if(t=Ih(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return fs=t,null}function Vh(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Zg()){case Rl:return 1;case Lh:return 4;case ls:case Gg:return 16;case jh:return 536870912;default:return 16}default:return 16}}var mn=null,Al=null,Ka=null;function Zh(){if(Ka)return Ka;var t,e=Al,n=e.length,r,i="value"in mn?mn.value:mn.textContent,a=i.length;for(t=0;t<n&&e[t]===i[t];t++);var s=n-t;for(r=1;r<=s&&e[n-r]===i[a-r];r++);return Ka=i.slice(t,1<r?1-r:void 0)}function Xa(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Ia(){return!0}function ud(){return!1}function ut(t){function e(n,r,i,a,s){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=a,this.target=s,this.currentTarget=null;for(var o in t)t.hasOwnProperty(o)&&(n=t[o],this[o]=n?n(a):a[o]);return this.isDefaultPrevented=(a.defaultPrevented!=null?a.defaultPrevented:a.returnValue===!1)?Ia:ud,this.isPropagationStopped=ud,this}return he(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Ia)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Ia)},persist:function(){},isPersistent:Ia}),e}var Xr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Ll=ut(Xr),ga=he({},Xr,{view:0,detail:0}),ay=ut(ga),Co,Po,ui,Gs=he({},ga,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:jl,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==ui&&(ui&&t.type==="mousemove"?(Co=t.screenX-ui.screenX,Po=t.screenY-ui.screenY):Po=Co=0,ui=t),Co)},movementY:function(t){return"movementY"in t?t.movementY:Po}}),ld=ut(Gs),sy=he({},Gs,{dataTransfer:0}),oy=ut(sy),uy=he({},ga,{relatedTarget:0}),Ro=ut(uy),ly=he({},Xr,{animationName:0,elapsedTime:0,pseudoElement:0}),cy=ut(ly),dy=he({},Xr,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),fy=ut(dy),hy=he({},Xr,{data:0}),cd=ut(hy),py={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},my={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},gy={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function yy(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=gy[t])?!!e[t]:!1}function jl(){return yy}var vy=he({},ga,{key:function(t){if(t.key){var e=py[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Xa(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?my[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:jl,charCode:function(t){return t.type==="keypress"?Xa(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Xa(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),_y=ut(vy),wy=he({},Gs,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),dd=ut(wy),by=he({},ga,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:jl}),Ey=ut(by),Sy=he({},Xr,{propertyName:0,elapsedTime:0,pseudoElement:0}),ky=ut(Sy),Ty=he({},Gs,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),xy=ut(Ty),Oy=[9,13,27,32],Dl=Yt&&"CompositionEvent"in window,ki=null;Yt&&"documentMode"in document&&(ki=document.documentMode);var Cy=Yt&&"TextEvent"in window&&!ki,Gh=Yt&&(!Dl||ki&&8<ki&&11>=ki),fd=String.fromCharCode(32),hd=!1;function Wh(t,e){switch(t){case"keyup":return Oy.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Jh(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var vr=!1;function Py(t,e){switch(t){case"compositionend":return Jh(e);case"keypress":return e.which!==32?null:(hd=!0,fd);case"textInput":return t=e.data,t===fd&&hd?null:t;default:return null}}function Ry(t,e){if(vr)return t==="compositionend"||!Dl&&Wh(t,e)?(t=Zh(),Ka=Al=mn=null,vr=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return Gh&&e.locale!=="ko"?null:e.data;default:return null}}var Iy={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function pd(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!Iy[t.type]:e==="textarea"}function Qh(t,e,n,r){xh(r),e=hs(e,"onChange"),0<e.length&&(n=new Ll("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var Ti=null,Fi=null;function Ny(t){sp(t,0)}function Ws(t){var e=br(t);if(_h(e))return t}function $y(t,e){if(t==="change")return e}var qh=!1;if(Yt){var Io;if(Yt){var No="oninput"in document;if(!No){var md=document.createElement("div");md.setAttribute("oninput","return;"),No=typeof md.oninput=="function"}Io=No}else Io=!1;qh=Io&&(!document.documentMode||9<document.documentMode)}function gd(){Ti&&(Ti.detachEvent("onpropertychange",Kh),Fi=Ti=null)}function Kh(t){if(t.propertyName==="value"&&Ws(Fi)){var e=[];Qh(e,Fi,t,Pl(t)),Rh(Ny,e)}}function Ay(t,e,n){t==="focusin"?(gd(),Ti=e,Fi=n,Ti.attachEvent("onpropertychange",Kh)):t==="focusout"&&gd()}function Ly(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Ws(Fi)}function jy(t,e){if(t==="click")return Ws(e)}function Dy(t,e){if(t==="input"||t==="change")return Ws(e)}function My(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Rt=typeof Object.is=="function"?Object.is:My;function zi(t,e){if(Rt(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!vu.call(e,i)||!Rt(t[i],e[i]))return!1}return!0}function yd(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function vd(t,e){var n=yd(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=yd(n)}}function Xh(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?Xh(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function Yh(){for(var t=window,e=ss();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=ss(t.document)}return e}function Ml(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function Uy(t){var e=Yh(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&Xh(n.ownerDocument.documentElement,n)){if(r!==null&&Ml(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var i=n.textContent.length,a=Math.min(r.start,i);r=r.end===void 0?a:Math.min(r.end,i),!t.extend&&a>r&&(i=r,r=a,a=i),i=vd(n,a);var s=vd(n,r);i&&s&&(t.rangeCount!==1||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==s.node||t.focusOffset!==s.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),t.removeAllRanges(),a>r?(t.addRange(e),t.extend(s.node,s.offset)):(e.setEnd(s.node,s.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var Fy=Yt&&"documentMode"in document&&11>=document.documentMode,_r=null,Du=null,xi=null,Mu=!1;function _d(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Mu||_r==null||_r!==ss(r)||(r=_r,"selectionStart"in r&&Ml(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),xi&&zi(xi,r)||(xi=r,r=hs(Du,"onSelect"),0<r.length&&(e=new Ll("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=_r)))}function Na(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var wr={animationend:Na("Animation","AnimationEnd"),animationiteration:Na("Animation","AnimationIteration"),animationstart:Na("Animation","AnimationStart"),transitionend:Na("Transition","TransitionEnd")},$o={},ep={};Yt&&(ep=document.createElement("div").style,"AnimationEvent"in window||(delete wr.animationend.animation,delete wr.animationiteration.animation,delete wr.animationstart.animation),"TransitionEvent"in window||delete wr.transitionend.transition);function Js(t){if($o[t])return $o[t];if(!wr[t])return t;var e=wr[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in ep)return $o[t]=e[n];return t}var tp=Js("animationend"),np=Js("animationiteration"),rp=Js("animationstart"),ip=Js("transitionend"),ap=new Map,wd="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function $n(t,e){ap.set(t,e),lr(e,[t])}for(var Ao=0;Ao<wd.length;Ao++){var Lo=wd[Ao],zy=Lo.toLowerCase(),By=Lo[0].toUpperCase()+Lo.slice(1);$n(zy,"on"+By)}$n(tp,"onAnimationEnd");$n(np,"onAnimationIteration");$n(rp,"onAnimationStart");$n("dblclick","onDoubleClick");$n("focusin","onFocus");$n("focusout","onBlur");$n(ip,"onTransitionEnd");Mr("onMouseEnter",["mouseout","mouseover"]);Mr("onMouseLeave",["mouseout","mouseover"]);Mr("onPointerEnter",["pointerout","pointerover"]);Mr("onPointerLeave",["pointerout","pointerover"]);lr("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));lr("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));lr("onBeforeInput",["compositionend","keypress","textInput","paste"]);lr("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));lr("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));lr("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var _i="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Hy=new Set("cancel close invalid load scroll toggle".split(" ").concat(_i));function bd(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,zg(r,e,void 0,t),t.currentTarget=null}function sp(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],i=r.event;r=r.listeners;e:{var a=void 0;if(e)for(var s=r.length-1;0<=s;s--){var o=r[s],u=o.instance,l=o.currentTarget;if(o=o.listener,u!==a&&i.isPropagationStopped())break e;bd(i,o,l),a=u}else for(s=0;s<r.length;s++){if(o=r[s],u=o.instance,l=o.currentTarget,o=o.listener,u!==a&&i.isPropagationStopped())break e;bd(i,o,l),a=u}}}if(us)throw t=$u,us=!1,$u=null,t}function ae(t,e){var n=e[Hu];n===void 0&&(n=e[Hu]=new Set);var r=t+"__bubble";n.has(r)||(op(e,t,2,!1),n.add(r))}function jo(t,e,n){var r=0;e&&(r|=4),op(n,t,r,e)}var $a="_reactListening"+Math.random().toString(36).slice(2);function Bi(t){if(!t[$a]){t[$a]=!0,ph.forEach(function(n){n!=="selectionchange"&&(Hy.has(n)||jo(n,!1,t),jo(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[$a]||(e[$a]=!0,jo("selectionchange",!1,e))}}function op(t,e,n,r){switch(Vh(e)){case 1:var i=ry;break;case 4:i=iy;break;default:i=$l}n=i.bind(null,e,n,t),i=void 0,!Nu||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),r?i!==void 0?t.addEventListener(e,n,{capture:!0,passive:i}):t.addEventListener(e,n,!0):i!==void 0?t.addEventListener(e,n,{passive:i}):t.addEventListener(e,n,!1)}function Do(t,e,n,r,i){var a=r;if((e&1)===0&&(e&2)===0&&r!==null)e:for(;;){if(r===null)return;var s=r.tag;if(s===3||s===4){var o=r.stateNode.containerInfo;if(o===i||o.nodeType===8&&o.parentNode===i)break;if(s===4)for(s=r.return;s!==null;){var u=s.tag;if((u===3||u===4)&&(u=s.stateNode.containerInfo,u===i||u.nodeType===8&&u.parentNode===i))return;s=s.return}for(;o!==null;){if(s=zn(o),s===null)return;if(u=s.tag,u===5||u===6){r=a=s;continue e}o=o.parentNode}}r=r.return}Rh(function(){var l=a,c=Pl(n),d=[];e:{var f=ap.get(t);if(f!==void 0){var h=Ll,p=t;switch(t){case"keypress":if(Xa(n)===0)break e;case"keydown":case"keyup":h=_y;break;case"focusin":p="focus",h=Ro;break;case"focusout":p="blur",h=Ro;break;case"beforeblur":case"afterblur":h=Ro;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":h=ld;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":h=oy;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":h=Ey;break;case tp:case np:case rp:h=cy;break;case ip:h=ky;break;case"scroll":h=ay;break;case"wheel":h=xy;break;case"copy":case"cut":case"paste":h=fy;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":h=dd}var v=(e&4)!==0,_=!v&&t==="scroll",m=v?f!==null?f+"Capture":null:f;v=[];for(var g=l,y;g!==null;){y=g;var w=y.stateNode;if(y.tag===5&&w!==null&&(y=w,m!==null&&(w=ji(g,m),w!=null&&v.push(Hi(g,w,y)))),_)break;g=g.return}0<v.length&&(f=new h(f,p,null,n,c),d.push({event:f,listeners:v}))}}if((e&7)===0){e:{if(f=t==="mouseover"||t==="pointerover",h=t==="mouseout"||t==="pointerout",f&&n!==Ru&&(p=n.relatedTarget||n.fromElement)&&(zn(p)||p[en]))break e;if((h||f)&&(f=c.window===c?c:(f=c.ownerDocument)?f.defaultView||f.parentWindow:window,h?(p=n.relatedTarget||n.toElement,h=l,p=p?zn(p):null,p!==null&&(_=cr(p),p!==_||p.tag!==5&&p.tag!==6)&&(p=null)):(h=null,p=l),h!==p)){if(v=ld,w="onMouseLeave",m="onMouseEnter",g="mouse",(t==="pointerout"||t==="pointerover")&&(v=dd,w="onPointerLeave",m="onPointerEnter",g="pointer"),_=h==null?f:br(h),y=p==null?f:br(p),f=new v(w,g+"leave",h,n,c),f.target=_,f.relatedTarget=y,w=null,zn(c)===l&&(v=new v(m,g+"enter",p,n,c),v.target=y,v.relatedTarget=_,w=v),_=w,h&&p)t:{for(v=h,m=p,g=0,y=v;y;y=hr(y))g++;for(y=0,w=m;w;w=hr(w))y++;for(;0<g-y;)v=hr(v),g--;for(;0<y-g;)m=hr(m),y--;for(;g--;){if(v===m||m!==null&&v===m.alternate)break t;v=hr(v),m=hr(m)}v=null}else v=null;h!==null&&Ed(d,f,h,v,!1),p!==null&&_!==null&&Ed(d,_,p,v,!0)}}e:{if(f=l?br(l):window,h=f.nodeName&&f.nodeName.toLowerCase(),h==="select"||h==="input"&&f.type==="file")var E=$y;else if(pd(f))if(qh)E=Dy;else{E=Ly;var T=Ay}else(h=f.nodeName)&&h.toLowerCase()==="input"&&(f.type==="checkbox"||f.type==="radio")&&(E=jy);if(E&&(E=E(t,l))){Qh(d,E,n,c);break e}T&&T(t,f,l),t==="focusout"&&(T=f._wrapperState)&&T.controlled&&f.type==="number"&&Tu(f,"number",f.value)}switch(T=l?br(l):window,t){case"focusin":(pd(T)||T.contentEditable==="true")&&(_r=T,Du=l,xi=null);break;case"focusout":xi=Du=_r=null;break;case"mousedown":Mu=!0;break;case"contextmenu":case"mouseup":case"dragend":Mu=!1,_d(d,n,c);break;case"selectionchange":if(Fy)break;case"keydown":case"keyup":_d(d,n,c)}var C;if(Dl)e:{switch(t){case"compositionstart":var P="onCompositionStart";break e;case"compositionend":P="onCompositionEnd";break e;case"compositionupdate":P="onCompositionUpdate";break e}P=void 0}else vr?Wh(t,n)&&(P="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(P="onCompositionStart");P&&(Gh&&n.locale!=="ko"&&(vr||P!=="onCompositionStart"?P==="onCompositionEnd"&&vr&&(C=Zh()):(mn=c,Al="value"in mn?mn.value:mn.textContent,vr=!0)),T=hs(l,P),0<T.length&&(P=new cd(P,t,null,n,c),d.push({event:P,listeners:T}),C?P.data=C:(C=Jh(n),C!==null&&(P.data=C)))),(C=Cy?Py(t,n):Ry(t,n))&&(l=hs(l,"onBeforeInput"),0<l.length&&(c=new cd("onBeforeInput","beforeinput",null,n,c),d.push({event:c,listeners:l}),c.data=C))}sp(d,e)})}function Hi(t,e,n){return{instance:t,listener:e,currentTarget:n}}function hs(t,e){for(var n=e+"Capture",r=[];t!==null;){var i=t,a=i.stateNode;i.tag===5&&a!==null&&(i=a,a=ji(t,n),a!=null&&r.unshift(Hi(t,a,i)),a=ji(t,e),a!=null&&r.push(Hi(t,a,i))),t=t.return}return r}function hr(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function Ed(t,e,n,r,i){for(var a=e._reactName,s=[];n!==null&&n!==r;){var o=n,u=o.alternate,l=o.stateNode;if(u!==null&&u===r)break;o.tag===5&&l!==null&&(o=l,i?(u=ji(n,a),u!=null&&s.unshift(Hi(n,u,o))):i||(u=ji(n,a),u!=null&&s.push(Hi(n,u,o)))),n=n.return}s.length!==0&&t.push({event:e,listeners:s})}var Vy=/\r\n?/g,Zy=/\u0000|\uFFFD/g;function Sd(t){return(typeof t=="string"?t:""+t).replace(Vy,`
`).replace(Zy,"")}function Aa(t,e,n){if(e=Sd(e),Sd(t)!==e&&n)throw Error(k(425))}function ps(){}var Uu=null,Fu=null;function zu(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Bu=typeof setTimeout=="function"?setTimeout:void 0,Gy=typeof clearTimeout=="function"?clearTimeout:void 0,kd=typeof Promise=="function"?Promise:void 0,Wy=typeof queueMicrotask=="function"?queueMicrotask:typeof kd<"u"?function(t){return kd.resolve(null).then(t).catch(Jy)}:Bu;function Jy(t){setTimeout(function(){throw t})}function Mo(t,e){var n=e,r=0;do{var i=n.nextSibling;if(t.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){t.removeChild(i),Ui(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);Ui(e)}function wn(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function Td(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var Yr=Math.random().toString(36).slice(2),jt="__reactFiber$"+Yr,Vi="__reactProps$"+Yr,en="__reactContainer$"+Yr,Hu="__reactEvents$"+Yr,Qy="__reactListeners$"+Yr,qy="__reactHandles$"+Yr;function zn(t){var e=t[jt];if(e)return e;for(var n=t.parentNode;n;){if(e=n[en]||n[jt]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=Td(t);t!==null;){if(n=t[jt])return n;t=Td(t)}return e}t=n,n=t.parentNode}return null}function ya(t){return t=t[jt]||t[en],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function br(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(k(33))}function Qs(t){return t[Vi]||null}var Vu=[],Er=-1;function An(t){return{current:t}}function se(t){0>Er||(t.current=Vu[Er],Vu[Er]=null,Er--)}function ie(t,e){Er++,Vu[Er]=t.current,t.current=e}var xn={},Ae=An(xn),qe=An(!1),Xn=xn;function Ur(t,e){var n=t.type.contextTypes;if(!n)return xn;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i={},a;for(a in n)i[a]=e[a];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function Ke(t){return t=t.childContextTypes,t!=null}function ms(){se(qe),se(Ae)}function xd(t,e,n){if(Ae.current!==xn)throw Error(k(168));ie(Ae,e),ie(qe,n)}function up(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in e))throw Error(k(108,Ag(t)||"Unknown",i));return he({},n,r)}function gs(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||xn,Xn=Ae.current,ie(Ae,t),ie(qe,qe.current),!0}function Od(t,e,n){var r=t.stateNode;if(!r)throw Error(k(169));n?(t=up(t,e,Xn),r.__reactInternalMemoizedMergedChildContext=t,se(qe),se(Ae),ie(Ae,t)):se(qe),ie(qe,n)}var Wt=null,qs=!1,Uo=!1;function lp(t){Wt===null?Wt=[t]:Wt.push(t)}function Ky(t){qs=!0,lp(t)}function Ln(){if(!Uo&&Wt!==null){Uo=!0;var t=0,e=te;try{var n=Wt;for(te=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}Wt=null,qs=!1}catch(i){throw Wt!==null&&(Wt=Wt.slice(t+1)),Ah(Rl,Ln),i}finally{te=e,Uo=!1}}return null}var Sr=[],kr=0,ys=null,vs=0,ct=[],dt=0,Yn=null,Qt=1,qt="";function Mn(t,e){Sr[kr++]=vs,Sr[kr++]=ys,ys=t,vs=e}function cp(t,e,n){ct[dt++]=Qt,ct[dt++]=qt,ct[dt++]=Yn,Yn=t;var r=Qt;t=qt;var i=32-Ot(r)-1;r&=~(1<<i),n+=1;var a=32-Ot(e)+i;if(30<a){var s=i-i%5;a=(r&(1<<s)-1).toString(32),r>>=s,i-=s,Qt=1<<32-Ot(e)+i|n<<i|r,qt=a+t}else Qt=1<<a|n<<i|r,qt=t}function Ul(t){t.return!==null&&(Mn(t,1),cp(t,1,0))}function Fl(t){for(;t===ys;)ys=Sr[--kr],Sr[kr]=null,vs=Sr[--kr],Sr[kr]=null;for(;t===Yn;)Yn=ct[--dt],ct[dt]=null,qt=ct[--dt],ct[dt]=null,Qt=ct[--dt],ct[dt]=null}var it=null,rt=null,ue=!1,kt=null;function dp(t,e){var n=ft(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function Cd(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,it=t,rt=wn(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,it=t,rt=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=Yn!==null?{id:Qt,overflow:qt}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=ft(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,it=t,rt=null,!0):!1;default:return!1}}function Zu(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Gu(t){if(ue){var e=rt;if(e){var n=e;if(!Cd(t,e)){if(Zu(t))throw Error(k(418));e=wn(n.nextSibling);var r=it;e&&Cd(t,e)?dp(r,n):(t.flags=t.flags&-4097|2,ue=!1,it=t)}}else{if(Zu(t))throw Error(k(418));t.flags=t.flags&-4097|2,ue=!1,it=t}}}function Pd(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;it=t}function La(t){if(t!==it)return!1;if(!ue)return Pd(t),ue=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!zu(t.type,t.memoizedProps)),e&&(e=rt)){if(Zu(t))throw fp(),Error(k(418));for(;e;)dp(t,e),e=wn(e.nextSibling)}if(Pd(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(k(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){rt=wn(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}rt=null}}else rt=it?wn(t.stateNode.nextSibling):null;return!0}function fp(){for(var t=rt;t;)t=wn(t.nextSibling)}function Fr(){rt=it=null,ue=!1}function zl(t){kt===null?kt=[t]:kt.push(t)}var Xy=an.ReactCurrentBatchConfig;function li(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(k(309));var r=n.stateNode}if(!r)throw Error(k(147,t));var i=r,a=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===a?e.ref:(e=function(s){var o=i.refs;s===null?delete o[a]:o[a]=s},e._stringRef=a,e)}if(typeof t!="string")throw Error(k(284));if(!n._owner)throw Error(k(290,t))}return t}function ja(t,e){throw t=Object.prototype.toString.call(e),Error(k(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function Rd(t){var e=t._init;return e(t._payload)}function hp(t){function e(m,g){if(t){var y=m.deletions;y===null?(m.deletions=[g],m.flags|=16):y.push(g)}}function n(m,g){if(!t)return null;for(;g!==null;)e(m,g),g=g.sibling;return null}function r(m,g){for(m=new Map;g!==null;)g.key!==null?m.set(g.key,g):m.set(g.index,g),g=g.sibling;return m}function i(m,g){return m=kn(m,g),m.index=0,m.sibling=null,m}function a(m,g,y){return m.index=y,t?(y=m.alternate,y!==null?(y=y.index,y<g?(m.flags|=2,g):y):(m.flags|=2,g)):(m.flags|=1048576,g)}function s(m){return t&&m.alternate===null&&(m.flags|=2),m}function o(m,g,y,w){return g===null||g.tag!==6?(g=Go(y,m.mode,w),g.return=m,g):(g=i(g,y),g.return=m,g)}function u(m,g,y,w){var E=y.type;return E===yr?c(m,g,y.props.children,w,y.key):g!==null&&(g.elementType===E||typeof E=="object"&&E!==null&&E.$$typeof===cn&&Rd(E)===g.type)?(w=i(g,y.props),w.ref=li(m,g,y),w.return=m,w):(w=as(y.type,y.key,y.props,null,m.mode,w),w.ref=li(m,g,y),w.return=m,w)}function l(m,g,y,w){return g===null||g.tag!==4||g.stateNode.containerInfo!==y.containerInfo||g.stateNode.implementation!==y.implementation?(g=Wo(y,m.mode,w),g.return=m,g):(g=i(g,y.children||[]),g.return=m,g)}function c(m,g,y,w,E){return g===null||g.tag!==7?(g=Jn(y,m.mode,w,E),g.return=m,g):(g=i(g,y),g.return=m,g)}function d(m,g,y){if(typeof g=="string"&&g!==""||typeof g=="number")return g=Go(""+g,m.mode,y),g.return=m,g;if(typeof g=="object"&&g!==null){switch(g.$$typeof){case Ta:return y=as(g.type,g.key,g.props,null,m.mode,y),y.ref=li(m,null,g),y.return=m,y;case gr:return g=Wo(g,m.mode,y),g.return=m,g;case cn:var w=g._init;return d(m,w(g._payload),y)}if(yi(g)||ii(g))return g=Jn(g,m.mode,y,null),g.return=m,g;ja(m,g)}return null}function f(m,g,y,w){var E=g!==null?g.key:null;if(typeof y=="string"&&y!==""||typeof y=="number")return E!==null?null:o(m,g,""+y,w);if(typeof y=="object"&&y!==null){switch(y.$$typeof){case Ta:return y.key===E?u(m,g,y,w):null;case gr:return y.key===E?l(m,g,y,w):null;case cn:return E=y._init,f(m,g,E(y._payload),w)}if(yi(y)||ii(y))return E!==null?null:c(m,g,y,w,null);ja(m,y)}return null}function h(m,g,y,w,E){if(typeof w=="string"&&w!==""||typeof w=="number")return m=m.get(y)||null,o(g,m,""+w,E);if(typeof w=="object"&&w!==null){switch(w.$$typeof){case Ta:return m=m.get(w.key===null?y:w.key)||null,u(g,m,w,E);case gr:return m=m.get(w.key===null?y:w.key)||null,l(g,m,w,E);case cn:var T=w._init;return h(m,g,y,T(w._payload),E)}if(yi(w)||ii(w))return m=m.get(y)||null,c(g,m,w,E,null);ja(g,w)}return null}function p(m,g,y,w){for(var E=null,T=null,C=g,P=g=0,J=null;C!==null&&P<y.length;P++){C.index>P?(J=C,C=null):J=C.sibling;var B=f(m,C,y[P],w);if(B===null){C===null&&(C=J);break}t&&C&&B.alternate===null&&e(m,C),g=a(B,g,P),T===null?E=B:T.sibling=B,T=B,C=J}if(P===y.length)return n(m,C),ue&&Mn(m,P),E;if(C===null){for(;P<y.length;P++)C=d(m,y[P],w),C!==null&&(g=a(C,g,P),T===null?E=C:T.sibling=C,T=C);return ue&&Mn(m,P),E}for(C=r(m,C);P<y.length;P++)J=h(C,m,P,y[P],w),J!==null&&(t&&J.alternate!==null&&C.delete(J.key===null?P:J.key),g=a(J,g,P),T===null?E=J:T.sibling=J,T=J);return t&&C.forEach(function(le){return e(m,le)}),ue&&Mn(m,P),E}function v(m,g,y,w){var E=ii(y);if(typeof E!="function")throw Error(k(150));if(y=E.call(y),y==null)throw Error(k(151));for(var T=E=null,C=g,P=g=0,J=null,B=y.next();C!==null&&!B.done;P++,B=y.next()){C.index>P?(J=C,C=null):J=C.sibling;var le=f(m,C,B.value,w);if(le===null){C===null&&(C=J);break}t&&C&&le.alternate===null&&e(m,C),g=a(le,g,P),T===null?E=le:T.sibling=le,T=le,C=J}if(B.done)return n(m,C),ue&&Mn(m,P),E;if(C===null){for(;!B.done;P++,B=y.next())B=d(m,B.value,w),B!==null&&(g=a(B,g,P),T===null?E=B:T.sibling=B,T=B);return ue&&Mn(m,P),E}for(C=r(m,C);!B.done;P++,B=y.next())B=h(C,m,P,B.value,w),B!==null&&(t&&B.alternate!==null&&C.delete(B.key===null?P:B.key),g=a(B,g,P),T===null?E=B:T.sibling=B,T=B);return t&&C.forEach(function(Ge){return e(m,Ge)}),ue&&Mn(m,P),E}function _(m,g,y,w){if(typeof y=="object"&&y!==null&&y.type===yr&&y.key===null&&(y=y.props.children),typeof y=="object"&&y!==null){switch(y.$$typeof){case Ta:e:{for(var E=y.key,T=g;T!==null;){if(T.key===E){if(E=y.type,E===yr){if(T.tag===7){n(m,T.sibling),g=i(T,y.props.children),g.return=m,m=g;break e}}else if(T.elementType===E||typeof E=="object"&&E!==null&&E.$$typeof===cn&&Rd(E)===T.type){n(m,T.sibling),g=i(T,y.props),g.ref=li(m,T,y),g.return=m,m=g;break e}n(m,T);break}else e(m,T);T=T.sibling}y.type===yr?(g=Jn(y.props.children,m.mode,w,y.key),g.return=m,m=g):(w=as(y.type,y.key,y.props,null,m.mode,w),w.ref=li(m,g,y),w.return=m,m=w)}return s(m);case gr:e:{for(T=y.key;g!==null;){if(g.key===T)if(g.tag===4&&g.stateNode.containerInfo===y.containerInfo&&g.stateNode.implementation===y.implementation){n(m,g.sibling),g=i(g,y.children||[]),g.return=m,m=g;break e}else{n(m,g);break}else e(m,g);g=g.sibling}g=Wo(y,m.mode,w),g.return=m,m=g}return s(m);case cn:return T=y._init,_(m,g,T(y._payload),w)}if(yi(y))return p(m,g,y,w);if(ii(y))return v(m,g,y,w);ja(m,y)}return typeof y=="string"&&y!==""||typeof y=="number"?(y=""+y,g!==null&&g.tag===6?(n(m,g.sibling),g=i(g,y),g.return=m,m=g):(n(m,g),g=Go(y,m.mode,w),g.return=m,m=g),s(m)):n(m,g)}return _}var zr=hp(!0),pp=hp(!1),_s=An(null),ws=null,Tr=null,Bl=null;function Hl(){Bl=Tr=ws=null}function Vl(t){var e=_s.current;se(_s),t._currentValue=e}function Wu(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function Lr(t,e){ws=t,Bl=Tr=null,t=t.dependencies,t!==null&&t.firstContext!==null&&((t.lanes&e)!==0&&(Qe=!0),t.firstContext=null)}function pt(t){var e=t._currentValue;if(Bl!==t)if(t={context:t,memoizedValue:e,next:null},Tr===null){if(ws===null)throw Error(k(308));Tr=t,ws.dependencies={lanes:0,firstContext:t}}else Tr=Tr.next=t;return e}var Bn=null;function Zl(t){Bn===null?Bn=[t]:Bn.push(t)}function mp(t,e,n,r){var i=e.interleaved;return i===null?(n.next=n,Zl(e)):(n.next=i.next,i.next=n),e.interleaved=n,tn(t,r)}function tn(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var dn=!1;function Gl(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function gp(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Kt(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function bn(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,(K&2)!==0){var i=r.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),r.pending=e,tn(t,n)}return i=r.interleaved,i===null?(e.next=e,Zl(r)):(e.next=i.next,i.next=e),r.interleaved=e,tn(t,n)}function Ya(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Il(t,n)}}function Id(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,a=null;if(n=n.firstBaseUpdate,n!==null){do{var s={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};a===null?i=a=s:a=a.next=s,n=n.next}while(n!==null);a===null?i=a=e:a=a.next=e}else i=a=e;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:a,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function bs(t,e,n,r){var i=t.updateQueue;dn=!1;var a=i.firstBaseUpdate,s=i.lastBaseUpdate,o=i.shared.pending;if(o!==null){i.shared.pending=null;var u=o,l=u.next;u.next=null,s===null?a=l:s.next=l,s=u;var c=t.alternate;c!==null&&(c=c.updateQueue,o=c.lastBaseUpdate,o!==s&&(o===null?c.firstBaseUpdate=l:o.next=l,c.lastBaseUpdate=u))}if(a!==null){var d=i.baseState;s=0,c=l=u=null,o=a;do{var f=o.lane,h=o.eventTime;if((r&f)===f){c!==null&&(c=c.next={eventTime:h,lane:0,tag:o.tag,payload:o.payload,callback:o.callback,next:null});e:{var p=t,v=o;switch(f=e,h=n,v.tag){case 1:if(p=v.payload,typeof p=="function"){d=p.call(h,d,f);break e}d=p;break e;case 3:p.flags=p.flags&-65537|128;case 0:if(p=v.payload,f=typeof p=="function"?p.call(h,d,f):p,f==null)break e;d=he({},d,f);break e;case 2:dn=!0}}o.callback!==null&&o.lane!==0&&(t.flags|=64,f=i.effects,f===null?i.effects=[o]:f.push(o))}else h={eventTime:h,lane:f,tag:o.tag,payload:o.payload,callback:o.callback,next:null},c===null?(l=c=h,u=d):c=c.next=h,s|=f;if(o=o.next,o===null){if(o=i.shared.pending,o===null)break;f=o,o=f.next,f.next=null,i.lastBaseUpdate=f,i.shared.pending=null}}while(1);if(c===null&&(u=d),i.baseState=u,i.firstBaseUpdate=l,i.lastBaseUpdate=c,e=i.shared.interleaved,e!==null){i=e;do s|=i.lane,i=i.next;while(i!==e)}else a===null&&(i.shared.lanes=0);tr|=s,t.lanes=s,t.memoizedState=d}}function Nd(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(k(191,i));i.call(r)}}}var va={},Mt=An(va),Zi=An(va),Gi=An(va);function Hn(t){if(t===va)throw Error(k(174));return t}function Wl(t,e){switch(ie(Gi,e),ie(Zi,t),ie(Mt,va),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Ou(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=Ou(e,t)}se(Mt),ie(Mt,e)}function Br(){se(Mt),se(Zi),se(Gi)}function yp(t){Hn(Gi.current);var e=Hn(Mt.current),n=Ou(e,t.type);e!==n&&(ie(Zi,t),ie(Mt,n))}function Jl(t){Zi.current===t&&(se(Mt),se(Zi))}var de=An(0);function Es(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if((e.flags&128)!==0)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Fo=[];function Ql(){for(var t=0;t<Fo.length;t++)Fo[t]._workInProgressVersionPrimary=null;Fo.length=0}var es=an.ReactCurrentDispatcher,zo=an.ReactCurrentBatchConfig,er=0,fe=null,we=null,Se=null,Ss=!1,Oi=!1,Wi=0,Yy=0;function Re(){throw Error(k(321))}function ql(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!Rt(t[n],e[n]))return!1;return!0}function Kl(t,e,n,r,i,a){if(er=a,fe=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,es.current=t===null||t.memoizedState===null?rv:iv,t=n(r,i),Oi){a=0;do{if(Oi=!1,Wi=0,25<=a)throw Error(k(301));a+=1,Se=we=null,e.updateQueue=null,es.current=av,t=n(r,i)}while(Oi)}if(es.current=ks,e=we!==null&&we.next!==null,er=0,Se=we=fe=null,Ss=!1,e)throw Error(k(300));return t}function Xl(){var t=Wi!==0;return Wi=0,t}function Lt(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Se===null?fe.memoizedState=Se=t:Se=Se.next=t,Se}function mt(){if(we===null){var t=fe.alternate;t=t!==null?t.memoizedState:null}else t=we.next;var e=Se===null?fe.memoizedState:Se.next;if(e!==null)Se=e,we=t;else{if(t===null)throw Error(k(310));we=t,t={memoizedState:we.memoizedState,baseState:we.baseState,baseQueue:we.baseQueue,queue:we.queue,next:null},Se===null?fe.memoizedState=Se=t:Se=Se.next=t}return Se}function Ji(t,e){return typeof e=="function"?e(t):e}function Bo(t){var e=mt(),n=e.queue;if(n===null)throw Error(k(311));n.lastRenderedReducer=t;var r=we,i=r.baseQueue,a=n.pending;if(a!==null){if(i!==null){var s=i.next;i.next=a.next,a.next=s}r.baseQueue=i=a,n.pending=null}if(i!==null){a=i.next,r=r.baseState;var o=s=null,u=null,l=a;do{var c=l.lane;if((er&c)===c)u!==null&&(u=u.next={lane:0,action:l.action,hasEagerState:l.hasEagerState,eagerState:l.eagerState,next:null}),r=l.hasEagerState?l.eagerState:t(r,l.action);else{var d={lane:c,action:l.action,hasEagerState:l.hasEagerState,eagerState:l.eagerState,next:null};u===null?(o=u=d,s=r):u=u.next=d,fe.lanes|=c,tr|=c}l=l.next}while(l!==null&&l!==a);u===null?s=r:u.next=o,Rt(r,e.memoizedState)||(Qe=!0),e.memoizedState=r,e.baseState=s,e.baseQueue=u,n.lastRenderedState=r}if(t=n.interleaved,t!==null){i=t;do a=i.lane,fe.lanes|=a,tr|=a,i=i.next;while(i!==t)}else i===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function Ho(t){var e=mt(),n=e.queue;if(n===null)throw Error(k(311));n.lastRenderedReducer=t;var r=n.dispatch,i=n.pending,a=e.memoizedState;if(i!==null){n.pending=null;var s=i=i.next;do a=t(a,s.action),s=s.next;while(s!==i);Rt(a,e.memoizedState)||(Qe=!0),e.memoizedState=a,e.baseQueue===null&&(e.baseState=a),n.lastRenderedState=a}return[a,r]}function vp(){}function _p(t,e){var n=fe,r=mt(),i=e(),a=!Rt(r.memoizedState,i);if(a&&(r.memoizedState=i,Qe=!0),r=r.queue,Yl(Ep.bind(null,n,r,t),[t]),r.getSnapshot!==e||a||Se!==null&&Se.memoizedState.tag&1){if(n.flags|=2048,Qi(9,bp.bind(null,n,r,i,e),void 0,null),ke===null)throw Error(k(349));(er&30)!==0||wp(n,e,i)}return i}function wp(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=fe.updateQueue,e===null?(e={lastEffect:null,stores:null},fe.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function bp(t,e,n,r){e.value=n,e.getSnapshot=r,Sp(e)&&kp(t)}function Ep(t,e,n){return n(function(){Sp(e)&&kp(t)})}function Sp(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!Rt(t,n)}catch{return!0}}function kp(t){var e=tn(t,1);e!==null&&Ct(e,t,1,-1)}function $d(t){var e=Lt();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Ji,lastRenderedState:t},e.queue=t,t=t.dispatch=nv.bind(null,fe,t),[e.memoizedState,t]}function Qi(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=fe.updateQueue,e===null?(e={lastEffect:null,stores:null},fe.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function Tp(){return mt().memoizedState}function ts(t,e,n,r){var i=Lt();fe.flags|=t,i.memoizedState=Qi(1|e,n,void 0,r===void 0?null:r)}function Ks(t,e,n,r){var i=mt();r=r===void 0?null:r;var a=void 0;if(we!==null){var s=we.memoizedState;if(a=s.destroy,r!==null&&ql(r,s.deps)){i.memoizedState=Qi(e,n,a,r);return}}fe.flags|=t,i.memoizedState=Qi(1|e,n,a,r)}function Ad(t,e){return ts(8390656,8,t,e)}function Yl(t,e){return Ks(2048,8,t,e)}function xp(t,e){return Ks(4,2,t,e)}function Op(t,e){return Ks(4,4,t,e)}function Cp(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function Pp(t,e,n){return n=n!=null?n.concat([t]):null,Ks(4,4,Cp.bind(null,e,t),n)}function ec(){}function Rp(t,e){var n=mt();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&ql(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function Ip(t,e){var n=mt();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&ql(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function Np(t,e,n){return(er&21)===0?(t.baseState&&(t.baseState=!1,Qe=!0),t.memoizedState=n):(Rt(n,e)||(n=Dh(),fe.lanes|=n,tr|=n,t.baseState=!0),e)}function ev(t,e){var n=te;te=n!==0&&4>n?n:4,t(!0);var r=zo.transition;zo.transition={};try{t(!1),e()}finally{te=n,zo.transition=r}}function $p(){return mt().memoizedState}function tv(t,e,n){var r=Sn(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},Ap(t))Lp(e,n);else if(n=mp(t,e,n,r),n!==null){var i=Me();Ct(n,t,r,i),jp(n,e,r)}}function nv(t,e,n){var r=Sn(t),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(Ap(t))Lp(e,i);else{var a=t.alternate;if(t.lanes===0&&(a===null||a.lanes===0)&&(a=e.lastRenderedReducer,a!==null))try{var s=e.lastRenderedState,o=a(s,n);if(i.hasEagerState=!0,i.eagerState=o,Rt(o,s)){var u=e.interleaved;u===null?(i.next=i,Zl(e)):(i.next=u.next,u.next=i),e.interleaved=i;return}}catch{}finally{}n=mp(t,e,i,r),n!==null&&(i=Me(),Ct(n,t,r,i),jp(n,e,r))}}function Ap(t){var e=t.alternate;return t===fe||e!==null&&e===fe}function Lp(t,e){Oi=Ss=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function jp(t,e,n){if((n&4194240)!==0){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Il(t,n)}}var ks={readContext:pt,useCallback:Re,useContext:Re,useEffect:Re,useImperativeHandle:Re,useInsertionEffect:Re,useLayoutEffect:Re,useMemo:Re,useReducer:Re,useRef:Re,useState:Re,useDebugValue:Re,useDeferredValue:Re,useTransition:Re,useMutableSource:Re,useSyncExternalStore:Re,useId:Re,unstable_isNewReconciler:!1},rv={readContext:pt,useCallback:function(t,e){return Lt().memoizedState=[t,e===void 0?null:e],t},useContext:pt,useEffect:Ad,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,ts(4194308,4,Cp.bind(null,e,t),n)},useLayoutEffect:function(t,e){return ts(4194308,4,t,e)},useInsertionEffect:function(t,e){return ts(4,2,t,e)},useMemo:function(t,e){var n=Lt();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=Lt();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=tv.bind(null,fe,t),[r.memoizedState,t]},useRef:function(t){var e=Lt();return t={current:t},e.memoizedState=t},useState:$d,useDebugValue:ec,useDeferredValue:function(t){return Lt().memoizedState=t},useTransition:function(){var t=$d(!1),e=t[0];return t=ev.bind(null,t[1]),Lt().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=fe,i=Lt();if(ue){if(n===void 0)throw Error(k(407));n=n()}else{if(n=e(),ke===null)throw Error(k(349));(er&30)!==0||wp(r,e,n)}i.memoizedState=n;var a={value:n,getSnapshot:e};return i.queue=a,Ad(Ep.bind(null,r,a,t),[t]),r.flags|=2048,Qi(9,bp.bind(null,r,a,n,e),void 0,null),n},useId:function(){var t=Lt(),e=ke.identifierPrefix;if(ue){var n=qt,r=Qt;n=(r&~(1<<32-Ot(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=Wi++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=Yy++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},iv={readContext:pt,useCallback:Rp,useContext:pt,useEffect:Yl,useImperativeHandle:Pp,useInsertionEffect:xp,useLayoutEffect:Op,useMemo:Ip,useReducer:Bo,useRef:Tp,useState:function(){return Bo(Ji)},useDebugValue:ec,useDeferredValue:function(t){var e=mt();return Np(e,we.memoizedState,t)},useTransition:function(){var t=Bo(Ji)[0],e=mt().memoizedState;return[t,e]},useMutableSource:vp,useSyncExternalStore:_p,useId:$p,unstable_isNewReconciler:!1},av={readContext:pt,useCallback:Rp,useContext:pt,useEffect:Yl,useImperativeHandle:Pp,useInsertionEffect:xp,useLayoutEffect:Op,useMemo:Ip,useReducer:Ho,useRef:Tp,useState:function(){return Ho(Ji)},useDebugValue:ec,useDeferredValue:function(t){var e=mt();return we===null?e.memoizedState=t:Np(e,we.memoizedState,t)},useTransition:function(){var t=Ho(Ji)[0],e=mt().memoizedState;return[t,e]},useMutableSource:vp,useSyncExternalStore:_p,useId:$p,unstable_isNewReconciler:!1};function Et(t,e){if(t&&t.defaultProps){e=he({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function Ju(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:he({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var Xs={isMounted:function(t){return(t=t._reactInternals)?cr(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=Me(),i=Sn(t),a=Kt(r,i);a.payload=e,n!=null&&(a.callback=n),e=bn(t,a,i),e!==null&&(Ct(e,t,i,r),Ya(e,t,i))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=Me(),i=Sn(t),a=Kt(r,i);a.tag=1,a.payload=e,n!=null&&(a.callback=n),e=bn(t,a,i),e!==null&&(Ct(e,t,i,r),Ya(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=Me(),r=Sn(t),i=Kt(n,r);i.tag=2,e!=null&&(i.callback=e),e=bn(t,i,r),e!==null&&(Ct(e,t,r,n),Ya(e,t,r))}};function Ld(t,e,n,r,i,a,s){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,a,s):e.prototype&&e.prototype.isPureReactComponent?!zi(n,r)||!zi(i,a):!0}function Dp(t,e,n){var r=!1,i=xn,a=e.contextType;return typeof a=="object"&&a!==null?a=pt(a):(i=Ke(e)?Xn:Ae.current,r=e.contextTypes,a=(r=r!=null)?Ur(t,i):xn),e=new e(n,a),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Xs,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=a),e}function jd(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&Xs.enqueueReplaceState(e,e.state,null)}function Qu(t,e,n,r){var i=t.stateNode;i.props=n,i.state=t.memoizedState,i.refs={},Gl(t);var a=e.contextType;typeof a=="object"&&a!==null?i.context=pt(a):(a=Ke(e)?Xn:Ae.current,i.context=Ur(t,a)),i.state=t.memoizedState,a=e.getDerivedStateFromProps,typeof a=="function"&&(Ju(t,e,a,n),i.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&Xs.enqueueReplaceState(i,i.state,null),bs(t,n,i,r),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308)}function Hr(t,e){try{var n="",r=e;do n+=$g(r),r=r.return;while(r);var i=n}catch(a){i=`
Error generating stack: `+a.message+`
`+a.stack}return{value:t,source:e,stack:i,digest:null}}function Vo(t,e,n){return{value:t,source:null,stack:n!=null?n:null,digest:e!=null?e:null}}function qu(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var sv=typeof WeakMap=="function"?WeakMap:Map;function Mp(t,e,n){n=Kt(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){xs||(xs=!0,sl=r),qu(t,e)},n}function Up(t,e,n){n=Kt(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var i=e.value;n.payload=function(){return r(i)},n.callback=function(){qu(t,e)}}var a=t.stateNode;return a!==null&&typeof a.componentDidCatch=="function"&&(n.callback=function(){qu(t,e),typeof r!="function"&&(En===null?En=new Set([this]):En.add(this));var s=e.stack;this.componentDidCatch(e.value,{componentStack:s!==null?s:""})}),n}function Dd(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new sv;var i=new Set;r.set(e,i)}else i=r.get(e),i===void 0&&(i=new Set,r.set(e,i));i.has(n)||(i.add(n),t=wv.bind(null,t,e,n),e.then(t,t))}function Md(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function Ud(t,e,n,r,i){return(t.mode&1)===0?(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=Kt(-1,1),e.tag=2,bn(n,e,1))),n.lanes|=1),t):(t.flags|=65536,t.lanes=i,t)}var ov=an.ReactCurrentOwner,Qe=!1;function De(t,e,n,r){e.child=t===null?pp(e,null,n,r):zr(e,t.child,n,r)}function Fd(t,e,n,r,i){n=n.render;var a=e.ref;return Lr(e,i),r=Kl(t,e,n,r,a,i),n=Xl(),t!==null&&!Qe?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,nn(t,e,i)):(ue&&n&&Ul(e),e.flags|=1,De(t,e,r,i),e.child)}function zd(t,e,n,r,i){if(t===null){var a=n.type;return typeof a=="function"&&!uc(a)&&a.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=a,Fp(t,e,a,r,i)):(t=as(n.type,null,r,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(a=t.child,(t.lanes&i)===0){var s=a.memoizedProps;if(n=n.compare,n=n!==null?n:zi,n(s,r)&&t.ref===e.ref)return nn(t,e,i)}return e.flags|=1,t=kn(a,r),t.ref=e.ref,t.return=e,e.child=t}function Fp(t,e,n,r,i){if(t!==null){var a=t.memoizedProps;if(zi(a,r)&&t.ref===e.ref)if(Qe=!1,e.pendingProps=r=a,(t.lanes&i)!==0)(t.flags&131072)!==0&&(Qe=!0);else return e.lanes=t.lanes,nn(t,e,i)}return Ku(t,e,n,r,i)}function zp(t,e,n){var r=e.pendingProps,i=r.children,a=t!==null?t.memoizedState:null;if(r.mode==="hidden")if((e.mode&1)===0)e.memoizedState={baseLanes:0,cachePool:null,transitions:null},ie(Or,tt),tt|=n;else{if((n&1073741824)===0)return t=a!==null?a.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,ie(Or,tt),tt|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=a!==null?a.baseLanes:n,ie(Or,tt),tt|=r}else a!==null?(r=a.baseLanes|n,e.memoizedState=null):r=n,ie(Or,tt),tt|=r;return De(t,e,i,n),e.child}function Bp(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function Ku(t,e,n,r,i){var a=Ke(n)?Xn:Ae.current;return a=Ur(e,a),Lr(e,i),n=Kl(t,e,n,r,a,i),r=Xl(),t!==null&&!Qe?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,nn(t,e,i)):(ue&&r&&Ul(e),e.flags|=1,De(t,e,n,i),e.child)}function Bd(t,e,n,r,i){if(Ke(n)){var a=!0;gs(e)}else a=!1;if(Lr(e,i),e.stateNode===null)ns(t,e),Dp(e,n,r),Qu(e,n,r,i),r=!0;else if(t===null){var s=e.stateNode,o=e.memoizedProps;s.props=o;var u=s.context,l=n.contextType;typeof l=="object"&&l!==null?l=pt(l):(l=Ke(n)?Xn:Ae.current,l=Ur(e,l));var c=n.getDerivedStateFromProps,d=typeof c=="function"||typeof s.getSnapshotBeforeUpdate=="function";d||typeof s.UNSAFE_componentWillReceiveProps!="function"&&typeof s.componentWillReceiveProps!="function"||(o!==r||u!==l)&&jd(e,s,r,l),dn=!1;var f=e.memoizedState;s.state=f,bs(e,r,s,i),u=e.memoizedState,o!==r||f!==u||qe.current||dn?(typeof c=="function"&&(Ju(e,n,c,r),u=e.memoizedState),(o=dn||Ld(e,n,o,r,f,u,l))?(d||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount()),typeof s.componentDidMount=="function"&&(e.flags|=4194308)):(typeof s.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=u),s.props=r,s.state=u,s.context=l,r=o):(typeof s.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{s=e.stateNode,gp(t,e),o=e.memoizedProps,l=e.type===e.elementType?o:Et(e.type,o),s.props=l,d=e.pendingProps,f=s.context,u=n.contextType,typeof u=="object"&&u!==null?u=pt(u):(u=Ke(n)?Xn:Ae.current,u=Ur(e,u));var h=n.getDerivedStateFromProps;(c=typeof h=="function"||typeof s.getSnapshotBeforeUpdate=="function")||typeof s.UNSAFE_componentWillReceiveProps!="function"&&typeof s.componentWillReceiveProps!="function"||(o!==d||f!==u)&&jd(e,s,r,u),dn=!1,f=e.memoizedState,s.state=f,bs(e,r,s,i);var p=e.memoizedState;o!==d||f!==p||qe.current||dn?(typeof h=="function"&&(Ju(e,n,h,r),p=e.memoizedState),(l=dn||Ld(e,n,l,r,f,p,u)||!1)?(c||typeof s.UNSAFE_componentWillUpdate!="function"&&typeof s.componentWillUpdate!="function"||(typeof s.componentWillUpdate=="function"&&s.componentWillUpdate(r,p,u),typeof s.UNSAFE_componentWillUpdate=="function"&&s.UNSAFE_componentWillUpdate(r,p,u)),typeof s.componentDidUpdate=="function"&&(e.flags|=4),typeof s.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof s.componentDidUpdate!="function"||o===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof s.getSnapshotBeforeUpdate!="function"||o===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=p),s.props=r,s.state=p,s.context=u,r=l):(typeof s.componentDidUpdate!="function"||o===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof s.getSnapshotBeforeUpdate!="function"||o===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),r=!1)}return Xu(t,e,n,r,a,i)}function Xu(t,e,n,r,i,a){Bp(t,e);var s=(e.flags&128)!==0;if(!r&&!s)return i&&Od(e,n,!1),nn(t,e,a);r=e.stateNode,ov.current=e;var o=s&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&s?(e.child=zr(e,t.child,null,a),e.child=zr(e,null,o,a)):De(t,e,o,a),e.memoizedState=r.state,i&&Od(e,n,!0),e.child}function Hp(t){var e=t.stateNode;e.pendingContext?xd(t,e.pendingContext,e.pendingContext!==e.context):e.context&&xd(t,e.context,!1),Wl(t,e.containerInfo)}function Hd(t,e,n,r,i){return Fr(),zl(i),e.flags|=256,De(t,e,n,r),e.child}var Yu={dehydrated:null,treeContext:null,retryLane:0};function el(t){return{baseLanes:t,cachePool:null,transitions:null}}function Vp(t,e,n){var r=e.pendingProps,i=de.current,a=!1,s=(e.flags&128)!==0,o;if((o=s)||(o=t!==null&&t.memoizedState===null?!1:(i&2)!==0),o?(a=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(i|=1),ie(de,i&1),t===null)return Gu(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?((e.mode&1)===0?e.lanes=1:t.data==="$!"?e.lanes=8:e.lanes=1073741824,null):(s=r.children,t=r.fallback,a?(r=e.mode,a=e.child,s={mode:"hidden",children:s},(r&1)===0&&a!==null?(a.childLanes=0,a.pendingProps=s):a=to(s,r,0,null),t=Jn(t,r,n,null),a.return=e,t.return=e,a.sibling=t,e.child=a,e.child.memoizedState=el(n),e.memoizedState=Yu,t):tc(e,s));if(i=t.memoizedState,i!==null&&(o=i.dehydrated,o!==null))return uv(t,e,s,r,o,i,n);if(a){a=r.fallback,s=e.mode,i=t.child,o=i.sibling;var u={mode:"hidden",children:r.children};return(s&1)===0&&e.child!==i?(r=e.child,r.childLanes=0,r.pendingProps=u,e.deletions=null):(r=kn(i,u),r.subtreeFlags=i.subtreeFlags&14680064),o!==null?a=kn(o,a):(a=Jn(a,s,n,null),a.flags|=2),a.return=e,r.return=e,r.sibling=a,e.child=r,r=a,a=e.child,s=t.child.memoizedState,s=s===null?el(n):{baseLanes:s.baseLanes|n,cachePool:null,transitions:s.transitions},a.memoizedState=s,a.childLanes=t.childLanes&~n,e.memoizedState=Yu,r}return a=t.child,t=a.sibling,r=kn(a,{mode:"visible",children:r.children}),(e.mode&1)===0&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function tc(t,e){return e=to({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Da(t,e,n,r){return r!==null&&zl(r),zr(e,t.child,null,n),t=tc(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function uv(t,e,n,r,i,a,s){if(n)return e.flags&256?(e.flags&=-257,r=Vo(Error(k(422))),Da(t,e,s,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(a=r.fallback,i=e.mode,r=to({mode:"visible",children:r.children},i,0,null),a=Jn(a,i,s,null),a.flags|=2,r.return=e,a.return=e,r.sibling=a,e.child=r,(e.mode&1)!==0&&zr(e,t.child,null,s),e.child.memoizedState=el(s),e.memoizedState=Yu,a);if((e.mode&1)===0)return Da(t,e,s,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var o=r.dgst;return r=o,a=Error(k(419)),r=Vo(a,r,void 0),Da(t,e,s,r)}if(o=(s&t.childLanes)!==0,Qe||o){if(r=ke,r!==null){switch(s&-s){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=(i&(r.suspendedLanes|s))!==0?0:i,i!==0&&i!==a.retryLane&&(a.retryLane=i,tn(t,i),Ct(r,t,i,-1))}return oc(),r=Vo(Error(k(421))),Da(t,e,s,r)}return i.data==="$?"?(e.flags|=128,e.child=t.child,e=bv.bind(null,t),i._reactRetry=e,null):(t=a.treeContext,rt=wn(i.nextSibling),it=e,ue=!0,kt=null,t!==null&&(ct[dt++]=Qt,ct[dt++]=qt,ct[dt++]=Yn,Qt=t.id,qt=t.overflow,Yn=e),e=tc(e,r.children),e.flags|=4096,e)}function Vd(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),Wu(t.return,e,n)}function Zo(t,e,n,r,i){var a=t.memoizedState;a===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(a.isBackwards=e,a.rendering=null,a.renderingStartTime=0,a.last=r,a.tail=n,a.tailMode=i)}function Zp(t,e,n){var r=e.pendingProps,i=r.revealOrder,a=r.tail;if(De(t,e,r.children,n),r=de.current,(r&2)!==0)r=r&1|2,e.flags|=128;else{if(t!==null&&(t.flags&128)!==0)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Vd(t,n,e);else if(t.tag===19)Vd(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(ie(de,r),(e.mode&1)===0)e.memoizedState=null;else switch(i){case"forwards":for(n=e.child,i=null;n!==null;)t=n.alternate,t!==null&&Es(t)===null&&(i=n),n=n.sibling;n=i,n===null?(i=e.child,e.child=null):(i=n.sibling,n.sibling=null),Zo(e,!1,i,n,a);break;case"backwards":for(n=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&Es(t)===null){e.child=i;break}t=i.sibling,i.sibling=n,n=i,i=t}Zo(e,!0,n,null,a);break;case"together":Zo(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function ns(t,e){(e.mode&1)===0&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function nn(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),tr|=e.lanes,(n&e.childLanes)===0)return null;if(t!==null&&e.child!==t.child)throw Error(k(153));if(e.child!==null){for(t=e.child,n=kn(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=kn(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function lv(t,e,n){switch(e.tag){case 3:Hp(e),Fr();break;case 5:yp(e);break;case 1:Ke(e.type)&&gs(e);break;case 4:Wl(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,i=e.memoizedProps.value;ie(_s,r._currentValue),r._currentValue=i;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(ie(de,de.current&1),e.flags|=128,null):(n&e.child.childLanes)!==0?Vp(t,e,n):(ie(de,de.current&1),t=nn(t,e,n),t!==null?t.sibling:null);ie(de,de.current&1);break;case 19:if(r=(n&e.childLanes)!==0,(t.flags&128)!==0){if(r)return Zp(t,e,n);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),ie(de,de.current),r)break;return null;case 22:case 23:return e.lanes=0,zp(t,e,n)}return nn(t,e,n)}var Gp,tl,Wp,Jp;Gp=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};tl=function(){};Wp=function(t,e,n,r){var i=t.memoizedProps;if(i!==r){t=e.stateNode,Hn(Mt.current);var a=null;switch(n){case"input":i=Su(t,i),r=Su(t,r),a=[];break;case"select":i=he({},i,{value:void 0}),r=he({},r,{value:void 0}),a=[];break;case"textarea":i=xu(t,i),r=xu(t,r),a=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=ps)}Cu(n,r);var s;n=null;for(l in i)if(!r.hasOwnProperty(l)&&i.hasOwnProperty(l)&&i[l]!=null)if(l==="style"){var o=i[l];for(s in o)o.hasOwnProperty(s)&&(n||(n={}),n[s]="")}else l!=="dangerouslySetInnerHTML"&&l!=="children"&&l!=="suppressContentEditableWarning"&&l!=="suppressHydrationWarning"&&l!=="autoFocus"&&(Ai.hasOwnProperty(l)?a||(a=[]):(a=a||[]).push(l,null));for(l in r){var u=r[l];if(o=i!=null?i[l]:void 0,r.hasOwnProperty(l)&&u!==o&&(u!=null||o!=null))if(l==="style")if(o){for(s in o)!o.hasOwnProperty(s)||u&&u.hasOwnProperty(s)||(n||(n={}),n[s]="");for(s in u)u.hasOwnProperty(s)&&o[s]!==u[s]&&(n||(n={}),n[s]=u[s])}else n||(a||(a=[]),a.push(l,n)),n=u;else l==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,o=o?o.__html:void 0,u!=null&&o!==u&&(a=a||[]).push(l,u)):l==="children"?typeof u!="string"&&typeof u!="number"||(a=a||[]).push(l,""+u):l!=="suppressContentEditableWarning"&&l!=="suppressHydrationWarning"&&(Ai.hasOwnProperty(l)?(u!=null&&l==="onScroll"&&ae("scroll",t),a||o===u||(a=[])):(a=a||[]).push(l,u))}n&&(a=a||[]).push("style",n);var l=a;(e.updateQueue=l)&&(e.flags|=4)}};Jp=function(t,e,n,r){n!==r&&(e.flags|=4)};function ci(t,e){if(!ue)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function Ie(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function cv(t,e,n){var r=e.pendingProps;switch(Fl(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ie(e),null;case 1:return Ke(e.type)&&ms(),Ie(e),null;case 3:return r=e.stateNode,Br(),se(qe),se(Ae),Ql(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(La(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&(e.flags&256)===0||(e.flags|=1024,kt!==null&&(ll(kt),kt=null))),tl(t,e),Ie(e),null;case 5:Jl(e);var i=Hn(Gi.current);if(n=e.type,t!==null&&e.stateNode!=null)Wp(t,e,n,r,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(k(166));return Ie(e),null}if(t=Hn(Mt.current),La(e)){r=e.stateNode,n=e.type;var a=e.memoizedProps;switch(r[jt]=e,r[Vi]=a,t=(e.mode&1)!==0,n){case"dialog":ae("cancel",r),ae("close",r);break;case"iframe":case"object":case"embed":ae("load",r);break;case"video":case"audio":for(i=0;i<_i.length;i++)ae(_i[i],r);break;case"source":ae("error",r);break;case"img":case"image":case"link":ae("error",r),ae("load",r);break;case"details":ae("toggle",r);break;case"input":Yc(r,a),ae("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!a.multiple},ae("invalid",r);break;case"textarea":td(r,a),ae("invalid",r)}Cu(n,a),i=null;for(var s in a)if(a.hasOwnProperty(s)){var o=a[s];s==="children"?typeof o=="string"?r.textContent!==o&&(a.suppressHydrationWarning!==!0&&Aa(r.textContent,o,t),i=["children",o]):typeof o=="number"&&r.textContent!==""+o&&(a.suppressHydrationWarning!==!0&&Aa(r.textContent,o,t),i=["children",""+o]):Ai.hasOwnProperty(s)&&o!=null&&s==="onScroll"&&ae("scroll",r)}switch(n){case"input":xa(r),ed(r,a,!0);break;case"textarea":xa(r),nd(r);break;case"select":case"option":break;default:typeof a.onClick=="function"&&(r.onclick=ps)}r=i,e.updateQueue=r,r!==null&&(e.flags|=4)}else{s=i.nodeType===9?i:i.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=Eh(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=s.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=s.createElement(n,{is:r.is}):(t=s.createElement(n),n==="select"&&(s=t,r.multiple?s.multiple=!0:r.size&&(s.size=r.size))):t=s.createElementNS(t,n),t[jt]=e,t[Vi]=r,Gp(t,e,!1,!1),e.stateNode=t;e:{switch(s=Pu(n,r),n){case"dialog":ae("cancel",t),ae("close",t),i=r;break;case"iframe":case"object":case"embed":ae("load",t),i=r;break;case"video":case"audio":for(i=0;i<_i.length;i++)ae(_i[i],t);i=r;break;case"source":ae("error",t),i=r;break;case"img":case"image":case"link":ae("error",t),ae("load",t),i=r;break;case"details":ae("toggle",t),i=r;break;case"input":Yc(t,r),i=Su(t,r),ae("invalid",t);break;case"option":i=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},i=he({},r,{value:void 0}),ae("invalid",t);break;case"textarea":td(t,r),i=xu(t,r),ae("invalid",t);break;default:i=r}Cu(n,i),o=i;for(a in o)if(o.hasOwnProperty(a)){var u=o[a];a==="style"?Th(t,u):a==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,u!=null&&Sh(t,u)):a==="children"?typeof u=="string"?(n!=="textarea"||u!=="")&&Li(t,u):typeof u=="number"&&Li(t,""+u):a!=="suppressContentEditableWarning"&&a!=="suppressHydrationWarning"&&a!=="autoFocus"&&(Ai.hasOwnProperty(a)?u!=null&&a==="onScroll"&&ae("scroll",t):u!=null&&Tl(t,a,u,s))}switch(n){case"input":xa(t),ed(t,r,!1);break;case"textarea":xa(t),nd(t);break;case"option":r.value!=null&&t.setAttribute("value",""+Tn(r.value));break;case"select":t.multiple=!!r.multiple,a=r.value,a!=null?Ir(t,!!r.multiple,a,!1):r.defaultValue!=null&&Ir(t,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(t.onclick=ps)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Ie(e),null;case 6:if(t&&e.stateNode!=null)Jp(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(k(166));if(n=Hn(Gi.current),Hn(Mt.current),La(e)){if(r=e.stateNode,n=e.memoizedProps,r[jt]=e,(a=r.nodeValue!==n)&&(t=it,t!==null))switch(t.tag){case 3:Aa(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Aa(r.nodeValue,n,(t.mode&1)!==0)}a&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[jt]=e,e.stateNode=r}return Ie(e),null;case 13:if(se(de),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(ue&&rt!==null&&(e.mode&1)!==0&&(e.flags&128)===0)fp(),Fr(),e.flags|=98560,a=!1;else if(a=La(e),r!==null&&r.dehydrated!==null){if(t===null){if(!a)throw Error(k(318));if(a=e.memoizedState,a=a!==null?a.dehydrated:null,!a)throw Error(k(317));a[jt]=e}else Fr(),(e.flags&128)===0&&(e.memoizedState=null),e.flags|=4;Ie(e),a=!1}else kt!==null&&(ll(kt),kt=null),a=!0;if(!a)return e.flags&65536?e:null}return(e.flags&128)!==0?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,(e.mode&1)!==0&&(t===null||(de.current&1)!==0?Ee===0&&(Ee=3):oc())),e.updateQueue!==null&&(e.flags|=4),Ie(e),null);case 4:return Br(),tl(t,e),t===null&&Bi(e.stateNode.containerInfo),Ie(e),null;case 10:return Vl(e.type._context),Ie(e),null;case 17:return Ke(e.type)&&ms(),Ie(e),null;case 19:if(se(de),a=e.memoizedState,a===null)return Ie(e),null;if(r=(e.flags&128)!==0,s=a.rendering,s===null)if(r)ci(a,!1);else{if(Ee!==0||t!==null&&(t.flags&128)!==0)for(t=e.child;t!==null;){if(s=Es(t),s!==null){for(e.flags|=128,ci(a,!1),r=s.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)a=n,t=r,a.flags&=14680066,s=a.alternate,s===null?(a.childLanes=0,a.lanes=t,a.child=null,a.subtreeFlags=0,a.memoizedProps=null,a.memoizedState=null,a.updateQueue=null,a.dependencies=null,a.stateNode=null):(a.childLanes=s.childLanes,a.lanes=s.lanes,a.child=s.child,a.subtreeFlags=0,a.deletions=null,a.memoizedProps=s.memoizedProps,a.memoizedState=s.memoizedState,a.updateQueue=s.updateQueue,a.type=s.type,t=s.dependencies,a.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return ie(de,de.current&1|2),e.child}t=t.sibling}a.tail!==null&&ge()>Vr&&(e.flags|=128,r=!0,ci(a,!1),e.lanes=4194304)}else{if(!r)if(t=Es(s),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),ci(a,!0),a.tail===null&&a.tailMode==="hidden"&&!s.alternate&&!ue)return Ie(e),null}else 2*ge()-a.renderingStartTime>Vr&&n!==1073741824&&(e.flags|=128,r=!0,ci(a,!1),e.lanes=4194304);a.isBackwards?(s.sibling=e.child,e.child=s):(n=a.last,n!==null?n.sibling=s:e.child=s,a.last=s)}return a.tail!==null?(e=a.tail,a.rendering=e,a.tail=e.sibling,a.renderingStartTime=ge(),e.sibling=null,n=de.current,ie(de,r?n&1|2:n&1),e):(Ie(e),null);case 22:case 23:return sc(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&(e.mode&1)!==0?(tt&1073741824)!==0&&(Ie(e),e.subtreeFlags&6&&(e.flags|=8192)):Ie(e),null;case 24:return null;case 25:return null}throw Error(k(156,e.tag))}function dv(t,e){switch(Fl(e),e.tag){case 1:return Ke(e.type)&&ms(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Br(),se(qe),se(Ae),Ql(),t=e.flags,(t&65536)!==0&&(t&128)===0?(e.flags=t&-65537|128,e):null;case 5:return Jl(e),null;case 13:if(se(de),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(k(340));Fr()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return se(de),null;case 4:return Br(),null;case 10:return Vl(e.type._context),null;case 22:case 23:return sc(),null;case 24:return null;default:return null}}var Ma=!1,Ne=!1,fv=typeof WeakSet=="function"?WeakSet:Set,L=null;function xr(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){me(t,e,r)}else n.current=null}function nl(t,e,n){try{n()}catch(r){me(t,e,r)}}var Zd=!1;function hv(t,e){if(Uu=ds,t=Yh(),Ml(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,a=r.focusNode;r=r.focusOffset;try{n.nodeType,a.nodeType}catch{n=null;break e}var s=0,o=-1,u=-1,l=0,c=0,d=t,f=null;t:for(;;){for(var h;d!==n||i!==0&&d.nodeType!==3||(o=s+i),d!==a||r!==0&&d.nodeType!==3||(u=s+r),d.nodeType===3&&(s+=d.nodeValue.length),(h=d.firstChild)!==null;)f=d,d=h;for(;;){if(d===t)break t;if(f===n&&++l===i&&(o=s),f===a&&++c===r&&(u=s),(h=d.nextSibling)!==null)break;d=f,f=d.parentNode}d=h}n=o===-1||u===-1?null:{start:o,end:u}}else n=null}n=n||{start:0,end:0}}else n=null;for(Fu={focusedElem:t,selectionRange:n},ds=!1,L=e;L!==null;)if(e=L,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,L=t;else for(;L!==null;){e=L;try{var p=e.alternate;if((e.flags&1024)!==0)switch(e.tag){case 0:case 11:case 15:break;case 1:if(p!==null){var v=p.memoizedProps,_=p.memoizedState,m=e.stateNode,g=m.getSnapshotBeforeUpdate(e.elementType===e.type?v:Et(e.type,v),_);m.__reactInternalSnapshotBeforeUpdate=g}break;case 3:var y=e.stateNode.containerInfo;y.nodeType===1?y.textContent="":y.nodeType===9&&y.documentElement&&y.removeChild(y.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(k(163))}}catch(w){me(e,e.return,w)}if(t=e.sibling,t!==null){t.return=e.return,L=t;break}L=e.return}return p=Zd,Zd=!1,p}function Ci(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&t)===t){var a=i.destroy;i.destroy=void 0,a!==void 0&&nl(e,n,a)}i=i.next}while(i!==r)}}function Ys(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function rl(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function Qp(t){var e=t.alternate;e!==null&&(t.alternate=null,Qp(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[jt],delete e[Vi],delete e[Hu],delete e[Qy],delete e[qy])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function qp(t){return t.tag===5||t.tag===3||t.tag===4}function Gd(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||qp(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function il(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=ps));else if(r!==4&&(t=t.child,t!==null))for(il(t,e,n),t=t.sibling;t!==null;)il(t,e,n),t=t.sibling}function al(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(al(t,e,n),t=t.sibling;t!==null;)al(t,e,n),t=t.sibling}var xe=null,St=!1;function sn(t,e,n){for(n=n.child;n!==null;)Kp(t,e,n),n=n.sibling}function Kp(t,e,n){if(Dt&&typeof Dt.onCommitFiberUnmount=="function")try{Dt.onCommitFiberUnmount(Zs,n)}catch{}switch(n.tag){case 5:Ne||xr(n,e);case 6:var r=xe,i=St;xe=null,sn(t,e,n),xe=r,St=i,xe!==null&&(St?(t=xe,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):xe.removeChild(n.stateNode));break;case 18:xe!==null&&(St?(t=xe,n=n.stateNode,t.nodeType===8?Mo(t.parentNode,n):t.nodeType===1&&Mo(t,n),Ui(t)):Mo(xe,n.stateNode));break;case 4:r=xe,i=St,xe=n.stateNode.containerInfo,St=!0,sn(t,e,n),xe=r,St=i;break;case 0:case 11:case 14:case 15:if(!Ne&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var a=i,s=a.destroy;a=a.tag,s!==void 0&&((a&2)!==0||(a&4)!==0)&&nl(n,e,s),i=i.next}while(i!==r)}sn(t,e,n);break;case 1:if(!Ne&&(xr(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(o){me(n,e,o)}sn(t,e,n);break;case 21:sn(t,e,n);break;case 22:n.mode&1?(Ne=(r=Ne)||n.memoizedState!==null,sn(t,e,n),Ne=r):sn(t,e,n);break;default:sn(t,e,n)}}function Wd(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new fv),e.forEach(function(r){var i=Ev.bind(null,t,r);n.has(r)||(n.add(r),r.then(i,i))})}}function vt(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var a=t,s=e,o=s;e:for(;o!==null;){switch(o.tag){case 5:xe=o.stateNode,St=!1;break e;case 3:xe=o.stateNode.containerInfo,St=!0;break e;case 4:xe=o.stateNode.containerInfo,St=!0;break e}o=o.return}if(xe===null)throw Error(k(160));Kp(a,s,i),xe=null,St=!1;var u=i.alternate;u!==null&&(u.return=null),i.return=null}catch(l){me(i,e,l)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)Xp(e,t),e=e.sibling}function Xp(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(vt(e,t),At(t),r&4){try{Ci(3,t,t.return),Ys(3,t)}catch(v){me(t,t.return,v)}try{Ci(5,t,t.return)}catch(v){me(t,t.return,v)}}break;case 1:vt(e,t),At(t),r&512&&n!==null&&xr(n,n.return);break;case 5:if(vt(e,t),At(t),r&512&&n!==null&&xr(n,n.return),t.flags&32){var i=t.stateNode;try{Li(i,"")}catch(v){me(t,t.return,v)}}if(r&4&&(i=t.stateNode,i!=null)){var a=t.memoizedProps,s=n!==null?n.memoizedProps:a,o=t.type,u=t.updateQueue;if(t.updateQueue=null,u!==null)try{o==="input"&&a.type==="radio"&&a.name!=null&&wh(i,a),Pu(o,s);var l=Pu(o,a);for(s=0;s<u.length;s+=2){var c=u[s],d=u[s+1];c==="style"?Th(i,d):c==="dangerouslySetInnerHTML"?Sh(i,d):c==="children"?Li(i,d):Tl(i,c,d,l)}switch(o){case"input":ku(i,a);break;case"textarea":bh(i,a);break;case"select":var f=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!a.multiple;var h=a.value;h!=null?Ir(i,!!a.multiple,h,!1):f!==!!a.multiple&&(a.defaultValue!=null?Ir(i,!!a.multiple,a.defaultValue,!0):Ir(i,!!a.multiple,a.multiple?[]:"",!1))}i[Vi]=a}catch(v){me(t,t.return,v)}}break;case 6:if(vt(e,t),At(t),r&4){if(t.stateNode===null)throw Error(k(162));i=t.stateNode,a=t.memoizedProps;try{i.nodeValue=a}catch(v){me(t,t.return,v)}}break;case 3:if(vt(e,t),At(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Ui(e.containerInfo)}catch(v){me(t,t.return,v)}break;case 4:vt(e,t),At(t);break;case 13:vt(e,t),At(t),i=t.child,i.flags&8192&&(a=i.memoizedState!==null,i.stateNode.isHidden=a,!a||i.alternate!==null&&i.alternate.memoizedState!==null||(ic=ge())),r&4&&Wd(t);break;case 22:if(c=n!==null&&n.memoizedState!==null,t.mode&1?(Ne=(l=Ne)||c,vt(e,t),Ne=l):vt(e,t),At(t),r&8192){if(l=t.memoizedState!==null,(t.stateNode.isHidden=l)&&!c&&(t.mode&1)!==0)for(L=t,c=t.child;c!==null;){for(d=L=c;L!==null;){switch(f=L,h=f.child,f.tag){case 0:case 11:case 14:case 15:Ci(4,f,f.return);break;case 1:xr(f,f.return);var p=f.stateNode;if(typeof p.componentWillUnmount=="function"){r=f,n=f.return;try{e=r,p.props=e.memoizedProps,p.state=e.memoizedState,p.componentWillUnmount()}catch(v){me(r,n,v)}}break;case 5:xr(f,f.return);break;case 22:if(f.memoizedState!==null){Qd(d);continue}}h!==null?(h.return=f,L=h):Qd(d)}c=c.sibling}e:for(c=null,d=t;;){if(d.tag===5){if(c===null){c=d;try{i=d.stateNode,l?(a=i.style,typeof a.setProperty=="function"?a.setProperty("display","none","important"):a.display="none"):(o=d.stateNode,u=d.memoizedProps.style,s=u!=null&&u.hasOwnProperty("display")?u.display:null,o.style.display=kh("display",s))}catch(v){me(t,t.return,v)}}}else if(d.tag===6){if(c===null)try{d.stateNode.nodeValue=l?"":d.memoizedProps}catch(v){me(t,t.return,v)}}else if((d.tag!==22&&d.tag!==23||d.memoizedState===null||d===t)&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===t)break e;for(;d.sibling===null;){if(d.return===null||d.return===t)break e;c===d&&(c=null),d=d.return}c===d&&(c=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:vt(e,t),At(t),r&4&&Wd(t);break;case 21:break;default:vt(e,t),At(t)}}function At(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(qp(n)){var r=n;break e}n=n.return}throw Error(k(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(Li(i,""),r.flags&=-33);var a=Gd(t);al(t,a,i);break;case 3:case 4:var s=r.stateNode.containerInfo,o=Gd(t);il(t,o,s);break;default:throw Error(k(161))}}catch(u){me(t,t.return,u)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function pv(t,e,n){L=t,Yp(t)}function Yp(t,e,n){for(var r=(t.mode&1)!==0;L!==null;){var i=L,a=i.child;if(i.tag===22&&r){var s=i.memoizedState!==null||Ma;if(!s){var o=i.alternate,u=o!==null&&o.memoizedState!==null||Ne;o=Ma;var l=Ne;if(Ma=s,(Ne=u)&&!l)for(L=i;L!==null;)s=L,u=s.child,s.tag===22&&s.memoizedState!==null?qd(i):u!==null?(u.return=s,L=u):qd(i);for(;a!==null;)L=a,Yp(a),a=a.sibling;L=i,Ma=o,Ne=l}Jd(t)}else(i.subtreeFlags&8772)!==0&&a!==null?(a.return=i,L=a):Jd(t)}}function Jd(t){for(;L!==null;){var e=L;if((e.flags&8772)!==0){var n=e.alternate;try{if((e.flags&8772)!==0)switch(e.tag){case 0:case 11:case 15:Ne||Ys(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!Ne)if(n===null)r.componentDidMount();else{var i=e.elementType===e.type?n.memoizedProps:Et(e.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var a=e.updateQueue;a!==null&&Nd(e,a,r);break;case 3:var s=e.updateQueue;if(s!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}Nd(e,s,n)}break;case 5:var o=e.stateNode;if(n===null&&e.flags&4){n=o;var u=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":u.autoFocus&&n.focus();break;case"img":u.src&&(n.src=u.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var l=e.alternate;if(l!==null){var c=l.memoizedState;if(c!==null){var d=c.dehydrated;d!==null&&Ui(d)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(k(163))}Ne||e.flags&512&&rl(e)}catch(f){me(e,e.return,f)}}if(e===t){L=null;break}if(n=e.sibling,n!==null){n.return=e.return,L=n;break}L=e.return}}function Qd(t){for(;L!==null;){var e=L;if(e===t){L=null;break}var n=e.sibling;if(n!==null){n.return=e.return,L=n;break}L=e.return}}function qd(t){for(;L!==null;){var e=L;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{Ys(4,e)}catch(u){me(e,n,u)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var i=e.return;try{r.componentDidMount()}catch(u){me(e,i,u)}}var a=e.return;try{rl(e)}catch(u){me(e,a,u)}break;case 5:var s=e.return;try{rl(e)}catch(u){me(e,s,u)}}}catch(u){me(e,e.return,u)}if(e===t){L=null;break}var o=e.sibling;if(o!==null){o.return=e.return,L=o;break}L=e.return}}var mv=Math.ceil,Ts=an.ReactCurrentDispatcher,nc=an.ReactCurrentOwner,ht=an.ReactCurrentBatchConfig,K=0,ke=null,ve=null,Oe=0,tt=0,Or=An(0),Ee=0,qi=null,tr=0,eo=0,rc=0,Pi=null,Je=null,ic=0,Vr=1/0,Gt=null,xs=!1,sl=null,En=null,Ua=!1,gn=null,Os=0,Ri=0,ol=null,rs=-1,is=0;function Me(){return(K&6)!==0?ge():rs!==-1?rs:rs=ge()}function Sn(t){return(t.mode&1)===0?1:(K&2)!==0&&Oe!==0?Oe&-Oe:Xy.transition!==null?(is===0&&(is=Dh()),is):(t=te,t!==0||(t=window.event,t=t===void 0?16:Vh(t.type)),t)}function Ct(t,e,n,r){if(50<Ri)throw Ri=0,ol=null,Error(k(185));ma(t,n,r),((K&2)===0||t!==ke)&&(t===ke&&((K&2)===0&&(eo|=n),Ee===4&&hn(t,Oe)),Xe(t,r),n===1&&K===0&&(e.mode&1)===0&&(Vr=ge()+500,qs&&Ln()))}function Xe(t,e){var n=t.callbackNode;Xg(t,e);var r=cs(t,t===ke?Oe:0);if(r===0)n!==null&&ad(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&ad(n),e===1)t.tag===0?Ky(Kd.bind(null,t)):lp(Kd.bind(null,t)),Wy(function(){(K&6)===0&&Ln()}),n=null;else{switch(Mh(r)){case 1:n=Rl;break;case 4:n=Lh;break;case 16:n=ls;break;case 536870912:n=jh;break;default:n=ls}n=om(n,em.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function em(t,e){if(rs=-1,is=0,(K&6)!==0)throw Error(k(327));var n=t.callbackNode;if(jr()&&t.callbackNode!==n)return null;var r=cs(t,t===ke?Oe:0);if(r===0)return null;if((r&30)!==0||(r&t.expiredLanes)!==0||e)e=Cs(t,r);else{e=r;var i=K;K|=2;var a=nm();(ke!==t||Oe!==e)&&(Gt=null,Vr=ge()+500,Wn(t,e));do try{vv();break}catch(o){tm(t,o)}while(1);Hl(),Ts.current=a,K=i,ve!==null?e=0:(ke=null,Oe=0,e=Ee)}if(e!==0){if(e===2&&(i=Au(t),i!==0&&(r=i,e=ul(t,i))),e===1)throw n=qi,Wn(t,0),hn(t,r),Xe(t,ge()),n;if(e===6)hn(t,r);else{if(i=t.current.alternate,(r&30)===0&&!gv(i)&&(e=Cs(t,r),e===2&&(a=Au(t),a!==0&&(r=a,e=ul(t,a))),e===1))throw n=qi,Wn(t,0),hn(t,r),Xe(t,ge()),n;switch(t.finishedWork=i,t.finishedLanes=r,e){case 0:case 1:throw Error(k(345));case 2:Un(t,Je,Gt);break;case 3:if(hn(t,r),(r&130023424)===r&&(e=ic+500-ge(),10<e)){if(cs(t,0)!==0)break;if(i=t.suspendedLanes,(i&r)!==r){Me(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=Bu(Un.bind(null,t,Je,Gt),e);break}Un(t,Je,Gt);break;case 4:if(hn(t,r),(r&4194240)===r)break;for(e=t.eventTimes,i=-1;0<r;){var s=31-Ot(r);a=1<<s,s=e[s],s>i&&(i=s),r&=~a}if(r=i,r=ge()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*mv(r/1960))-r,10<r){t.timeoutHandle=Bu(Un.bind(null,t,Je,Gt),r);break}Un(t,Je,Gt);break;case 5:Un(t,Je,Gt);break;default:throw Error(k(329))}}}return Xe(t,ge()),t.callbackNode===n?em.bind(null,t):null}function ul(t,e){var n=Pi;return t.current.memoizedState.isDehydrated&&(Wn(t,e).flags|=256),t=Cs(t,e),t!==2&&(e=Je,Je=n,e!==null&&ll(e)),t}function ll(t){Je===null?Je=t:Je.push.apply(Je,t)}function gv(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],a=i.getSnapshot;i=i.value;try{if(!Rt(a(),i))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function hn(t,e){for(e&=~rc,e&=~eo,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-Ot(e),r=1<<n;t[n]=-1,e&=~r}}function Kd(t){if((K&6)!==0)throw Error(k(327));jr();var e=cs(t,0);if((e&1)===0)return Xe(t,ge()),null;var n=Cs(t,e);if(t.tag!==0&&n===2){var r=Au(t);r!==0&&(e=r,n=ul(t,r))}if(n===1)throw n=qi,Wn(t,0),hn(t,e),Xe(t,ge()),n;if(n===6)throw Error(k(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Un(t,Je,Gt),Xe(t,ge()),null}function ac(t,e){var n=K;K|=1;try{return t(e)}finally{K=n,K===0&&(Vr=ge()+500,qs&&Ln())}}function nr(t){gn!==null&&gn.tag===0&&(K&6)===0&&jr();var e=K;K|=1;var n=ht.transition,r=te;try{if(ht.transition=null,te=1,t)return t()}finally{te=r,ht.transition=n,K=e,(K&6)===0&&Ln()}}function sc(){tt=Or.current,se(Or)}function Wn(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,Gy(n)),ve!==null)for(n=ve.return;n!==null;){var r=n;switch(Fl(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&ms();break;case 3:Br(),se(qe),se(Ae),Ql();break;case 5:Jl(r);break;case 4:Br();break;case 13:se(de);break;case 19:se(de);break;case 10:Vl(r.type._context);break;case 22:case 23:sc()}n=n.return}if(ke=t,ve=t=kn(t.current,null),Oe=tt=e,Ee=0,qi=null,rc=eo=tr=0,Je=Pi=null,Bn!==null){for(e=0;e<Bn.length;e++)if(n=Bn[e],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,a=n.pending;if(a!==null){var s=a.next;a.next=i,r.next=s}n.pending=r}Bn=null}return t}function tm(t,e){do{var n=ve;try{if(Hl(),es.current=ks,Ss){for(var r=fe.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}Ss=!1}if(er=0,Se=we=fe=null,Oi=!1,Wi=0,nc.current=null,n===null||n.return===null){Ee=1,qi=e,ve=null;break}e:{var a=t,s=n.return,o=n,u=e;if(e=Oe,o.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){var l=u,c=o,d=c.tag;if((c.mode&1)===0&&(d===0||d===11||d===15)){var f=c.alternate;f?(c.updateQueue=f.updateQueue,c.memoizedState=f.memoizedState,c.lanes=f.lanes):(c.updateQueue=null,c.memoizedState=null)}var h=Md(s);if(h!==null){h.flags&=-257,Ud(h,s,o,a,e),h.mode&1&&Dd(a,l,e),e=h,u=l;var p=e.updateQueue;if(p===null){var v=new Set;v.add(u),e.updateQueue=v}else p.add(u);break e}else{if((e&1)===0){Dd(a,l,e),oc();break e}u=Error(k(426))}}else if(ue&&o.mode&1){var _=Md(s);if(_!==null){(_.flags&65536)===0&&(_.flags|=256),Ud(_,s,o,a,e),zl(Hr(u,o));break e}}a=u=Hr(u,o),Ee!==4&&(Ee=2),Pi===null?Pi=[a]:Pi.push(a),a=s;do{switch(a.tag){case 3:a.flags|=65536,e&=-e,a.lanes|=e;var m=Mp(a,u,e);Id(a,m);break e;case 1:o=u;var g=a.type,y=a.stateNode;if((a.flags&128)===0&&(typeof g.getDerivedStateFromError=="function"||y!==null&&typeof y.componentDidCatch=="function"&&(En===null||!En.has(y)))){a.flags|=65536,e&=-e,a.lanes|=e;var w=Up(a,o,e);Id(a,w);break e}}a=a.return}while(a!==null)}im(n)}catch(E){e=E,ve===n&&n!==null&&(ve=n=n.return);continue}break}while(1)}function nm(){var t=Ts.current;return Ts.current=ks,t===null?ks:t}function oc(){(Ee===0||Ee===3||Ee===2)&&(Ee=4),ke===null||(tr&268435455)===0&&(eo&268435455)===0||hn(ke,Oe)}function Cs(t,e){var n=K;K|=2;var r=nm();(ke!==t||Oe!==e)&&(Gt=null,Wn(t,e));do try{yv();break}catch(i){tm(t,i)}while(1);if(Hl(),K=n,Ts.current=r,ve!==null)throw Error(k(261));return ke=null,Oe=0,Ee}function yv(){for(;ve!==null;)rm(ve)}function vv(){for(;ve!==null&&!Hg();)rm(ve)}function rm(t){var e=sm(t.alternate,t,tt);t.memoizedProps=t.pendingProps,e===null?im(t):ve=e,nc.current=null}function im(t){var e=t;do{var n=e.alternate;if(t=e.return,(e.flags&32768)===0){if(n=cv(n,e,tt),n!==null){ve=n;return}}else{if(n=dv(n,e),n!==null){n.flags&=32767,ve=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Ee=6,ve=null;return}}if(e=e.sibling,e!==null){ve=e;return}ve=e=t}while(e!==null);Ee===0&&(Ee=5)}function Un(t,e,n){var r=te,i=ht.transition;try{ht.transition=null,te=1,_v(t,e,n,r)}finally{ht.transition=i,te=r}return null}function _v(t,e,n,r){do jr();while(gn!==null);if((K&6)!==0)throw Error(k(327));n=t.finishedWork;var i=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(k(177));t.callbackNode=null,t.callbackPriority=0;var a=n.lanes|n.childLanes;if(Yg(t,a),t===ke&&(ve=ke=null,Oe=0),(n.subtreeFlags&2064)===0&&(n.flags&2064)===0||Ua||(Ua=!0,om(ls,function(){return jr(),null})),a=(n.flags&15990)!==0,(n.subtreeFlags&15990)!==0||a){a=ht.transition,ht.transition=null;var s=te;te=1;var o=K;K|=4,nc.current=null,hv(t,n),Xp(n,t),Uy(Fu),ds=!!Uu,Fu=Uu=null,t.current=n,pv(n),Vg(),K=o,te=s,ht.transition=a}else t.current=n;if(Ua&&(Ua=!1,gn=t,Os=i),a=t.pendingLanes,a===0&&(En=null),Wg(n.stateNode),Xe(t,ge()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)i=e[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(xs)throw xs=!1,t=sl,sl=null,t;return(Os&1)!==0&&t.tag!==0&&jr(),a=t.pendingLanes,(a&1)!==0?t===ol?Ri++:(Ri=0,ol=t):Ri=0,Ln(),null}function jr(){if(gn!==null){var t=Mh(Os),e=ht.transition,n=te;try{if(ht.transition=null,te=16>t?16:t,gn===null)var r=!1;else{if(t=gn,gn=null,Os=0,(K&6)!==0)throw Error(k(331));var i=K;for(K|=4,L=t.current;L!==null;){var a=L,s=a.child;if((L.flags&16)!==0){var o=a.deletions;if(o!==null){for(var u=0;u<o.length;u++){var l=o[u];for(L=l;L!==null;){var c=L;switch(c.tag){case 0:case 11:case 15:Ci(8,c,a)}var d=c.child;if(d!==null)d.return=c,L=d;else for(;L!==null;){c=L;var f=c.sibling,h=c.return;if(Qp(c),c===l){L=null;break}if(f!==null){f.return=h,L=f;break}L=h}}}var p=a.alternate;if(p!==null){var v=p.child;if(v!==null){p.child=null;do{var _=v.sibling;v.sibling=null,v=_}while(v!==null)}}L=a}}if((a.subtreeFlags&2064)!==0&&s!==null)s.return=a,L=s;else e:for(;L!==null;){if(a=L,(a.flags&2048)!==0)switch(a.tag){case 0:case 11:case 15:Ci(9,a,a.return)}var m=a.sibling;if(m!==null){m.return=a.return,L=m;break e}L=a.return}}var g=t.current;for(L=g;L!==null;){s=L;var y=s.child;if((s.subtreeFlags&2064)!==0&&y!==null)y.return=s,L=y;else e:for(s=g;L!==null;){if(o=L,(o.flags&2048)!==0)try{switch(o.tag){case 0:case 11:case 15:Ys(9,o)}}catch(E){me(o,o.return,E)}if(o===s){L=null;break e}var w=o.sibling;if(w!==null){w.return=o.return,L=w;break e}L=o.return}}if(K=i,Ln(),Dt&&typeof Dt.onPostCommitFiberRoot=="function")try{Dt.onPostCommitFiberRoot(Zs,t)}catch{}r=!0}return r}finally{te=n,ht.transition=e}}return!1}function Xd(t,e,n){e=Hr(n,e),e=Mp(t,e,1),t=bn(t,e,1),e=Me(),t!==null&&(ma(t,1,e),Xe(t,e))}function me(t,e,n){if(t.tag===3)Xd(t,t,n);else for(;e!==null;){if(e.tag===3){Xd(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(En===null||!En.has(r))){t=Hr(n,t),t=Up(e,t,1),e=bn(e,t,1),t=Me(),e!==null&&(ma(e,1,t),Xe(e,t));break}}e=e.return}}function wv(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=Me(),t.pingedLanes|=t.suspendedLanes&n,ke===t&&(Oe&n)===n&&(Ee===4||Ee===3&&(Oe&130023424)===Oe&&500>ge()-ic?Wn(t,0):rc|=n),Xe(t,e)}function am(t,e){e===0&&((t.mode&1)===0?e=1:(e=Pa,Pa<<=1,(Pa&130023424)===0&&(Pa=4194304)));var n=Me();t=tn(t,e),t!==null&&(ma(t,e,n),Xe(t,n))}function bv(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),am(t,n)}function Ev(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,i=t.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(k(314))}r!==null&&r.delete(e),am(t,n)}var sm;sm=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||qe.current)Qe=!0;else{if((t.lanes&n)===0&&(e.flags&128)===0)return Qe=!1,lv(t,e,n);Qe=(t.flags&131072)!==0}else Qe=!1,ue&&(e.flags&1048576)!==0&&cp(e,vs,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;ns(t,e),t=e.pendingProps;var i=Ur(e,Ae.current);Lr(e,n),i=Kl(null,e,r,t,i,n);var a=Xl();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Ke(r)?(a=!0,gs(e)):a=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,Gl(e),i.updater=Xs,e.stateNode=i,i._reactInternals=e,Qu(e,r,t,n),e=Xu(null,e,r,!0,a,n)):(e.tag=0,ue&&a&&Ul(e),De(null,e,i,n),e=e.child),e;case 16:r=e.elementType;e:{switch(ns(t,e),t=e.pendingProps,i=r._init,r=i(r._payload),e.type=r,i=e.tag=kv(r),t=Et(r,t),i){case 0:e=Ku(null,e,r,t,n);break e;case 1:e=Bd(null,e,r,t,n);break e;case 11:e=Fd(null,e,r,t,n);break e;case 14:e=zd(null,e,r,Et(r.type,t),n);break e}throw Error(k(306,r,""))}return e;case 0:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Et(r,i),Ku(t,e,r,i,n);case 1:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Et(r,i),Bd(t,e,r,i,n);case 3:e:{if(Hp(e),t===null)throw Error(k(387));r=e.pendingProps,a=e.memoizedState,i=a.element,gp(t,e),bs(e,r,null,n);var s=e.memoizedState;if(r=s.element,a.isDehydrated)if(a={element:r,isDehydrated:!1,cache:s.cache,pendingSuspenseBoundaries:s.pendingSuspenseBoundaries,transitions:s.transitions},e.updateQueue.baseState=a,e.memoizedState=a,e.flags&256){i=Hr(Error(k(423)),e),e=Hd(t,e,r,n,i);break e}else if(r!==i){i=Hr(Error(k(424)),e),e=Hd(t,e,r,n,i);break e}else for(rt=wn(e.stateNode.containerInfo.firstChild),it=e,ue=!0,kt=null,n=pp(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Fr(),r===i){e=nn(t,e,n);break e}De(t,e,r,n)}e=e.child}return e;case 5:return yp(e),t===null&&Gu(e),r=e.type,i=e.pendingProps,a=t!==null?t.memoizedProps:null,s=i.children,zu(r,i)?s=null:a!==null&&zu(r,a)&&(e.flags|=32),Bp(t,e),De(t,e,s,n),e.child;case 6:return t===null&&Gu(e),null;case 13:return Vp(t,e,n);case 4:return Wl(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=zr(e,null,r,n):De(t,e,r,n),e.child;case 11:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Et(r,i),Fd(t,e,r,i,n);case 7:return De(t,e,e.pendingProps,n),e.child;case 8:return De(t,e,e.pendingProps.children,n),e.child;case 12:return De(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,i=e.pendingProps,a=e.memoizedProps,s=i.value,ie(_s,r._currentValue),r._currentValue=s,a!==null)if(Rt(a.value,s)){if(a.children===i.children&&!qe.current){e=nn(t,e,n);break e}}else for(a=e.child,a!==null&&(a.return=e);a!==null;){var o=a.dependencies;if(o!==null){s=a.child;for(var u=o.firstContext;u!==null;){if(u.context===r){if(a.tag===1){u=Kt(-1,n&-n),u.tag=2;var l=a.updateQueue;if(l!==null){l=l.shared;var c=l.pending;c===null?u.next=u:(u.next=c.next,c.next=u),l.pending=u}}a.lanes|=n,u=a.alternate,u!==null&&(u.lanes|=n),Wu(a.return,n,e),o.lanes|=n;break}u=u.next}}else if(a.tag===10)s=a.type===e.type?null:a.child;else if(a.tag===18){if(s=a.return,s===null)throw Error(k(341));s.lanes|=n,o=s.alternate,o!==null&&(o.lanes|=n),Wu(s,n,e),s=a.sibling}else s=a.child;if(s!==null)s.return=a;else for(s=a;s!==null;){if(s===e){s=null;break}if(a=s.sibling,a!==null){a.return=s.return,s=a;break}s=s.return}a=s}De(t,e,i.children,n),e=e.child}return e;case 9:return i=e.type,r=e.pendingProps.children,Lr(e,n),i=pt(i),r=r(i),e.flags|=1,De(t,e,r,n),e.child;case 14:return r=e.type,i=Et(r,e.pendingProps),i=Et(r.type,i),zd(t,e,r,i,n);case 15:return Fp(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Et(r,i),ns(t,e),e.tag=1,Ke(r)?(t=!0,gs(e)):t=!1,Lr(e,n),Dp(e,r,i),Qu(e,r,i,n),Xu(null,e,r,!0,t,n);case 19:return Zp(t,e,n);case 22:return zp(t,e,n)}throw Error(k(156,e.tag))};function om(t,e){return Ah(t,e)}function Sv(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function ft(t,e,n,r){return new Sv(t,e,n,r)}function uc(t){return t=t.prototype,!(!t||!t.isReactComponent)}function kv(t){if(typeof t=="function")return uc(t)?1:0;if(t!=null){if(t=t.$$typeof,t===Ol)return 11;if(t===Cl)return 14}return 2}function kn(t,e){var n=t.alternate;return n===null?(n=ft(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function as(t,e,n,r,i,a){var s=2;if(r=t,typeof t=="function")uc(t)&&(s=1);else if(typeof t=="string")s=5;else e:switch(t){case yr:return Jn(n.children,i,a,e);case xl:s=8,i|=8;break;case _u:return t=ft(12,n,e,i|2),t.elementType=_u,t.lanes=a,t;case wu:return t=ft(13,n,e,i),t.elementType=wu,t.lanes=a,t;case bu:return t=ft(19,n,e,i),t.elementType=bu,t.lanes=a,t;case yh:return to(n,i,a,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case mh:s=10;break e;case gh:s=9;break e;case Ol:s=11;break e;case Cl:s=14;break e;case cn:s=16,r=null;break e}throw Error(k(130,t==null?t:typeof t,""))}return e=ft(s,n,e,i),e.elementType=t,e.type=r,e.lanes=a,e}function Jn(t,e,n,r){return t=ft(7,t,r,e),t.lanes=n,t}function to(t,e,n,r){return t=ft(22,t,r,e),t.elementType=yh,t.lanes=n,t.stateNode={isHidden:!1},t}function Go(t,e,n){return t=ft(6,t,null,e),t.lanes=n,t}function Wo(t,e,n){return e=ft(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function Tv(t,e,n,r,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Oo(0),this.expirationTimes=Oo(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Oo(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function lc(t,e,n,r,i,a,s,o,u){return t=new Tv(t,e,n,o,u),e===1?(e=1,a===!0&&(e|=8)):e=0,a=ft(3,null,null,e),t.current=a,a.stateNode=t,a.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Gl(a),t}function xv(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:gr,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function um(t){if(!t)return xn;t=t._reactInternals;e:{if(cr(t)!==t||t.tag!==1)throw Error(k(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Ke(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(k(171))}if(t.tag===1){var n=t.type;if(Ke(n))return up(t,n,e)}return e}function lm(t,e,n,r,i,a,s,o,u){return t=lc(n,r,!0,t,i,a,s,o,u),t.context=um(null),n=t.current,r=Me(),i=Sn(n),a=Kt(r,i),a.callback=e!=null?e:null,bn(n,a,i),t.current.lanes=i,ma(t,i,r),Xe(t,r),t}function no(t,e,n,r){var i=e.current,a=Me(),s=Sn(i);return n=um(n),e.context===null?e.context=n:e.pendingContext=n,e=Kt(a,s),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=bn(i,e,s),t!==null&&(Ct(t,i,s,a),Ya(t,i,s)),s}function Ps(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function Yd(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function cc(t,e){Yd(t,e),(t=t.alternate)&&Yd(t,e)}function Ov(){return null}var cm=typeof reportError=="function"?reportError:function(t){console.error(t)};function dc(t){this._internalRoot=t}ro.prototype.render=dc.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(k(409));no(t,e,null,null)};ro.prototype.unmount=dc.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;nr(function(){no(null,t,null,null)}),e[en]=null}};function ro(t){this._internalRoot=t}ro.prototype.unstable_scheduleHydration=function(t){if(t){var e=zh();t={blockedOn:null,target:t,priority:e};for(var n=0;n<fn.length&&e!==0&&e<fn[n].priority;n++);fn.splice(n,0,t),n===0&&Hh(t)}};function fc(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function io(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function ef(){}function Cv(t,e,n,r,i){if(i){if(typeof r=="function"){var a=r;r=function(){var l=Ps(s);a.call(l)}}var s=lm(e,r,t,0,null,!1,!1,"",ef);return t._reactRootContainer=s,t[en]=s.current,Bi(t.nodeType===8?t.parentNode:t),nr(),s}for(;i=t.lastChild;)t.removeChild(i);if(typeof r=="function"){var o=r;r=function(){var l=Ps(u);o.call(l)}}var u=lc(t,0,!1,null,null,!1,!1,"",ef);return t._reactRootContainer=u,t[en]=u.current,Bi(t.nodeType===8?t.parentNode:t),nr(function(){no(e,u,n,r)}),u}function ao(t,e,n,r,i){var a=n._reactRootContainer;if(a){var s=a;if(typeof i=="function"){var o=i;i=function(){var u=Ps(s);o.call(u)}}no(e,s,t,i)}else s=Cv(n,e,t,i,r);return Ps(s)}Uh=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=vi(e.pendingLanes);n!==0&&(Il(e,n|1),Xe(e,ge()),(K&6)===0&&(Vr=ge()+500,Ln()))}break;case 13:nr(function(){var r=tn(t,1);if(r!==null){var i=Me();Ct(r,t,1,i)}}),cc(t,1)}};Nl=function(t){if(t.tag===13){var e=tn(t,134217728);if(e!==null){var n=Me();Ct(e,t,134217728,n)}cc(t,134217728)}};Fh=function(t){if(t.tag===13){var e=Sn(t),n=tn(t,e);if(n!==null){var r=Me();Ct(n,t,e,r)}cc(t,e)}};zh=function(){return te};Bh=function(t,e){var n=te;try{return te=t,e()}finally{te=n}};Iu=function(t,e,n){switch(e){case"input":if(ku(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var i=Qs(r);if(!i)throw Error(k(90));_h(r),ku(r,i)}}}break;case"textarea":bh(t,n);break;case"select":e=n.value,e!=null&&Ir(t,!!n.multiple,e,!1)}};Ch=ac;Ph=nr;var Pv={usingClientEntryPoint:!1,Events:[ya,br,Qs,xh,Oh,ac]},di={findFiberByHostInstance:zn,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Rv={bundleType:di.bundleType,version:di.version,rendererPackageName:di.rendererPackageName,rendererConfig:di.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:an.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=Nh(t),t===null?null:t.stateNode},findFiberByHostInstance:di.findFiberByHostInstance||Ov,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Fa=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Fa.isDisabled&&Fa.supportsFiber)try{Zs=Fa.inject(Rv),Dt=Fa}catch{}}ot.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Pv;ot.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!fc(e))throw Error(k(200));return xv(t,e,null,n)};ot.createRoot=function(t,e){if(!fc(t))throw Error(k(299));var n=!1,r="",i=cm;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=lc(t,1,!1,null,null,n,!1,r,i),t[en]=e.current,Bi(t.nodeType===8?t.parentNode:t),new dc(e)};ot.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(k(188)):(t=Object.keys(t).join(","),Error(k(268,t)));return t=Nh(e),t=t===null?null:t.stateNode,t};ot.flushSync=function(t){return nr(t)};ot.hydrate=function(t,e,n){if(!io(e))throw Error(k(200));return ao(null,t,e,!0,n)};ot.hydrateRoot=function(t,e,n){if(!fc(t))throw Error(k(405));var r=n!=null&&n.hydratedSources||null,i=!1,a="",s=cm;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(a=n.identifierPrefix),n.onRecoverableError!==void 0&&(s=n.onRecoverableError)),e=lm(e,null,t,1,n!=null?n:null,i,!1,a,s),t[en]=e.current,Bi(t),r)for(t=0;t<r.length;t++)n=r[t],i=n._getVersion,i=i(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,i]:e.mutableSourceEagerHydrationData.push(n,i);return new ro(e)};ot.render=function(t,e,n){if(!io(e))throw Error(k(200));return ao(null,t,e,!1,n)};ot.unmountComponentAtNode=function(t){if(!io(t))throw Error(k(40));return t._reactRootContainer?(nr(function(){ao(null,null,t,!1,function(){t._reactRootContainer=null,t[en]=null})}),!0):!1};ot.unstable_batchedUpdates=ac;ot.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!io(n))throw Error(k(200));if(t==null||t._reactInternals===void 0)throw Error(k(38));return ao(t,e,n,!1,r)};ot.version="18.3.1-next-f1338f8080-20240426";(function(t){function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(n){console.error(n)}}e(),t.exports=ot})(dh);var dm,tf=dh.exports;dm=tf.createRoot,tf.hydrateRoot;var q;(function(t){t.assertEqual=i=>i;function e(i){}t.assertIs=e;function n(i){throw new Error}t.assertNever=n,t.arrayToEnum=i=>{const a={};for(const s of i)a[s]=s;return a},t.getValidEnumValues=i=>{const a=t.objectKeys(i).filter(o=>typeof i[i[o]]!="number"),s={};for(const o of a)s[o]=i[o];return t.objectValues(s)},t.objectValues=i=>t.objectKeys(i).map(function(a){return i[a]}),t.objectKeys=typeof Object.keys=="function"?i=>Object.keys(i):i=>{const a=[];for(const s in i)Object.prototype.hasOwnProperty.call(i,s)&&a.push(s);return a},t.find=(i,a)=>{for(const s of i)if(a(s))return s},t.isInteger=typeof Number.isInteger=="function"?i=>Number.isInteger(i):i=>typeof i=="number"&&isFinite(i)&&Math.floor(i)===i;function r(i,a=" | "){return i.map(s=>typeof s=="string"?`'${s}'`:s).join(a)}t.joinValues=r,t.jsonStringifyReplacer=(i,a)=>typeof a=="bigint"?a.toString():a})(q||(q={}));var cl;(function(t){t.mergeShapes=(e,n)=>({...e,...n})})(cl||(cl={}));const A=q.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),pn=t=>{switch(typeof t){case"undefined":return A.undefined;case"string":return A.string;case"number":return isNaN(t)?A.nan:A.number;case"boolean":return A.boolean;case"function":return A.function;case"bigint":return A.bigint;case"symbol":return A.symbol;case"object":return Array.isArray(t)?A.array:t===null?A.null:t.then&&typeof t.then=="function"&&t.catch&&typeof t.catch=="function"?A.promise:typeof Map<"u"&&t instanceof Map?A.map:typeof Set<"u"&&t instanceof Set?A.set:typeof Date<"u"&&t instanceof Date?A.date:A.object;default:return A.unknown}},x=q.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]),Iv=t=>JSON.stringify(t,null,2).replace(/"([^"]+)":/g,"$1:");class at extends Error{constructor(e){super(),this.issues=[],this.addIssue=r=>{this.issues=[...this.issues,r]},this.addIssues=(r=[])=>{this.issues=[...this.issues,...r]};const n=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,n):this.__proto__=n,this.name="ZodError",this.issues=e}get errors(){return this.issues}format(e){const n=e||function(a){return a.message},r={_errors:[]},i=a=>{for(const s of a.issues)if(s.code==="invalid_union")s.unionErrors.map(i);else if(s.code==="invalid_return_type")i(s.returnTypeError);else if(s.code==="invalid_arguments")i(s.argumentsError);else if(s.path.length===0)r._errors.push(n(s));else{let o=r,u=0;for(;u<s.path.length;){const l=s.path[u];u===s.path.length-1?(o[l]=o[l]||{_errors:[]},o[l]._errors.push(n(s))):o[l]=o[l]||{_errors:[]},o=o[l],u++}}};return i(this),r}static assert(e){if(!(e instanceof at))throw new Error(`Not a ZodError: ${e}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,q.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(e=n=>n.message){const n={},r=[];for(const i of this.issues)i.path.length>0?(n[i.path[0]]=n[i.path[0]]||[],n[i.path[0]].push(e(i))):r.push(e(i));return{formErrors:r,fieldErrors:n}}get formErrors(){return this.flatten()}}at.create=t=>new at(t);const Zr=(t,e)=>{let n;switch(t.code){case x.invalid_type:t.received===A.undefined?n="Required":n=`Expected ${t.expected}, received ${t.received}`;break;case x.invalid_literal:n=`Invalid literal value, expected ${JSON.stringify(t.expected,q.jsonStringifyReplacer)}`;break;case x.unrecognized_keys:n=`Unrecognized key(s) in object: ${q.joinValues(t.keys,", ")}`;break;case x.invalid_union:n="Invalid input";break;case x.invalid_union_discriminator:n=`Invalid discriminator value. Expected ${q.joinValues(t.options)}`;break;case x.invalid_enum_value:n=`Invalid enum value. Expected ${q.joinValues(t.options)}, received '${t.received}'`;break;case x.invalid_arguments:n="Invalid function arguments";break;case x.invalid_return_type:n="Invalid function return type";break;case x.invalid_date:n="Invalid date";break;case x.invalid_string:typeof t.validation=="object"?"includes"in t.validation?(n=`Invalid input: must include "${t.validation.includes}"`,typeof t.validation.position=="number"&&(n=`${n} at one or more positions greater than or equal to ${t.validation.position}`)):"startsWith"in t.validation?n=`Invalid input: must start with "${t.validation.startsWith}"`:"endsWith"in t.validation?n=`Invalid input: must end with "${t.validation.endsWith}"`:q.assertNever(t.validation):t.validation!=="regex"?n=`Invalid ${t.validation}`:n="Invalid";break;case x.too_small:t.type==="array"?n=`Array must contain ${t.exact?"exactly":t.inclusive?"at least":"more than"} ${t.minimum} element(s)`:t.type==="string"?n=`String must contain ${t.exact?"exactly":t.inclusive?"at least":"over"} ${t.minimum} character(s)`:t.type==="number"?n=`Number must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${t.minimum}`:t.type==="date"?n=`Date must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(t.minimum))}`:n="Invalid input";break;case x.too_big:t.type==="array"?n=`Array must contain ${t.exact?"exactly":t.inclusive?"at most":"less than"} ${t.maximum} element(s)`:t.type==="string"?n=`String must contain ${t.exact?"exactly":t.inclusive?"at most":"under"} ${t.maximum} character(s)`:t.type==="number"?n=`Number must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="bigint"?n=`BigInt must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="date"?n=`Date must be ${t.exact?"exactly":t.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(t.maximum))}`:n="Invalid input";break;case x.custom:n="Invalid input";break;case x.invalid_intersection_types:n="Intersection results could not be merged";break;case x.not_multiple_of:n=`Number must be a multiple of ${t.multipleOf}`;break;case x.not_finite:n="Number must be finite";break;default:n=e.defaultError,q.assertNever(t)}return{message:n}};let fm=Zr;function Nv(t){fm=t}function Rs(){return fm}const Is=t=>{const{data:e,path:n,errorMaps:r,issueData:i}=t,a=[...n,...i.path||[]],s={...i,path:a};if(i.message!==void 0)return{...i,path:a,message:i.message};let o="";const u=r.filter(l=>!!l).slice().reverse();for(const l of u)o=l(s,{data:e,defaultError:o}).message;return{...i,path:a,message:o}},$v=[];function N(t,e){const n=Rs(),r=Is({issueData:e,data:t.data,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,n,n===Zr?void 0:Zr].filter(i=>!!i)});t.common.issues.push(r)}class Le{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(e,n){const r=[];for(const i of n){if(i.status==="aborted")return H;i.status==="dirty"&&e.dirty(),r.push(i.value)}return{status:e.value,value:r}}static async mergeObjectAsync(e,n){const r=[];for(const i of n){const a=await i.key,s=await i.value;r.push({key:a,value:s})}return Le.mergeObjectSync(e,r)}static mergeObjectSync(e,n){const r={};for(const i of n){const{key:a,value:s}=i;if(a.status==="aborted"||s.status==="aborted")return H;a.status==="dirty"&&e.dirty(),s.status==="dirty"&&e.dirty(),a.value!=="__proto__"&&(typeof s.value<"u"||i.alwaysSet)&&(r[a.value]=s.value)}return{status:e.value,value:r}}}const H=Object.freeze({status:"aborted"}),Cr=t=>({status:"dirty",value:t}),Fe=t=>({status:"valid",value:t}),dl=t=>t.status==="aborted",fl=t=>t.status==="dirty",Ki=t=>t.status==="valid",Xi=t=>typeof Promise<"u"&&t instanceof Promise;function Ns(t,e,n,r){if(n==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!r:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?r:n==="a"?r.call(t):r?r.value:e.get(t)}function hm(t,e,n,r,i){if(r==="m")throw new TypeError("Private method is not writable");if(r==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!i:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return r==="a"?i.call(t,n):i?i.value=n:e.set(t,n),n}var M;(function(t){t.errToObj=e=>typeof e=="string"?{message:e}:e||{},t.toString=e=>typeof e=="string"?e:e==null?void 0:e.message})(M||(M={}));var wi,bi;class Bt{constructor(e,n,r,i){this._cachedPath=[],this.parent=e,this.data=n,this._path=r,this._key=i}get path(){return this._cachedPath.length||(this._key instanceof Array?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}const nf=(t,e)=>{if(Ki(e))return{success:!0,data:e.value};if(!t.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;const n=new at(t.common.issues);return this._error=n,this._error}}};function V(t){if(!t)return{};const{errorMap:e,invalid_type_error:n,required_error:r,description:i}=t;if(e&&(n||r))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return e?{errorMap:e,description:i}:{errorMap:(s,o)=>{var u,l;const{message:c}=t;return s.code==="invalid_enum_value"?{message:c!=null?c:o.defaultError}:typeof o.data>"u"?{message:(u=c!=null?c:r)!==null&&u!==void 0?u:o.defaultError}:s.code!=="invalid_type"?{message:o.defaultError}:{message:(l=c!=null?c:n)!==null&&l!==void 0?l:o.defaultError}},description:i}}class Z{constructor(e){this.spa=this.safeParseAsync,this._def=e,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this)}get description(){return this._def.description}_getType(e){return pn(e.data)}_getOrReturnCtx(e,n){return n||{common:e.parent.common,data:e.data,parsedType:pn(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}_processInputParams(e){return{status:new Le,ctx:{common:e.parent.common,data:e.data,parsedType:pn(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}}_parseSync(e){const n=this._parse(e);if(Xi(n))throw new Error("Synchronous parse encountered promise.");return n}_parseAsync(e){const n=this._parse(e);return Promise.resolve(n)}parse(e,n){const r=this.safeParse(e,n);if(r.success)return r.data;throw r.error}safeParse(e,n){var r;const i={common:{issues:[],async:(r=n==null?void 0:n.async)!==null&&r!==void 0?r:!1,contextualErrorMap:n==null?void 0:n.errorMap},path:(n==null?void 0:n.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:pn(e)},a=this._parseSync({data:e,path:i.path,parent:i});return nf(i,a)}async parseAsync(e,n){const r=await this.safeParseAsync(e,n);if(r.success)return r.data;throw r.error}async safeParseAsync(e,n){const r={common:{issues:[],contextualErrorMap:n==null?void 0:n.errorMap,async:!0},path:(n==null?void 0:n.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:pn(e)},i=this._parse({data:e,path:r.path,parent:r}),a=await(Xi(i)?i:Promise.resolve(i));return nf(r,a)}refine(e,n){const r=i=>typeof n=="string"||typeof n>"u"?{message:n}:typeof n=="function"?n(i):n;return this._refinement((i,a)=>{const s=e(i),o=()=>a.addIssue({code:x.custom,...r(i)});return typeof Promise<"u"&&s instanceof Promise?s.then(u=>u?!0:(o(),!1)):s?!0:(o(),!1)})}refinement(e,n){return this._refinement((r,i)=>e(r)?!0:(i.addIssue(typeof n=="function"?n(r,i):n),!1))}_refinement(e){return new It({schema:this,typeName:O.ZodEffects,effect:{type:"refinement",refinement:e}})}superRefine(e){return this._refinement(e)}optional(){return Ut.create(this,this._def)}nullable(){return Rn.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return Pt.create(this,this._def)}promise(){return Wr.create(this,this._def)}or(e){return na.create([this,e],this._def)}and(e){return ra.create(this,e,this._def)}transform(e){return new It({...V(this._def),schema:this,typeName:O.ZodEffects,effect:{type:"transform",transform:e}})}default(e){const n=typeof e=="function"?e:()=>e;return new ua({...V(this._def),innerType:this,defaultValue:n,typeName:O.ZodDefault})}brand(){return new hc({typeName:O.ZodBranded,type:this,...V(this._def)})}catch(e){const n=typeof e=="function"?e:()=>e;return new la({...V(this._def),innerType:this,catchValue:n,typeName:O.ZodCatch})}describe(e){const n=this.constructor;return new n({...this._def,description:e})}pipe(e){return _a.create(this,e)}readonly(){return ca.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}const Av=/^c[^\s-]{8,}$/i,Lv=/^[0-9a-z]+$/,jv=/^[0-9A-HJKMNP-TV-Z]{26}$/,Dv=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,Mv=/^[a-z0-9_-]{21}$/i,Uv=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,Fv=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,zv="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";let Jo;const Bv=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,Hv=/^(([a-f0-9]{1,4}:){7}|::([a-f0-9]{1,4}:){0,6}|([a-f0-9]{1,4}:){1}:([a-f0-9]{1,4}:){0,5}|([a-f0-9]{1,4}:){2}:([a-f0-9]{1,4}:){0,4}|([a-f0-9]{1,4}:){3}:([a-f0-9]{1,4}:){0,3}|([a-f0-9]{1,4}:){4}:([a-f0-9]{1,4}:){0,2}|([a-f0-9]{1,4}:){5}:([a-f0-9]{1,4}:){0,1})([a-f0-9]{1,4}|(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2})))$/,Vv=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,pm="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",Zv=new RegExp(`^${pm}$`);function mm(t){let e="([01]\\d|2[0-3]):[0-5]\\d:[0-5]\\d";return t.precision?e=`${e}\\.\\d{${t.precision}}`:t.precision==null&&(e=`${e}(\\.\\d+)?`),e}function Gv(t){return new RegExp(`^${mm(t)}$`)}function gm(t){let e=`${pm}T${mm(t)}`;const n=[];return n.push(t.local?"Z?":"Z"),t.offset&&n.push("([+-]\\d{2}:?\\d{2})"),e=`${e}(${n.join("|")})`,new RegExp(`^${e}$`)}function Wv(t,e){return!!((e==="v4"||!e)&&Bv.test(t)||(e==="v6"||!e)&&Hv.test(t))}class xt extends Z{_parse(e){if(this._def.coerce&&(e.data=String(e.data)),this._getType(e)!==A.string){const a=this._getOrReturnCtx(e);return N(a,{code:x.invalid_type,expected:A.string,received:a.parsedType}),H}const r=new Le;let i;for(const a of this._def.checks)if(a.kind==="min")e.data.length<a.value&&(i=this._getOrReturnCtx(e,i),N(i,{code:x.too_small,minimum:a.value,type:"string",inclusive:!0,exact:!1,message:a.message}),r.dirty());else if(a.kind==="max")e.data.length>a.value&&(i=this._getOrReturnCtx(e,i),N(i,{code:x.too_big,maximum:a.value,type:"string",inclusive:!0,exact:!1,message:a.message}),r.dirty());else if(a.kind==="length"){const s=e.data.length>a.value,o=e.data.length<a.value;(s||o)&&(i=this._getOrReturnCtx(e,i),s?N(i,{code:x.too_big,maximum:a.value,type:"string",inclusive:!0,exact:!0,message:a.message}):o&&N(i,{code:x.too_small,minimum:a.value,type:"string",inclusive:!0,exact:!0,message:a.message}),r.dirty())}else if(a.kind==="email")Fv.test(e.data)||(i=this._getOrReturnCtx(e,i),N(i,{validation:"email",code:x.invalid_string,message:a.message}),r.dirty());else if(a.kind==="emoji")Jo||(Jo=new RegExp(zv,"u")),Jo.test(e.data)||(i=this._getOrReturnCtx(e,i),N(i,{validation:"emoji",code:x.invalid_string,message:a.message}),r.dirty());else if(a.kind==="uuid")Dv.test(e.data)||(i=this._getOrReturnCtx(e,i),N(i,{validation:"uuid",code:x.invalid_string,message:a.message}),r.dirty());else if(a.kind==="nanoid")Mv.test(e.data)||(i=this._getOrReturnCtx(e,i),N(i,{validation:"nanoid",code:x.invalid_string,message:a.message}),r.dirty());else if(a.kind==="cuid")Av.test(e.data)||(i=this._getOrReturnCtx(e,i),N(i,{validation:"cuid",code:x.invalid_string,message:a.message}),r.dirty());else if(a.kind==="cuid2")Lv.test(e.data)||(i=this._getOrReturnCtx(e,i),N(i,{validation:"cuid2",code:x.invalid_string,message:a.message}),r.dirty());else if(a.kind==="ulid")jv.test(e.data)||(i=this._getOrReturnCtx(e,i),N(i,{validation:"ulid",code:x.invalid_string,message:a.message}),r.dirty());else if(a.kind==="url")try{new URL(e.data)}catch{i=this._getOrReturnCtx(e,i),N(i,{validation:"url",code:x.invalid_string,message:a.message}),r.dirty()}else a.kind==="regex"?(a.regex.lastIndex=0,a.regex.test(e.data)||(i=this._getOrReturnCtx(e,i),N(i,{validation:"regex",code:x.invalid_string,message:a.message}),r.dirty())):a.kind==="trim"?e.data=e.data.trim():a.kind==="includes"?e.data.includes(a.value,a.position)||(i=this._getOrReturnCtx(e,i),N(i,{code:x.invalid_string,validation:{includes:a.value,position:a.position},message:a.message}),r.dirty()):a.kind==="toLowerCase"?e.data=e.data.toLowerCase():a.kind==="toUpperCase"?e.data=e.data.toUpperCase():a.kind==="startsWith"?e.data.startsWith(a.value)||(i=this._getOrReturnCtx(e,i),N(i,{code:x.invalid_string,validation:{startsWith:a.value},message:a.message}),r.dirty()):a.kind==="endsWith"?e.data.endsWith(a.value)||(i=this._getOrReturnCtx(e,i),N(i,{code:x.invalid_string,validation:{endsWith:a.value},message:a.message}),r.dirty()):a.kind==="datetime"?gm(a).test(e.data)||(i=this._getOrReturnCtx(e,i),N(i,{code:x.invalid_string,validation:"datetime",message:a.message}),r.dirty()):a.kind==="date"?Zv.test(e.data)||(i=this._getOrReturnCtx(e,i),N(i,{code:x.invalid_string,validation:"date",message:a.message}),r.dirty()):a.kind==="time"?Gv(a).test(e.data)||(i=this._getOrReturnCtx(e,i),N(i,{code:x.invalid_string,validation:"time",message:a.message}),r.dirty()):a.kind==="duration"?Uv.test(e.data)||(i=this._getOrReturnCtx(e,i),N(i,{validation:"duration",code:x.invalid_string,message:a.message}),r.dirty()):a.kind==="ip"?Wv(e.data,a.version)||(i=this._getOrReturnCtx(e,i),N(i,{validation:"ip",code:x.invalid_string,message:a.message}),r.dirty()):a.kind==="base64"?Vv.test(e.data)||(i=this._getOrReturnCtx(e,i),N(i,{validation:"base64",code:x.invalid_string,message:a.message}),r.dirty()):q.assertNever(a);return{status:r.value,value:e.data}}_regex(e,n,r){return this.refinement(i=>e.test(i),{validation:n,code:x.invalid_string,...M.errToObj(r)})}_addCheck(e){return new xt({...this._def,checks:[...this._def.checks,e]})}email(e){return this._addCheck({kind:"email",...M.errToObj(e)})}url(e){return this._addCheck({kind:"url",...M.errToObj(e)})}emoji(e){return this._addCheck({kind:"emoji",...M.errToObj(e)})}uuid(e){return this._addCheck({kind:"uuid",...M.errToObj(e)})}nanoid(e){return this._addCheck({kind:"nanoid",...M.errToObj(e)})}cuid(e){return this._addCheck({kind:"cuid",...M.errToObj(e)})}cuid2(e){return this._addCheck({kind:"cuid2",...M.errToObj(e)})}ulid(e){return this._addCheck({kind:"ulid",...M.errToObj(e)})}base64(e){return this._addCheck({kind:"base64",...M.errToObj(e)})}ip(e){return this._addCheck({kind:"ip",...M.errToObj(e)})}datetime(e){var n,r;return typeof e=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:e}):this._addCheck({kind:"datetime",precision:typeof(e==null?void 0:e.precision)>"u"?null:e==null?void 0:e.precision,offset:(n=e==null?void 0:e.offset)!==null&&n!==void 0?n:!1,local:(r=e==null?void 0:e.local)!==null&&r!==void 0?r:!1,...M.errToObj(e==null?void 0:e.message)})}date(e){return this._addCheck({kind:"date",message:e})}time(e){return typeof e=="string"?this._addCheck({kind:"time",precision:null,message:e}):this._addCheck({kind:"time",precision:typeof(e==null?void 0:e.precision)>"u"?null:e==null?void 0:e.precision,...M.errToObj(e==null?void 0:e.message)})}duration(e){return this._addCheck({kind:"duration",...M.errToObj(e)})}regex(e,n){return this._addCheck({kind:"regex",regex:e,...M.errToObj(n)})}includes(e,n){return this._addCheck({kind:"includes",value:e,position:n==null?void 0:n.position,...M.errToObj(n==null?void 0:n.message)})}startsWith(e,n){return this._addCheck({kind:"startsWith",value:e,...M.errToObj(n)})}endsWith(e,n){return this._addCheck({kind:"endsWith",value:e,...M.errToObj(n)})}min(e,n){return this._addCheck({kind:"min",value:e,...M.errToObj(n)})}max(e,n){return this._addCheck({kind:"max",value:e,...M.errToObj(n)})}length(e,n){return this._addCheck({kind:"length",value:e,...M.errToObj(n)})}nonempty(e){return this.min(1,M.errToObj(e))}trim(){return new xt({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new xt({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new xt({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(e=>e.kind==="datetime")}get isDate(){return!!this._def.checks.find(e=>e.kind==="date")}get isTime(){return!!this._def.checks.find(e=>e.kind==="time")}get isDuration(){return!!this._def.checks.find(e=>e.kind==="duration")}get isEmail(){return!!this._def.checks.find(e=>e.kind==="email")}get isURL(){return!!this._def.checks.find(e=>e.kind==="url")}get isEmoji(){return!!this._def.checks.find(e=>e.kind==="emoji")}get isUUID(){return!!this._def.checks.find(e=>e.kind==="uuid")}get isNANOID(){return!!this._def.checks.find(e=>e.kind==="nanoid")}get isCUID(){return!!this._def.checks.find(e=>e.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(e=>e.kind==="cuid2")}get isULID(){return!!this._def.checks.find(e=>e.kind==="ulid")}get isIP(){return!!this._def.checks.find(e=>e.kind==="ip")}get isBase64(){return!!this._def.checks.find(e=>e.kind==="base64")}get minLength(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e}get maxLength(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e}}xt.create=t=>{var e;return new xt({checks:[],typeName:O.ZodString,coerce:(e=t==null?void 0:t.coerce)!==null&&e!==void 0?e:!1,...V(t)})};function Jv(t,e){const n=(t.toString().split(".")[1]||"").length,r=(e.toString().split(".")[1]||"").length,i=n>r?n:r,a=parseInt(t.toFixed(i).replace(".","")),s=parseInt(e.toFixed(i).replace(".",""));return a%s/Math.pow(10,i)}class On extends Z{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(e){if(this._def.coerce&&(e.data=Number(e.data)),this._getType(e)!==A.number){const a=this._getOrReturnCtx(e);return N(a,{code:x.invalid_type,expected:A.number,received:a.parsedType}),H}let r;const i=new Le;for(const a of this._def.checks)a.kind==="int"?q.isInteger(e.data)||(r=this._getOrReturnCtx(e,r),N(r,{code:x.invalid_type,expected:"integer",received:"float",message:a.message}),i.dirty()):a.kind==="min"?(a.inclusive?e.data<a.value:e.data<=a.value)&&(r=this._getOrReturnCtx(e,r),N(r,{code:x.too_small,minimum:a.value,type:"number",inclusive:a.inclusive,exact:!1,message:a.message}),i.dirty()):a.kind==="max"?(a.inclusive?e.data>a.value:e.data>=a.value)&&(r=this._getOrReturnCtx(e,r),N(r,{code:x.too_big,maximum:a.value,type:"number",inclusive:a.inclusive,exact:!1,message:a.message}),i.dirty()):a.kind==="multipleOf"?Jv(e.data,a.value)!==0&&(r=this._getOrReturnCtx(e,r),N(r,{code:x.not_multiple_of,multipleOf:a.value,message:a.message}),i.dirty()):a.kind==="finite"?Number.isFinite(e.data)||(r=this._getOrReturnCtx(e,r),N(r,{code:x.not_finite,message:a.message}),i.dirty()):q.assertNever(a);return{status:i.value,value:e.data}}gte(e,n){return this.setLimit("min",e,!0,M.toString(n))}gt(e,n){return this.setLimit("min",e,!1,M.toString(n))}lte(e,n){return this.setLimit("max",e,!0,M.toString(n))}lt(e,n){return this.setLimit("max",e,!1,M.toString(n))}setLimit(e,n,r,i){return new On({...this._def,checks:[...this._def.checks,{kind:e,value:n,inclusive:r,message:M.toString(i)}]})}_addCheck(e){return new On({...this._def,checks:[...this._def.checks,e]})}int(e){return this._addCheck({kind:"int",message:M.toString(e)})}positive(e){return this._addCheck({kind:"min",value:0,inclusive:!1,message:M.toString(e)})}negative(e){return this._addCheck({kind:"max",value:0,inclusive:!1,message:M.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:0,inclusive:!0,message:M.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:0,inclusive:!0,message:M.toString(e)})}multipleOf(e,n){return this._addCheck({kind:"multipleOf",value:e,message:M.toString(n)})}finite(e){return this._addCheck({kind:"finite",message:M.toString(e)})}safe(e){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:M.toString(e)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:M.toString(e)})}get minValue(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e}get maxValue(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e}get isInt(){return!!this._def.checks.find(e=>e.kind==="int"||e.kind==="multipleOf"&&q.isInteger(e.value))}get isFinite(){let e=null,n=null;for(const r of this._def.checks){if(r.kind==="finite"||r.kind==="int"||r.kind==="multipleOf")return!0;r.kind==="min"?(n===null||r.value>n)&&(n=r.value):r.kind==="max"&&(e===null||r.value<e)&&(e=r.value)}return Number.isFinite(n)&&Number.isFinite(e)}}On.create=t=>new On({checks:[],typeName:O.ZodNumber,coerce:(t==null?void 0:t.coerce)||!1,...V(t)});class Cn extends Z{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(e){if(this._def.coerce&&(e.data=BigInt(e.data)),this._getType(e)!==A.bigint){const a=this._getOrReturnCtx(e);return N(a,{code:x.invalid_type,expected:A.bigint,received:a.parsedType}),H}let r;const i=new Le;for(const a of this._def.checks)a.kind==="min"?(a.inclusive?e.data<a.value:e.data<=a.value)&&(r=this._getOrReturnCtx(e,r),N(r,{code:x.too_small,type:"bigint",minimum:a.value,inclusive:a.inclusive,message:a.message}),i.dirty()):a.kind==="max"?(a.inclusive?e.data>a.value:e.data>=a.value)&&(r=this._getOrReturnCtx(e,r),N(r,{code:x.too_big,type:"bigint",maximum:a.value,inclusive:a.inclusive,message:a.message}),i.dirty()):a.kind==="multipleOf"?e.data%a.value!==BigInt(0)&&(r=this._getOrReturnCtx(e,r),N(r,{code:x.not_multiple_of,multipleOf:a.value,message:a.message}),i.dirty()):q.assertNever(a);return{status:i.value,value:e.data}}gte(e,n){return this.setLimit("min",e,!0,M.toString(n))}gt(e,n){return this.setLimit("min",e,!1,M.toString(n))}lte(e,n){return this.setLimit("max",e,!0,M.toString(n))}lt(e,n){return this.setLimit("max",e,!1,M.toString(n))}setLimit(e,n,r,i){return new Cn({...this._def,checks:[...this._def.checks,{kind:e,value:n,inclusive:r,message:M.toString(i)}]})}_addCheck(e){return new Cn({...this._def,checks:[...this._def.checks,e]})}positive(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:M.toString(e)})}negative(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:M.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:M.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:M.toString(e)})}multipleOf(e,n){return this._addCheck({kind:"multipleOf",value:e,message:M.toString(n)})}get minValue(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e}get maxValue(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e}}Cn.create=t=>{var e;return new Cn({checks:[],typeName:O.ZodBigInt,coerce:(e=t==null?void 0:t.coerce)!==null&&e!==void 0?e:!1,...V(t)})};class Yi extends Z{_parse(e){if(this._def.coerce&&(e.data=Boolean(e.data)),this._getType(e)!==A.boolean){const r=this._getOrReturnCtx(e);return N(r,{code:x.invalid_type,expected:A.boolean,received:r.parsedType}),H}return Fe(e.data)}}Yi.create=t=>new Yi({typeName:O.ZodBoolean,coerce:(t==null?void 0:t.coerce)||!1,...V(t)});class rr extends Z{_parse(e){if(this._def.coerce&&(e.data=new Date(e.data)),this._getType(e)!==A.date){const a=this._getOrReturnCtx(e);return N(a,{code:x.invalid_type,expected:A.date,received:a.parsedType}),H}if(isNaN(e.data.getTime())){const a=this._getOrReturnCtx(e);return N(a,{code:x.invalid_date}),H}const r=new Le;let i;for(const a of this._def.checks)a.kind==="min"?e.data.getTime()<a.value&&(i=this._getOrReturnCtx(e,i),N(i,{code:x.too_small,message:a.message,inclusive:!0,exact:!1,minimum:a.value,type:"date"}),r.dirty()):a.kind==="max"?e.data.getTime()>a.value&&(i=this._getOrReturnCtx(e,i),N(i,{code:x.too_big,message:a.message,inclusive:!0,exact:!1,maximum:a.value,type:"date"}),r.dirty()):q.assertNever(a);return{status:r.value,value:new Date(e.data.getTime())}}_addCheck(e){return new rr({...this._def,checks:[...this._def.checks,e]})}min(e,n){return this._addCheck({kind:"min",value:e.getTime(),message:M.toString(n)})}max(e,n){return this._addCheck({kind:"max",value:e.getTime(),message:M.toString(n)})}get minDate(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e!=null?new Date(e):null}get maxDate(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e!=null?new Date(e):null}}rr.create=t=>new rr({checks:[],coerce:(t==null?void 0:t.coerce)||!1,typeName:O.ZodDate,...V(t)});class $s extends Z{_parse(e){if(this._getType(e)!==A.symbol){const r=this._getOrReturnCtx(e);return N(r,{code:x.invalid_type,expected:A.symbol,received:r.parsedType}),H}return Fe(e.data)}}$s.create=t=>new $s({typeName:O.ZodSymbol,...V(t)});class ea extends Z{_parse(e){if(this._getType(e)!==A.undefined){const r=this._getOrReturnCtx(e);return N(r,{code:x.invalid_type,expected:A.undefined,received:r.parsedType}),H}return Fe(e.data)}}ea.create=t=>new ea({typeName:O.ZodUndefined,...V(t)});class ta extends Z{_parse(e){if(this._getType(e)!==A.null){const r=this._getOrReturnCtx(e);return N(r,{code:x.invalid_type,expected:A.null,received:r.parsedType}),H}return Fe(e.data)}}ta.create=t=>new ta({typeName:O.ZodNull,...V(t)});class Gr extends Z{constructor(){super(...arguments),this._any=!0}_parse(e){return Fe(e.data)}}Gr.create=t=>new Gr({typeName:O.ZodAny,...V(t)});class Qn extends Z{constructor(){super(...arguments),this._unknown=!0}_parse(e){return Fe(e.data)}}Qn.create=t=>new Qn({typeName:O.ZodUnknown,...V(t)});class rn extends Z{_parse(e){const n=this._getOrReturnCtx(e);return N(n,{code:x.invalid_type,expected:A.never,received:n.parsedType}),H}}rn.create=t=>new rn({typeName:O.ZodNever,...V(t)});class As extends Z{_parse(e){if(this._getType(e)!==A.undefined){const r=this._getOrReturnCtx(e);return N(r,{code:x.invalid_type,expected:A.void,received:r.parsedType}),H}return Fe(e.data)}}As.create=t=>new As({typeName:O.ZodVoid,...V(t)});class Pt extends Z{_parse(e){const{ctx:n,status:r}=this._processInputParams(e),i=this._def;if(n.parsedType!==A.array)return N(n,{code:x.invalid_type,expected:A.array,received:n.parsedType}),H;if(i.exactLength!==null){const s=n.data.length>i.exactLength.value,o=n.data.length<i.exactLength.value;(s||o)&&(N(n,{code:s?x.too_big:x.too_small,minimum:o?i.exactLength.value:void 0,maximum:s?i.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:i.exactLength.message}),r.dirty())}if(i.minLength!==null&&n.data.length<i.minLength.value&&(N(n,{code:x.too_small,minimum:i.minLength.value,type:"array",inclusive:!0,exact:!1,message:i.minLength.message}),r.dirty()),i.maxLength!==null&&n.data.length>i.maxLength.value&&(N(n,{code:x.too_big,maximum:i.maxLength.value,type:"array",inclusive:!0,exact:!1,message:i.maxLength.message}),r.dirty()),n.common.async)return Promise.all([...n.data].map((s,o)=>i.type._parseAsync(new Bt(n,s,n.path,o)))).then(s=>Le.mergeArray(r,s));const a=[...n.data].map((s,o)=>i.type._parseSync(new Bt(n,s,n.path,o)));return Le.mergeArray(r,a)}get element(){return this._def.type}min(e,n){return new Pt({...this._def,minLength:{value:e,message:M.toString(n)}})}max(e,n){return new Pt({...this._def,maxLength:{value:e,message:M.toString(n)}})}length(e,n){return new Pt({...this._def,exactLength:{value:e,message:M.toString(n)}})}nonempty(e){return this.min(1,e)}}Pt.create=(t,e)=>new Pt({type:t,minLength:null,maxLength:null,exactLength:null,typeName:O.ZodArray,...V(e)});function mr(t){if(t instanceof ce){const e={};for(const n in t.shape){const r=t.shape[n];e[n]=Ut.create(mr(r))}return new ce({...t._def,shape:()=>e})}else return t instanceof Pt?new Pt({...t._def,type:mr(t.element)}):t instanceof Ut?Ut.create(mr(t.unwrap())):t instanceof Rn?Rn.create(mr(t.unwrap())):t instanceof Ht?Ht.create(t.items.map(e=>mr(e))):t}class ce extends Z{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;const e=this._def.shape(),n=q.objectKeys(e);return this._cached={shape:e,keys:n}}_parse(e){if(this._getType(e)!==A.object){const l=this._getOrReturnCtx(e);return N(l,{code:x.invalid_type,expected:A.object,received:l.parsedType}),H}const{status:r,ctx:i}=this._processInputParams(e),{shape:a,keys:s}=this._getCached(),o=[];if(!(this._def.catchall instanceof rn&&this._def.unknownKeys==="strip"))for(const l in i.data)s.includes(l)||o.push(l);const u=[];for(const l of s){const c=a[l],d=i.data[l];u.push({key:{status:"valid",value:l},value:c._parse(new Bt(i,d,i.path,l)),alwaysSet:l in i.data})}if(this._def.catchall instanceof rn){const l=this._def.unknownKeys;if(l==="passthrough")for(const c of o)u.push({key:{status:"valid",value:c},value:{status:"valid",value:i.data[c]}});else if(l==="strict")o.length>0&&(N(i,{code:x.unrecognized_keys,keys:o}),r.dirty());else if(l!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{const l=this._def.catchall;for(const c of o){const d=i.data[c];u.push({key:{status:"valid",value:c},value:l._parse(new Bt(i,d,i.path,c)),alwaysSet:c in i.data})}}return i.common.async?Promise.resolve().then(async()=>{const l=[];for(const c of u){const d=await c.key,f=await c.value;l.push({key:d,value:f,alwaysSet:c.alwaysSet})}return l}).then(l=>Le.mergeObjectSync(r,l)):Le.mergeObjectSync(r,u)}get shape(){return this._def.shape()}strict(e){return M.errToObj,new ce({...this._def,unknownKeys:"strict",...e!==void 0?{errorMap:(n,r)=>{var i,a,s,o;const u=(s=(a=(i=this._def).errorMap)===null||a===void 0?void 0:a.call(i,n,r).message)!==null&&s!==void 0?s:r.defaultError;return n.code==="unrecognized_keys"?{message:(o=M.errToObj(e).message)!==null&&o!==void 0?o:u}:{message:u}}}:{}})}strip(){return new ce({...this._def,unknownKeys:"strip"})}passthrough(){return new ce({...this._def,unknownKeys:"passthrough"})}extend(e){return new ce({...this._def,shape:()=>({...this._def.shape(),...e})})}merge(e){return new ce({unknownKeys:e._def.unknownKeys,catchall:e._def.catchall,shape:()=>({...this._def.shape(),...e._def.shape()}),typeName:O.ZodObject})}setKey(e,n){return this.augment({[e]:n})}catchall(e){return new ce({...this._def,catchall:e})}pick(e){const n={};return q.objectKeys(e).forEach(r=>{e[r]&&this.shape[r]&&(n[r]=this.shape[r])}),new ce({...this._def,shape:()=>n})}omit(e){const n={};return q.objectKeys(this.shape).forEach(r=>{e[r]||(n[r]=this.shape[r])}),new ce({...this._def,shape:()=>n})}deepPartial(){return mr(this)}partial(e){const n={};return q.objectKeys(this.shape).forEach(r=>{const i=this.shape[r];e&&!e[r]?n[r]=i:n[r]=i.optional()}),new ce({...this._def,shape:()=>n})}required(e){const n={};return q.objectKeys(this.shape).forEach(r=>{if(e&&!e[r])n[r]=this.shape[r];else{let a=this.shape[r];for(;a instanceof Ut;)a=a._def.innerType;n[r]=a}}),new ce({...this._def,shape:()=>n})}keyof(){return ym(q.objectKeys(this.shape))}}ce.create=(t,e)=>new ce({shape:()=>t,unknownKeys:"strip",catchall:rn.create(),typeName:O.ZodObject,...V(e)});ce.strictCreate=(t,e)=>new ce({shape:()=>t,unknownKeys:"strict",catchall:rn.create(),typeName:O.ZodObject,...V(e)});ce.lazycreate=(t,e)=>new ce({shape:t,unknownKeys:"strip",catchall:rn.create(),typeName:O.ZodObject,...V(e)});class na extends Z{_parse(e){const{ctx:n}=this._processInputParams(e),r=this._def.options;function i(a){for(const o of a)if(o.result.status==="valid")return o.result;for(const o of a)if(o.result.status==="dirty")return n.common.issues.push(...o.ctx.common.issues),o.result;const s=a.map(o=>new at(o.ctx.common.issues));return N(n,{code:x.invalid_union,unionErrors:s}),H}if(n.common.async)return Promise.all(r.map(async a=>{const s={...n,common:{...n.common,issues:[]},parent:null};return{result:await a._parseAsync({data:n.data,path:n.path,parent:s}),ctx:s}})).then(i);{let a;const s=[];for(const u of r){const l={...n,common:{...n.common,issues:[]},parent:null},c=u._parseSync({data:n.data,path:n.path,parent:l});if(c.status==="valid")return c;c.status==="dirty"&&!a&&(a={result:c,ctx:l}),l.common.issues.length&&s.push(l.common.issues)}if(a)return n.common.issues.push(...a.ctx.common.issues),a.result;const o=s.map(u=>new at(u));return N(n,{code:x.invalid_union,unionErrors:o}),H}}get options(){return this._def.options}}na.create=(t,e)=>new na({options:t,typeName:O.ZodUnion,...V(e)});const Zt=t=>t instanceof aa?Zt(t.schema):t instanceof It?Zt(t.innerType()):t instanceof sa?[t.value]:t instanceof Pn?t.options:t instanceof oa?q.objectValues(t.enum):t instanceof ua?Zt(t._def.innerType):t instanceof ea?[void 0]:t instanceof ta?[null]:t instanceof Ut?[void 0,...Zt(t.unwrap())]:t instanceof Rn?[null,...Zt(t.unwrap())]:t instanceof hc||t instanceof ca?Zt(t.unwrap()):t instanceof la?Zt(t._def.innerType):[];class so extends Z{_parse(e){const{ctx:n}=this._processInputParams(e);if(n.parsedType!==A.object)return N(n,{code:x.invalid_type,expected:A.object,received:n.parsedType}),H;const r=this.discriminator,i=n.data[r],a=this.optionsMap.get(i);return a?n.common.async?a._parseAsync({data:n.data,path:n.path,parent:n}):a._parseSync({data:n.data,path:n.path,parent:n}):(N(n,{code:x.invalid_union_discriminator,options:Array.from(this.optionsMap.keys()),path:[r]}),H)}get discriminator(){return this._def.discriminator}get options(){return this._def.options}get optionsMap(){return this._def.optionsMap}static create(e,n,r){const i=new Map;for(const a of n){const s=Zt(a.shape[e]);if(!s.length)throw new Error(`A discriminator value for key \`${e}\` could not be extracted from all schema options`);for(const o of s){if(i.has(o))throw new Error(`Discriminator property ${String(e)} has duplicate value ${String(o)}`);i.set(o,a)}}return new so({typeName:O.ZodDiscriminatedUnion,discriminator:e,options:n,optionsMap:i,...V(r)})}}function hl(t,e){const n=pn(t),r=pn(e);if(t===e)return{valid:!0,data:t};if(n===A.object&&r===A.object){const i=q.objectKeys(e),a=q.objectKeys(t).filter(o=>i.indexOf(o)!==-1),s={...t,...e};for(const o of a){const u=hl(t[o],e[o]);if(!u.valid)return{valid:!1};s[o]=u.data}return{valid:!0,data:s}}else if(n===A.array&&r===A.array){if(t.length!==e.length)return{valid:!1};const i=[];for(let a=0;a<t.length;a++){const s=t[a],o=e[a],u=hl(s,o);if(!u.valid)return{valid:!1};i.push(u.data)}return{valid:!0,data:i}}else return n===A.date&&r===A.date&&+t==+e?{valid:!0,data:t}:{valid:!1}}class ra extends Z{_parse(e){const{status:n,ctx:r}=this._processInputParams(e),i=(a,s)=>{if(dl(a)||dl(s))return H;const o=hl(a.value,s.value);return o.valid?((fl(a)||fl(s))&&n.dirty(),{status:n.value,value:o.data}):(N(r,{code:x.invalid_intersection_types}),H)};return r.common.async?Promise.all([this._def.left._parseAsync({data:r.data,path:r.path,parent:r}),this._def.right._parseAsync({data:r.data,path:r.path,parent:r})]).then(([a,s])=>i(a,s)):i(this._def.left._parseSync({data:r.data,path:r.path,parent:r}),this._def.right._parseSync({data:r.data,path:r.path,parent:r}))}}ra.create=(t,e,n)=>new ra({left:t,right:e,typeName:O.ZodIntersection,...V(n)});class Ht extends Z{_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.parsedType!==A.array)return N(r,{code:x.invalid_type,expected:A.array,received:r.parsedType}),H;if(r.data.length<this._def.items.length)return N(r,{code:x.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),H;!this._def.rest&&r.data.length>this._def.items.length&&(N(r,{code:x.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),n.dirty());const a=[...r.data].map((s,o)=>{const u=this._def.items[o]||this._def.rest;return u?u._parse(new Bt(r,s,r.path,o)):null}).filter(s=>!!s);return r.common.async?Promise.all(a).then(s=>Le.mergeArray(n,s)):Le.mergeArray(n,a)}get items(){return this._def.items}rest(e){return new Ht({...this._def,rest:e})}}Ht.create=(t,e)=>{if(!Array.isArray(t))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new Ht({items:t,typeName:O.ZodTuple,rest:null,...V(e)})};class ia extends Z{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.parsedType!==A.object)return N(r,{code:x.invalid_type,expected:A.object,received:r.parsedType}),H;const i=[],a=this._def.keyType,s=this._def.valueType;for(const o in r.data)i.push({key:a._parse(new Bt(r,o,r.path,o)),value:s._parse(new Bt(r,r.data[o],r.path,o)),alwaysSet:o in r.data});return r.common.async?Le.mergeObjectAsync(n,i):Le.mergeObjectSync(n,i)}get element(){return this._def.valueType}static create(e,n,r){return n instanceof Z?new ia({keyType:e,valueType:n,typeName:O.ZodRecord,...V(r)}):new ia({keyType:xt.create(),valueType:e,typeName:O.ZodRecord,...V(n)})}}class Ls extends Z{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.parsedType!==A.map)return N(r,{code:x.invalid_type,expected:A.map,received:r.parsedType}),H;const i=this._def.keyType,a=this._def.valueType,s=[...r.data.entries()].map(([o,u],l)=>({key:i._parse(new Bt(r,o,r.path,[l,"key"])),value:a._parse(new Bt(r,u,r.path,[l,"value"]))}));if(r.common.async){const o=new Map;return Promise.resolve().then(async()=>{for(const u of s){const l=await u.key,c=await u.value;if(l.status==="aborted"||c.status==="aborted")return H;(l.status==="dirty"||c.status==="dirty")&&n.dirty(),o.set(l.value,c.value)}return{status:n.value,value:o}})}else{const o=new Map;for(const u of s){const l=u.key,c=u.value;if(l.status==="aborted"||c.status==="aborted")return H;(l.status==="dirty"||c.status==="dirty")&&n.dirty(),o.set(l.value,c.value)}return{status:n.value,value:o}}}}Ls.create=(t,e,n)=>new Ls({valueType:e,keyType:t,typeName:O.ZodMap,...V(n)});class ir extends Z{_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.parsedType!==A.set)return N(r,{code:x.invalid_type,expected:A.set,received:r.parsedType}),H;const i=this._def;i.minSize!==null&&r.data.size<i.minSize.value&&(N(r,{code:x.too_small,minimum:i.minSize.value,type:"set",inclusive:!0,exact:!1,message:i.minSize.message}),n.dirty()),i.maxSize!==null&&r.data.size>i.maxSize.value&&(N(r,{code:x.too_big,maximum:i.maxSize.value,type:"set",inclusive:!0,exact:!1,message:i.maxSize.message}),n.dirty());const a=this._def.valueType;function s(u){const l=new Set;for(const c of u){if(c.status==="aborted")return H;c.status==="dirty"&&n.dirty(),l.add(c.value)}return{status:n.value,value:l}}const o=[...r.data.values()].map((u,l)=>a._parse(new Bt(r,u,r.path,l)));return r.common.async?Promise.all(o).then(u=>s(u)):s(o)}min(e,n){return new ir({...this._def,minSize:{value:e,message:M.toString(n)}})}max(e,n){return new ir({...this._def,maxSize:{value:e,message:M.toString(n)}})}size(e,n){return this.min(e,n).max(e,n)}nonempty(e){return this.min(1,e)}}ir.create=(t,e)=>new ir({valueType:t,minSize:null,maxSize:null,typeName:O.ZodSet,...V(e)});class Dr extends Z{constructor(){super(...arguments),this.validate=this.implement}_parse(e){const{ctx:n}=this._processInputParams(e);if(n.parsedType!==A.function)return N(n,{code:x.invalid_type,expected:A.function,received:n.parsedType}),H;function r(o,u){return Is({data:o,path:n.path,errorMaps:[n.common.contextualErrorMap,n.schemaErrorMap,Rs(),Zr].filter(l=>!!l),issueData:{code:x.invalid_arguments,argumentsError:u}})}function i(o,u){return Is({data:o,path:n.path,errorMaps:[n.common.contextualErrorMap,n.schemaErrorMap,Rs(),Zr].filter(l=>!!l),issueData:{code:x.invalid_return_type,returnTypeError:u}})}const a={errorMap:n.common.contextualErrorMap},s=n.data;if(this._def.returns instanceof Wr){const o=this;return Fe(async function(...u){const l=new at([]),c=await o._def.args.parseAsync(u,a).catch(h=>{throw l.addIssue(r(u,h)),l}),d=await Reflect.apply(s,this,c);return await o._def.returns._def.type.parseAsync(d,a).catch(h=>{throw l.addIssue(i(d,h)),l})})}else{const o=this;return Fe(function(...u){const l=o._def.args.safeParse(u,a);if(!l.success)throw new at([r(u,l.error)]);const c=Reflect.apply(s,this,l.data),d=o._def.returns.safeParse(c,a);if(!d.success)throw new at([i(c,d.error)]);return d.data})}}parameters(){return this._def.args}returnType(){return this._def.returns}args(...e){return new Dr({...this._def,args:Ht.create(e).rest(Qn.create())})}returns(e){return new Dr({...this._def,returns:e})}implement(e){return this.parse(e)}strictImplement(e){return this.parse(e)}static create(e,n,r){return new Dr({args:e||Ht.create([]).rest(Qn.create()),returns:n||Qn.create(),typeName:O.ZodFunction,...V(r)})}}class aa extends Z{get schema(){return this._def.getter()}_parse(e){const{ctx:n}=this._processInputParams(e);return this._def.getter()._parse({data:n.data,path:n.path,parent:n})}}aa.create=(t,e)=>new aa({getter:t,typeName:O.ZodLazy,...V(e)});class sa extends Z{_parse(e){if(e.data!==this._def.value){const n=this._getOrReturnCtx(e);return N(n,{received:n.data,code:x.invalid_literal,expected:this._def.value}),H}return{status:"valid",value:e.data}}get value(){return this._def.value}}sa.create=(t,e)=>new sa({value:t,typeName:O.ZodLiteral,...V(e)});function ym(t,e){return new Pn({values:t,typeName:O.ZodEnum,...V(e)})}class Pn extends Z{constructor(){super(...arguments),wi.set(this,void 0)}_parse(e){if(typeof e.data!="string"){const n=this._getOrReturnCtx(e),r=this._def.values;return N(n,{expected:q.joinValues(r),received:n.parsedType,code:x.invalid_type}),H}if(Ns(this,wi,"f")||hm(this,wi,new Set(this._def.values),"f"),!Ns(this,wi,"f").has(e.data)){const n=this._getOrReturnCtx(e),r=this._def.values;return N(n,{received:n.data,code:x.invalid_enum_value,options:r}),H}return Fe(e.data)}get options(){return this._def.values}get enum(){const e={};for(const n of this._def.values)e[n]=n;return e}get Values(){const e={};for(const n of this._def.values)e[n]=n;return e}get Enum(){const e={};for(const n of this._def.values)e[n]=n;return e}extract(e,n=this._def){return Pn.create(e,{...this._def,...n})}exclude(e,n=this._def){return Pn.create(this.options.filter(r=>!e.includes(r)),{...this._def,...n})}}wi=new WeakMap;Pn.create=ym;class oa extends Z{constructor(){super(...arguments),bi.set(this,void 0)}_parse(e){const n=q.getValidEnumValues(this._def.values),r=this._getOrReturnCtx(e);if(r.parsedType!==A.string&&r.parsedType!==A.number){const i=q.objectValues(n);return N(r,{expected:q.joinValues(i),received:r.parsedType,code:x.invalid_type}),H}if(Ns(this,bi,"f")||hm(this,bi,new Set(q.getValidEnumValues(this._def.values)),"f"),!Ns(this,bi,"f").has(e.data)){const i=q.objectValues(n);return N(r,{received:r.data,code:x.invalid_enum_value,options:i}),H}return Fe(e.data)}get enum(){return this._def.values}}bi=new WeakMap;oa.create=(t,e)=>new oa({values:t,typeName:O.ZodNativeEnum,...V(e)});class Wr extends Z{unwrap(){return this._def.type}_parse(e){const{ctx:n}=this._processInputParams(e);if(n.parsedType!==A.promise&&n.common.async===!1)return N(n,{code:x.invalid_type,expected:A.promise,received:n.parsedType}),H;const r=n.parsedType===A.promise?n.data:Promise.resolve(n.data);return Fe(r.then(i=>this._def.type.parseAsync(i,{path:n.path,errorMap:n.common.contextualErrorMap})))}}Wr.create=(t,e)=>new Wr({type:t,typeName:O.ZodPromise,...V(e)});class It extends Z{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===O.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(e){const{status:n,ctx:r}=this._processInputParams(e),i=this._def.effect||null,a={addIssue:s=>{N(r,s),s.fatal?n.abort():n.dirty()},get path(){return r.path}};if(a.addIssue=a.addIssue.bind(a),i.type==="preprocess"){const s=i.transform(r.data,a);if(r.common.async)return Promise.resolve(s).then(async o=>{if(n.value==="aborted")return H;const u=await this._def.schema._parseAsync({data:o,path:r.path,parent:r});return u.status==="aborted"?H:u.status==="dirty"||n.value==="dirty"?Cr(u.value):u});{if(n.value==="aborted")return H;const o=this._def.schema._parseSync({data:s,path:r.path,parent:r});return o.status==="aborted"?H:o.status==="dirty"||n.value==="dirty"?Cr(o.value):o}}if(i.type==="refinement"){const s=o=>{const u=i.refinement(o,a);if(r.common.async)return Promise.resolve(u);if(u instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return o};if(r.common.async===!1){const o=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});return o.status==="aborted"?H:(o.status==="dirty"&&n.dirty(),s(o.value),{status:n.value,value:o.value})}else return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(o=>o.status==="aborted"?H:(o.status==="dirty"&&n.dirty(),s(o.value).then(()=>({status:n.value,value:o.value}))))}if(i.type==="transform")if(r.common.async===!1){const s=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});if(!Ki(s))return s;const o=i.transform(s.value,a);if(o instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:n.value,value:o}}else return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(s=>Ki(s)?Promise.resolve(i.transform(s.value,a)).then(o=>({status:n.value,value:o})):s);q.assertNever(i)}}It.create=(t,e,n)=>new It({schema:t,typeName:O.ZodEffects,effect:e,...V(n)});It.createWithPreprocess=(t,e,n)=>new It({schema:e,effect:{type:"preprocess",transform:t},typeName:O.ZodEffects,...V(n)});class Ut extends Z{_parse(e){return this._getType(e)===A.undefined?Fe(void 0):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}Ut.create=(t,e)=>new Ut({innerType:t,typeName:O.ZodOptional,...V(e)});class Rn extends Z{_parse(e){return this._getType(e)===A.null?Fe(null):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}Rn.create=(t,e)=>new Rn({innerType:t,typeName:O.ZodNullable,...V(e)});class ua extends Z{_parse(e){const{ctx:n}=this._processInputParams(e);let r=n.data;return n.parsedType===A.undefined&&(r=this._def.defaultValue()),this._def.innerType._parse({data:r,path:n.path,parent:n})}removeDefault(){return this._def.innerType}}ua.create=(t,e)=>new ua({innerType:t,typeName:O.ZodDefault,defaultValue:typeof e.default=="function"?e.default:()=>e.default,...V(e)});class la extends Z{_parse(e){const{ctx:n}=this._processInputParams(e),r={...n,common:{...n.common,issues:[]}},i=this._def.innerType._parse({data:r.data,path:r.path,parent:{...r}});return Xi(i)?i.then(a=>({status:"valid",value:a.status==="valid"?a.value:this._def.catchValue({get error(){return new at(r.common.issues)},input:r.data})})):{status:"valid",value:i.status==="valid"?i.value:this._def.catchValue({get error(){return new at(r.common.issues)},input:r.data})}}removeCatch(){return this._def.innerType}}la.create=(t,e)=>new la({innerType:t,typeName:O.ZodCatch,catchValue:typeof e.catch=="function"?e.catch:()=>e.catch,...V(e)});class js extends Z{_parse(e){if(this._getType(e)!==A.nan){const r=this._getOrReturnCtx(e);return N(r,{code:x.invalid_type,expected:A.nan,received:r.parsedType}),H}return{status:"valid",value:e.data}}}js.create=t=>new js({typeName:O.ZodNaN,...V(t)});const Qv=Symbol("zod_brand");class hc extends Z{_parse(e){const{ctx:n}=this._processInputParams(e),r=n.data;return this._def.type._parse({data:r,path:n.path,parent:n})}unwrap(){return this._def.type}}class _a extends Z{_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.common.async)return(async()=>{const a=await this._def.in._parseAsync({data:r.data,path:r.path,parent:r});return a.status==="aborted"?H:a.status==="dirty"?(n.dirty(),Cr(a.value)):this._def.out._parseAsync({data:a.value,path:r.path,parent:r})})();{const i=this._def.in._parseSync({data:r.data,path:r.path,parent:r});return i.status==="aborted"?H:i.status==="dirty"?(n.dirty(),{status:"dirty",value:i.value}):this._def.out._parseSync({data:i.value,path:r.path,parent:r})}}static create(e,n){return new _a({in:e,out:n,typeName:O.ZodPipeline})}}class ca extends Z{_parse(e){const n=this._def.innerType._parse(e),r=i=>(Ki(i)&&(i.value=Object.freeze(i.value)),i);return Xi(n)?n.then(i=>r(i)):r(n)}unwrap(){return this._def.innerType}}ca.create=(t,e)=>new ca({innerType:t,typeName:O.ZodReadonly,...V(e)});function vm(t,e={},n){return t?Gr.create().superRefine((r,i)=>{var a,s;if(!t(r)){const o=typeof e=="function"?e(r):typeof e=="string"?{message:e}:e,u=(s=(a=o.fatal)!==null&&a!==void 0?a:n)!==null&&s!==void 0?s:!0,l=typeof o=="string"?{message:o}:o;i.addIssue({code:"custom",...l,fatal:u})}}):Gr.create()}const qv={object:ce.lazycreate};var O;(function(t){t.ZodString="ZodString",t.ZodNumber="ZodNumber",t.ZodNaN="ZodNaN",t.ZodBigInt="ZodBigInt",t.ZodBoolean="ZodBoolean",t.ZodDate="ZodDate",t.ZodSymbol="ZodSymbol",t.ZodUndefined="ZodUndefined",t.ZodNull="ZodNull",t.ZodAny="ZodAny",t.ZodUnknown="ZodUnknown",t.ZodNever="ZodNever",t.ZodVoid="ZodVoid",t.ZodArray="ZodArray",t.ZodObject="ZodObject",t.ZodUnion="ZodUnion",t.ZodDiscriminatedUnion="ZodDiscriminatedUnion",t.ZodIntersection="ZodIntersection",t.ZodTuple="ZodTuple",t.ZodRecord="ZodRecord",t.ZodMap="ZodMap",t.ZodSet="ZodSet",t.ZodFunction="ZodFunction",t.ZodLazy="ZodLazy",t.ZodLiteral="ZodLiteral",t.ZodEnum="ZodEnum",t.ZodEffects="ZodEffects",t.ZodNativeEnum="ZodNativeEnum",t.ZodOptional="ZodOptional",t.ZodNullable="ZodNullable",t.ZodDefault="ZodDefault",t.ZodCatch="ZodCatch",t.ZodPromise="ZodPromise",t.ZodBranded="ZodBranded",t.ZodPipeline="ZodPipeline",t.ZodReadonly="ZodReadonly"})(O||(O={}));const Kv=(t,e={message:`Input not instance of ${t.name}`})=>vm(n=>n instanceof t,e),_m=xt.create,wm=On.create,Xv=js.create,Yv=Cn.create,bm=Yi.create,e_=rr.create,t_=$s.create,n_=ea.create,r_=ta.create,i_=Gr.create,a_=Qn.create,s_=rn.create,o_=As.create,u_=Pt.create,l_=ce.create,c_=ce.strictCreate,d_=na.create,f_=so.create,h_=ra.create,p_=Ht.create,m_=ia.create,g_=Ls.create,y_=ir.create,v_=Dr.create,__=aa.create,w_=sa.create,b_=Pn.create,E_=oa.create,S_=Wr.create,rf=It.create,k_=Ut.create,T_=Rn.create,x_=It.createWithPreprocess,O_=_a.create,C_=()=>_m().optional(),P_=()=>wm().optional(),R_=()=>bm().optional(),I_={string:t=>xt.create({...t,coerce:!0}),number:t=>On.create({...t,coerce:!0}),boolean:t=>Yi.create({...t,coerce:!0}),bigint:t=>Cn.create({...t,coerce:!0}),date:t=>rr.create({...t,coerce:!0})},N_=H;var Ii=Object.freeze({__proto__:null,defaultErrorMap:Zr,setErrorMap:Nv,getErrorMap:Rs,makeIssue:Is,EMPTY_PATH:$v,addIssueToContext:N,ParseStatus:Le,INVALID:H,DIRTY:Cr,OK:Fe,isAborted:dl,isDirty:fl,isValid:Ki,isAsync:Xi,get util(){return q},get objectUtil(){return cl},ZodParsedType:A,getParsedType:pn,ZodType:Z,datetimeRegex:gm,ZodString:xt,ZodNumber:On,ZodBigInt:Cn,ZodBoolean:Yi,ZodDate:rr,ZodSymbol:$s,ZodUndefined:ea,ZodNull:ta,ZodAny:Gr,ZodUnknown:Qn,ZodNever:rn,ZodVoid:As,ZodArray:Pt,ZodObject:ce,ZodUnion:na,ZodDiscriminatedUnion:so,ZodIntersection:ra,ZodTuple:Ht,ZodRecord:ia,ZodMap:Ls,ZodSet:ir,ZodFunction:Dr,ZodLazy:aa,ZodLiteral:sa,ZodEnum:Pn,ZodNativeEnum:oa,ZodPromise:Wr,ZodEffects:It,ZodTransformer:It,ZodOptional:Ut,ZodNullable:Rn,ZodDefault:ua,ZodCatch:la,ZodNaN:js,BRAND:Qv,ZodBranded:hc,ZodPipeline:_a,ZodReadonly:ca,custom:vm,Schema:Z,ZodSchema:Z,late:qv,get ZodFirstPartyTypeKind(){return O},coerce:I_,any:i_,array:u_,bigint:Yv,boolean:bm,date:e_,discriminatedUnion:f_,effect:rf,enum:b_,function:v_,instanceof:Kv,intersection:h_,lazy:__,literal:w_,map:g_,nan:Xv,nativeEnum:E_,never:s_,null:r_,nullable:T_,number:wm,object:l_,oboolean:R_,onumber:P_,optional:k_,ostring:C_,pipeline:O_,preprocess:x_,promise:S_,record:m_,set:y_,strictObject:c_,string:_m,symbol:t_,transformer:rf,tuple:p_,undefined:n_,union:d_,unknown:a_,void:o_,NEVER:N_,ZodIssueCode:x,quotelessJson:Iv,ZodError:at}),ar={exports:{}},Em={exports:{}},Sm={};function gt(t,e){typeof e=="boolean"&&(e={forever:e}),this._originalTimeouts=JSON.parse(JSON.stringify(t)),this._timeouts=t,this._options=e||{},this._maxRetryTime=e&&e.maxRetryTime||1/0,this._fn=null,this._errors=[],this._attempts=1,this._operationTimeout=null,this._operationTimeoutCb=null,this._timeout=null,this._operationStart=null,this._timer=null,this._options.forever&&(this._cachedTimeouts=this._timeouts.slice(0))}var $_=gt;gt.prototype.reset=function(){this._attempts=1,this._timeouts=this._originalTimeouts.slice(0)};gt.prototype.stop=function(){this._timeout&&clearTimeout(this._timeout),this._timer&&clearTimeout(this._timer),this._timeouts=[],this._cachedTimeouts=null};gt.prototype.retry=function(t){if(this._timeout&&clearTimeout(this._timeout),!t)return!1;var e=new Date().getTime();if(t&&e-this._operationStart>=this._maxRetryTime)return this._errors.push(t),this._errors.unshift(new Error("RetryOperation timeout occurred")),!1;this._errors.push(t);var n=this._timeouts.shift();if(n===void 0)if(this._cachedTimeouts)this._errors.splice(0,this._errors.length-1),n=this._cachedTimeouts.slice(-1);else return!1;var r=this;return this._timer=setTimeout(function(){r._attempts++,r._operationTimeoutCb&&(r._timeout=setTimeout(function(){r._operationTimeoutCb(r._attempts)},r._operationTimeout),r._options.unref&&r._timeout.unref()),r._fn(r._attempts)},n),this._options.unref&&this._timer.unref(),!0};gt.prototype.attempt=function(t,e){this._fn=t,e&&(e.timeout&&(this._operationTimeout=e.timeout),e.cb&&(this._operationTimeoutCb=e.cb));var n=this;this._operationTimeoutCb&&(this._timeout=setTimeout(function(){n._operationTimeoutCb()},n._operationTimeout)),this._operationStart=new Date().getTime(),this._fn(this._attempts)};gt.prototype.try=function(t){console.log("Using RetryOperation.try() is deprecated"),this.attempt(t)};gt.prototype.start=function(t){console.log("Using RetryOperation.start() is deprecated"),this.attempt(t)};gt.prototype.start=gt.prototype.try;gt.prototype.errors=function(){return this._errors};gt.prototype.attempts=function(){return this._attempts};gt.prototype.mainError=function(){if(this._errors.length===0)return null;for(var t={},e=null,n=0,r=0;r<this._errors.length;r++){var i=this._errors[r],a=i.message,s=(t[a]||0)+1;t[a]=s,s>=n&&(e=i,n=s)}return e};(function(t){var e=$_;t.operation=function(n){var r=t.timeouts(n);return new e(r,{forever:n&&(n.forever||n.retries===1/0),unref:n&&n.unref,maxRetryTime:n&&n.maxRetryTime})},t.timeouts=function(n){if(n instanceof Array)return[].concat(n);var r={retries:10,factor:2,minTimeout:1*1e3,maxTimeout:1/0,randomize:!1};for(var i in n)r[i]=n[i];if(r.minTimeout>r.maxTimeout)throw new Error("minTimeout is greater than maxTimeout");for(var a=[],s=0;s<r.retries;s++)a.push(this.createTimeout(s,r));return n&&n.forever&&!a.length&&a.push(this.createTimeout(s,r)),a.sort(function(o,u){return o-u}),a},t.createTimeout=function(n,r){var i=r.randomize?Math.random()+1:1,a=Math.round(i*Math.max(r.minTimeout,1)*Math.pow(r.factor,n));return a=Math.min(a,r.maxTimeout),a},t.wrap=function(n,r,i){if(r instanceof Array&&(i=r,r=null),!i){i=[];for(var a in n)typeof n[a]=="function"&&i.push(a)}for(var s=0;s<i.length;s++){var o=i[s],u=n[o];n[o]=function(c){var d=t.operation(r),f=Array.prototype.slice.call(arguments,1),h=f.pop();f.push(function(p){d.retry(p)||(p&&(arguments[0]=d.mainError()),h.apply(this,arguments))}),d.attempt(function(){c.apply(n,f)})}.bind(n,u),n[o].options=r}}})(Sm);(function(t){t.exports=Sm})(Em);const A_=Em.exports,L_=["Failed to fetch","NetworkError when attempting to fetch resource.","The Internet connection appears to be offline.","Network request failed"];class km extends Error{constructor(e){super(),e instanceof Error?(this.originalError=e,{message:e}=e):(this.originalError=new Error(e),this.originalError.stack=this.stack),this.name="AbortError",this.message=e}}const j_=(t,e,n)=>{const r=n.retries-(e-1);return t.attemptNumber=e,t.retriesLeft=r,t},D_=t=>L_.includes(t),Tm=(t,e)=>new Promise((n,r)=>{e={onFailedAttempt:()=>{},retries:10,...e};const i=A_.operation(e);i.attempt(async a=>{try{n(await t(a))}catch(s){if(!(s instanceof Error)){r(new TypeError(`Non-error was thrown: "${s}". You should only throw errors.`));return}if(s instanceof km)i.stop(),r(s.originalError);else if(s instanceof TypeError&&!D_(s.message))i.stop(),r(s);else{j_(s,a,e);try{await e.onFailedAttempt(s)}catch(o){r(o);return}i.retry(s)||r(i.mainError())}}})});ar.exports=Tm;ar.exports.default=Tm;ar.exports.AbortError=km;const M_=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-8][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000|ffffffff-ffff-ffff-ffff-ffffffffffff)$/i;function Ni(t){return typeof t=="string"&&M_.test(t)}var Te=[];for(var Qo=0;Qo<256;++Qo)Te.push((Qo+256).toString(16).slice(1));function U_(t,e=0){return(Te[t[e+0]]+Te[t[e+1]]+Te[t[e+2]]+Te[t[e+3]]+"-"+Te[t[e+4]]+Te[t[e+5]]+"-"+Te[t[e+6]]+Te[t[e+7]]+"-"+Te[t[e+8]]+Te[t[e+9]]+"-"+Te[t[e+10]]+Te[t[e+11]]+Te[t[e+12]]+Te[t[e+13]]+Te[t[e+14]]+Te[t[e+15]]).toLowerCase()}var za,F_=new Uint8Array(16);function z_(){if(!za&&(za=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!za))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return za(F_)}var B_=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto);const af={randomUUID:B_};function nt(t,e,n){if(af.randomUUID&&!e&&!t)return af.randomUUID();t=t||{};var r=t.random||(t.rng||z_)();if(r[6]=r[6]&15|64,r[8]=r[8]&63|128,e){n=n||0;for(var i=0;i<16;++i)e[n+i]=r[i];return e}return U_(r)}var xm={},Om={exports:{}};(function(t){var e=Object.prototype.hasOwnProperty,n="~";function r(){}Object.create&&(r.prototype=Object.create(null),new r().__proto__||(n=!1));function i(u,l,c){this.fn=u,this.context=l,this.once=c||!1}function a(u,l,c,d,f){if(typeof c!="function")throw new TypeError("The listener must be a function");var h=new i(c,d||u,f),p=n?n+l:l;return u._events[p]?u._events[p].fn?u._events[p]=[u._events[p],h]:u._events[p].push(h):(u._events[p]=h,u._eventsCount++),u}function s(u,l){--u._eventsCount===0?u._events=new r:delete u._events[l]}function o(){this._events=new r,this._eventsCount=0}o.prototype.eventNames=function(){var l=[],c,d;if(this._eventsCount===0)return l;for(d in c=this._events)e.call(c,d)&&l.push(n?d.slice(1):d);return Object.getOwnPropertySymbols?l.concat(Object.getOwnPropertySymbols(c)):l},o.prototype.listeners=function(l){var c=n?n+l:l,d=this._events[c];if(!d)return[];if(d.fn)return[d.fn];for(var f=0,h=d.length,p=new Array(h);f<h;f++)p[f]=d[f].fn;return p},o.prototype.listenerCount=function(l){var c=n?n+l:l,d=this._events[c];return d?d.fn?1:d.length:0},o.prototype.emit=function(l,c,d,f,h,p){var v=n?n+l:l;if(!this._events[v])return!1;var _=this._events[v],m=arguments.length,g,y;if(_.fn){switch(_.once&&this.removeListener(l,_.fn,void 0,!0),m){case 1:return _.fn.call(_.context),!0;case 2:return _.fn.call(_.context,c),!0;case 3:return _.fn.call(_.context,c,d),!0;case 4:return _.fn.call(_.context,c,d,f),!0;case 5:return _.fn.call(_.context,c,d,f,h),!0;case 6:return _.fn.call(_.context,c,d,f,h,p),!0}for(y=1,g=new Array(m-1);y<m;y++)g[y-1]=arguments[y];_.fn.apply(_.context,g)}else{var w=_.length,E;for(y=0;y<w;y++)switch(_[y].once&&this.removeListener(l,_[y].fn,void 0,!0),m){case 1:_[y].fn.call(_[y].context);break;case 2:_[y].fn.call(_[y].context,c);break;case 3:_[y].fn.call(_[y].context,c,d);break;case 4:_[y].fn.call(_[y].context,c,d,f);break;default:if(!g)for(E=1,g=new Array(m-1);E<m;E++)g[E-1]=arguments[E];_[y].fn.apply(_[y].context,g)}}return!0},o.prototype.on=function(l,c,d){return a(this,l,c,d,!1)},o.prototype.once=function(l,c,d){return a(this,l,c,d,!0)},o.prototype.removeListener=function(l,c,d,f){var h=n?n+l:l;if(!this._events[h])return this;if(!c)return s(this,h),this;var p=this._events[h];if(p.fn)p.fn===c&&(!f||p.once)&&(!d||p.context===d)&&s(this,h);else{for(var v=0,_=[],m=p.length;v<m;v++)(p[v].fn!==c||f&&!p[v].once||d&&p[v].context!==d)&&_.push(p[v]);_.length?this._events[h]=_.length===1?_[0]:_:s(this,h)}return this},o.prototype.removeAllListeners=function(l){var c;return l?(c=n?n+l:l,this._events[c]&&s(this,c)):(this._events=new r,this._eventsCount=0),this},o.prototype.off=o.prototype.removeListener,o.prototype.addListener=o.prototype.on,o.prefixed=n,o.EventEmitter=o,t.exports=o})(Om);var oo={exports:{}},H_=(t,e)=>(e=e||(()=>{}),t.then(n=>new Promise(r=>{r(e())}).then(()=>n),n=>new Promise(r=>{r(e())}).then(()=>{throw n})));const V_=H_;class Cm extends Error{constructor(e){super(e),this.name="TimeoutError"}}const Pm=(t,e,n)=>new Promise((r,i)=>{if(typeof e!="number"||e<0)throw new TypeError("Expected `milliseconds` to be a positive number");if(e===1/0){r(t);return}const a=setTimeout(()=>{if(typeof n=="function"){try{r(n())}catch(u){i(u)}return}const s=typeof n=="string"?n:`Promise timed out after ${e} milliseconds`,o=n instanceof Error?n:new Cm(s);typeof t.cancel=="function"&&t.cancel(),i(o)},e);V_(t.then(r,i),()=>{clearTimeout(a)})});oo.exports=Pm;oo.exports.default=Pm;oo.exports.TimeoutError=Cm;var pc={},mc={};Object.defineProperty(mc,"__esModule",{value:!0});function Z_(t,e,n){let r=0,i=t.length;for(;i>0;){const a=i/2|0;let s=r+a;n(t[s],e)<=0?(r=++s,i-=a+1):i=a}return r}mc.default=Z_;Object.defineProperty(pc,"__esModule",{value:!0});const G_=mc;class W_{constructor(){this._queue=[]}enqueue(e,n){n=Object.assign({priority:0},n);const r={priority:n.priority,run:e};if(this.size&&this._queue[this.size-1].priority>=n.priority){this._queue.push(r);return}const i=G_.default(this._queue,r,(a,s)=>s.priority-a.priority);this._queue.splice(i,0,r)}dequeue(){const e=this._queue.shift();return e==null?void 0:e.run}filter(e){return this._queue.filter(n=>n.priority===e.priority).map(n=>n.run)}get size(){return this._queue.length}}pc.default=W_;Object.defineProperty(xm,"__esModule",{value:!0});const J_=Om.exports,Rm=oo.exports,Q_=pc,Ba=()=>{},q_=new Rm.TimeoutError;class K_ extends J_{constructor(e){var n,r,i,a;if(super(),this._intervalCount=0,this._intervalEnd=0,this._pendingCount=0,this._resolveEmpty=Ba,this._resolveIdle=Ba,e=Object.assign({carryoverConcurrencyCount:!1,intervalCap:1/0,interval:0,concurrency:1/0,autoStart:!0,queueClass:Q_.default},e),!(typeof e.intervalCap=="number"&&e.intervalCap>=1))throw new TypeError(`Expected \`intervalCap\` to be a number from 1 and up, got \`${(r=(n=e.intervalCap)===null||n===void 0?void 0:n.toString())!==null&&r!==void 0?r:""}\` (${typeof e.intervalCap})`);if(e.interval===void 0||!(Number.isFinite(e.interval)&&e.interval>=0))throw new TypeError(`Expected \`interval\` to be a finite number >= 0, got \`${(a=(i=e.interval)===null||i===void 0?void 0:i.toString())!==null&&a!==void 0?a:""}\` (${typeof e.interval})`);this._carryoverConcurrencyCount=e.carryoverConcurrencyCount,this._isIntervalIgnored=e.intervalCap===1/0||e.interval===0,this._intervalCap=e.intervalCap,this._interval=e.interval,this._queue=new e.queueClass,this._queueClass=e.queueClass,this.concurrency=e.concurrency,this._timeout=e.timeout,this._throwOnTimeout=e.throwOnTimeout===!0,this._isPaused=e.autoStart===!1}get _doesIntervalAllowAnother(){return this._isIntervalIgnored||this._intervalCount<this._intervalCap}get _doesConcurrentAllowAnother(){return this._pendingCount<this._concurrency}_next(){this._pendingCount--,this._tryToStartAnother(),this.emit("next")}_resolvePromises(){this._resolveEmpty(),this._resolveEmpty=Ba,this._pendingCount===0&&(this._resolveIdle(),this._resolveIdle=Ba,this.emit("idle"))}_onResumeInterval(){this._onInterval(),this._initializeIntervalIfNeeded(),this._timeoutId=void 0}_isIntervalPaused(){const e=Date.now();if(this._intervalId===void 0){const n=this._intervalEnd-e;if(n<0)this._intervalCount=this._carryoverConcurrencyCount?this._pendingCount:0;else return this._timeoutId===void 0&&(this._timeoutId=setTimeout(()=>{this._onResumeInterval()},n)),!0}return!1}_tryToStartAnother(){if(this._queue.size===0)return this._intervalId&&clearInterval(this._intervalId),this._intervalId=void 0,this._resolvePromises(),!1;if(!this._isPaused){const e=!this._isIntervalPaused();if(this._doesIntervalAllowAnother&&this._doesConcurrentAllowAnother){const n=this._queue.dequeue();return n?(this.emit("active"),n(),e&&this._initializeIntervalIfNeeded(),!0):!1}}return!1}_initializeIntervalIfNeeded(){this._isIntervalIgnored||this._intervalId!==void 0||(this._intervalId=setInterval(()=>{this._onInterval()},this._interval),this._intervalEnd=Date.now()+this._interval)}_onInterval(){this._intervalCount===0&&this._pendingCount===0&&this._intervalId&&(clearInterval(this._intervalId),this._intervalId=void 0),this._intervalCount=this._carryoverConcurrencyCount?this._pendingCount:0,this._processQueue()}_processQueue(){for(;this._tryToStartAnother(););}get concurrency(){return this._concurrency}set concurrency(e){if(!(typeof e=="number"&&e>=1))throw new TypeError(`Expected \`concurrency\` to be a number from 1 and up, got \`${e}\` (${typeof e})`);this._concurrency=e,this._processQueue()}async add(e,n={}){return new Promise((r,i)=>{const a=async()=>{this._pendingCount++,this._intervalCount++;try{const s=this._timeout===void 0&&n.timeout===void 0?e():Rm.default(Promise.resolve(e()),n.timeout===void 0?this._timeout:n.timeout,()=>{(n.throwOnTimeout===void 0?this._throwOnTimeout:n.throwOnTimeout)&&i(q_)});r(await s)}catch(s){i(s)}this._next()};this._queue.enqueue(a,n),this._tryToStartAnother(),this.emit("add")})}async addAll(e,n){return Promise.all(e.map(async r=>this.add(r,n)))}start(){return this._isPaused?(this._isPaused=!1,this._processQueue(),this):this}pause(){this._isPaused=!0}clear(){this._queue=new this._queueClass}async onEmpty(){if(this._queue.size!==0)return new Promise(e=>{const n=this._resolveEmpty;this._resolveEmpty=()=>{n(),e()}})}async onIdle(){if(!(this._pendingCount===0&&this._queue.size===0))return new Promise(e=>{const n=this._resolveIdle;this._resolveIdle=()=>{n(),e()}})}get size(){return this._queue.size}sizeBy(e){return this._queue.filter(e).length}get pending(){return this._pendingCount}get isPaused(){return this._isPaused}get timeout(){return this._timeout}set timeout(e){this._timeout=e}}var Xt=xm.default=K_;const X_=(...t)=>fetch(...t),Y_=Symbol.for("ls:fetch_implementation"),z=()=>{var t;return(t=globalThis[Y_])!=null?t:X_},ew=[400,401,403,404,405,406,407,408],tw=[409];class sf{constructor(e){var n,r;Object.defineProperty(this,"maxConcurrency",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"maxRetries",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"queue",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"onFailedResponseHook",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.maxConcurrency=(n=e.maxConcurrency)!=null?n:1/0,this.maxRetries=(r=e.maxRetries)!=null?r:6,"default"in Xt?this.queue=new Xt.default({concurrency:this.maxConcurrency}):this.queue=new Xt({concurrency:this.maxConcurrency}),this.onFailedResponseHook=e==null?void 0:e.onFailedResponseHook}call(e,...n){const r=this.onFailedResponseHook;return this.queue.add(()=>ar.exports(()=>e(...n).catch(i=>{throw i instanceof Error?i:new Error(i)}),{async onFailedAttempt(i){if(i.message.startsWith("Cancel")||i.message.startsWith("TimeoutError")||i.message.startsWith("AbortError")||(i==null?void 0:i.code)==="ECONNABORTED")throw i;const a=i==null?void 0:i.response,s=a==null?void 0:a.status;if(s){if(ew.includes(+s))throw i;if(tw.includes(+s))return;r&&await r(a)}},retries:this.maxRetries,randomize:!0}),{throwOnTimeout:!0})}callWithOptions(e,n,...r){return e.signal?Promise.race([this.call(n,...r),new Promise((i,a)=>{var s;(s=e.signal)==null||s.addEventListener("abort",()=>{a(new Error("AbortError"))})})]):this.call(n,...r)}fetch(...e){return this.call(()=>z()(...e).then(n=>n.ok?n:Promise.reject(n)))}}function of(t){return typeof(t==null?void 0:t._getType)=="function"}function uf(t){const e={type:t._getType(),data:{content:t.content}};return(t==null?void 0:t.additional_kwargs)&&Object.keys(t.additional_kwargs).length>0&&(e.data.additional_kwargs={...t.additional_kwargs}),e}function Q(t,e){if(!Ni(t)){const n=e!==void 0?`Invalid UUID for ${e}: ${t}`:`Invalid UUID: ${t}`;throw new Error(n)}return t}const lf={};function Im(t){lf[t]||(console.warn(t),lf[t]=!0)}var sr={exports:{}};const nw="2.0.0",Nm=256,rw=Number.MAX_SAFE_INTEGER||9007199254740991,iw=16,aw=Nm-6,sw=["major","premajor","minor","preminor","patch","prepatch","prerelease"];var uo={MAX_LENGTH:Nm,MAX_SAFE_COMPONENT_LENGTH:iw,MAX_SAFE_BUILD_LENGTH:aw,MAX_SAFE_INTEGER:rw,RELEASE_TYPES:sw,SEMVER_SPEC_VERSION:nw,FLAG_INCLUDE_PRERELEASE:1,FLAG_LOOSE:2};const ow=typeof process=="object"&&process.env&&{}.NODE_DEBUG&&/\bsemver\b/i.test({}.NODE_DEBUG)?(...t)=>console.error("SEMVER",...t):()=>{};var lo=ow;(function(t,e){const{MAX_SAFE_COMPONENT_LENGTH:n,MAX_SAFE_BUILD_LENGTH:r,MAX_LENGTH:i}=uo,a=lo;e=t.exports={};const s=e.re=[],o=e.safeRe=[],u=e.src=[],l=e.t={};let c=0;const d="[a-zA-Z0-9-]",f=[["\\s",1],["\\d",i],[d,r]],h=v=>{for(const[_,m]of f)v=v.split(`${_}*`).join(`${_}{0,${m}}`).split(`${_}+`).join(`${_}{1,${m}}`);return v},p=(v,_,m)=>{const g=h(_),y=c++;a(v,y,_),l[v]=y,u[y]=_,s[y]=new RegExp(_,m?"g":void 0),o[y]=new RegExp(g,m?"g":void 0)};p("NUMERICIDENTIFIER","0|[1-9]\\d*"),p("NUMERICIDENTIFIERLOOSE","\\d+"),p("NONNUMERICIDENTIFIER",`\\d*[a-zA-Z-]${d}*`),p("MAINVERSION",`(${u[l.NUMERICIDENTIFIER]})\\.(${u[l.NUMERICIDENTIFIER]})\\.(${u[l.NUMERICIDENTIFIER]})`),p("MAINVERSIONLOOSE",`(${u[l.NUMERICIDENTIFIERLOOSE]})\\.(${u[l.NUMERICIDENTIFIERLOOSE]})\\.(${u[l.NUMERICIDENTIFIERLOOSE]})`),p("PRERELEASEIDENTIFIER",`(?:${u[l.NUMERICIDENTIFIER]}|${u[l.NONNUMERICIDENTIFIER]})`),p("PRERELEASEIDENTIFIERLOOSE",`(?:${u[l.NUMERICIDENTIFIERLOOSE]}|${u[l.NONNUMERICIDENTIFIER]})`),p("PRERELEASE",`(?:-(${u[l.PRERELEASEIDENTIFIER]}(?:\\.${u[l.PRERELEASEIDENTIFIER]})*))`),p("PRERELEASELOOSE",`(?:-?(${u[l.PRERELEASEIDENTIFIERLOOSE]}(?:\\.${u[l.PRERELEASEIDENTIFIERLOOSE]})*))`),p("BUILDIDENTIFIER",`${d}+`),p("BUILD",`(?:\\+(${u[l.BUILDIDENTIFIER]}(?:\\.${u[l.BUILDIDENTIFIER]})*))`),p("FULLPLAIN",`v?${u[l.MAINVERSION]}${u[l.PRERELEASE]}?${u[l.BUILD]}?`),p("FULL",`^${u[l.FULLPLAIN]}$`),p("LOOSEPLAIN",`[v=\\s]*${u[l.MAINVERSIONLOOSE]}${u[l.PRERELEASELOOSE]}?${u[l.BUILD]}?`),p("LOOSE",`^${u[l.LOOSEPLAIN]}$`),p("GTLT","((?:<|>)?=?)"),p("XRANGEIDENTIFIERLOOSE",`${u[l.NUMERICIDENTIFIERLOOSE]}|x|X|\\*`),p("XRANGEIDENTIFIER",`${u[l.NUMERICIDENTIFIER]}|x|X|\\*`),p("XRANGEPLAIN",`[v=\\s]*(${u[l.XRANGEIDENTIFIER]})(?:\\.(${u[l.XRANGEIDENTIFIER]})(?:\\.(${u[l.XRANGEIDENTIFIER]})(?:${u[l.PRERELEASE]})?${u[l.BUILD]}?)?)?`),p("XRANGEPLAINLOOSE",`[v=\\s]*(${u[l.XRANGEIDENTIFIERLOOSE]})(?:\\.(${u[l.XRANGEIDENTIFIERLOOSE]})(?:\\.(${u[l.XRANGEIDENTIFIERLOOSE]})(?:${u[l.PRERELEASELOOSE]})?${u[l.BUILD]}?)?)?`),p("XRANGE",`^${u[l.GTLT]}\\s*${u[l.XRANGEPLAIN]}$`),p("XRANGELOOSE",`^${u[l.GTLT]}\\s*${u[l.XRANGEPLAINLOOSE]}$`),p("COERCEPLAIN",`(^|[^\\d])(\\d{1,${n}})(?:\\.(\\d{1,${n}}))?(?:\\.(\\d{1,${n}}))?`),p("COERCE",`${u[l.COERCEPLAIN]}(?:$|[^\\d])`),p("COERCEFULL",u[l.COERCEPLAIN]+`(?:${u[l.PRERELEASE]})?(?:${u[l.BUILD]})?(?:$|[^\\d])`),p("COERCERTL",u[l.COERCE],!0),p("COERCERTLFULL",u[l.COERCEFULL],!0),p("LONETILDE","(?:~>?)"),p("TILDETRIM",`(\\s*)${u[l.LONETILDE]}\\s+`,!0),e.tildeTrimReplace="$1~",p("TILDE",`^${u[l.LONETILDE]}${u[l.XRANGEPLAIN]}$`),p("TILDELOOSE",`^${u[l.LONETILDE]}${u[l.XRANGEPLAINLOOSE]}$`),p("LONECARET","(?:\\^)"),p("CARETTRIM",`(\\s*)${u[l.LONECARET]}\\s+`,!0),e.caretTrimReplace="$1^",p("CARET",`^${u[l.LONECARET]}${u[l.XRANGEPLAIN]}$`),p("CARETLOOSE",`^${u[l.LONECARET]}${u[l.XRANGEPLAINLOOSE]}$`),p("COMPARATORLOOSE",`^${u[l.GTLT]}\\s*(${u[l.LOOSEPLAIN]})$|^$`),p("COMPARATOR",`^${u[l.GTLT]}\\s*(${u[l.FULLPLAIN]})$|^$`),p("COMPARATORTRIM",`(\\s*)${u[l.GTLT]}\\s*(${u[l.LOOSEPLAIN]}|${u[l.XRANGEPLAIN]})`,!0),e.comparatorTrimReplace="$1$2$3",p("HYPHENRANGE",`^\\s*(${u[l.XRANGEPLAIN]})\\s+-\\s+(${u[l.XRANGEPLAIN]})\\s*$`),p("HYPHENRANGELOOSE",`^\\s*(${u[l.XRANGEPLAINLOOSE]})\\s+-\\s+(${u[l.XRANGEPLAINLOOSE]})\\s*$`),p("STAR","(<|>)?=?\\s*\\*"),p("GTE0","^\\s*>=\\s*0\\.0\\.0\\s*$"),p("GTE0PRE","^\\s*>=\\s*0\\.0\\.0-0\\s*$")})(sr,sr.exports);const uw=Object.freeze({loose:!0}),lw=Object.freeze({}),cw=t=>t?typeof t!="object"?uw:t:lw;var gc=cw;const cf=/^[0-9]+$/,$m=(t,e)=>{const n=cf.test(t),r=cf.test(e);return n&&r&&(t=+t,e=+e),t===e?0:n&&!r?-1:r&&!n?1:t<e?-1:1},dw=(t,e)=>$m(e,t);var Am={compareIdentifiers:$m,rcompareIdentifiers:dw};const Ha=lo,{MAX_LENGTH:df,MAX_SAFE_INTEGER:Va}=uo,{safeRe:ff,t:hf}=sr.exports,fw=gc,{compareIdentifiers:pr}=Am;class bt{constructor(e,n){if(n=fw(n),e instanceof bt){if(e.loose===!!n.loose&&e.includePrerelease===!!n.includePrerelease)return e;e=e.version}else if(typeof e!="string")throw new TypeError(`Invalid version. Must be a string. Got type "${typeof e}".`);if(e.length>df)throw new TypeError(`version is longer than ${df} characters`);Ha("SemVer",e,n),this.options=n,this.loose=!!n.loose,this.includePrerelease=!!n.includePrerelease;const r=e.trim().match(n.loose?ff[hf.LOOSE]:ff[hf.FULL]);if(!r)throw new TypeError(`Invalid Version: ${e}`);if(this.raw=e,this.major=+r[1],this.minor=+r[2],this.patch=+r[3],this.major>Va||this.major<0)throw new TypeError("Invalid major version");if(this.minor>Va||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>Va||this.patch<0)throw new TypeError("Invalid patch version");r[4]?this.prerelease=r[4].split(".").map(i=>{if(/^[0-9]+$/.test(i)){const a=+i;if(a>=0&&a<Va)return a}return i}):this.prerelease=[],this.build=r[5]?r[5].split("."):[],this.format()}format(){return this.version=`${this.major}.${this.minor}.${this.patch}`,this.prerelease.length&&(this.version+=`-${this.prerelease.join(".")}`),this.version}toString(){return this.version}compare(e){if(Ha("SemVer.compare",this.version,this.options,e),!(e instanceof bt)){if(typeof e=="string"&&e===this.version)return 0;e=new bt(e,this.options)}return e.version===this.version?0:this.compareMain(e)||this.comparePre(e)}compareMain(e){return e instanceof bt||(e=new bt(e,this.options)),pr(this.major,e.major)||pr(this.minor,e.minor)||pr(this.patch,e.patch)}comparePre(e){if(e instanceof bt||(e=new bt(e,this.options)),this.prerelease.length&&!e.prerelease.length)return-1;if(!this.prerelease.length&&e.prerelease.length)return 1;if(!this.prerelease.length&&!e.prerelease.length)return 0;let n=0;do{const r=this.prerelease[n],i=e.prerelease[n];if(Ha("prerelease compare",n,r,i),r===void 0&&i===void 0)return 0;if(i===void 0)return 1;if(r===void 0)return-1;if(r===i)continue;return pr(r,i)}while(++n)}compareBuild(e){e instanceof bt||(e=new bt(e,this.options));let n=0;do{const r=this.build[n],i=e.build[n];if(Ha("build compare",n,r,i),r===void 0&&i===void 0)return 0;if(i===void 0)return 1;if(r===void 0)return-1;if(r===i)continue;return pr(r,i)}while(++n)}inc(e,n,r){switch(e){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",n,r);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",n,r);break;case"prepatch":this.prerelease.length=0,this.inc("patch",n,r),this.inc("pre",n,r);break;case"prerelease":this.prerelease.length===0&&this.inc("patch",n,r),this.inc("pre",n,r);break;case"major":(this.minor!==0||this.patch!==0||this.prerelease.length===0)&&this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":(this.patch!==0||this.prerelease.length===0)&&this.minor++,this.patch=0,this.prerelease=[];break;case"patch":this.prerelease.length===0&&this.patch++,this.prerelease=[];break;case"pre":{const i=Number(r)?1:0;if(!n&&r===!1)throw new Error("invalid increment argument: identifier is empty");if(this.prerelease.length===0)this.prerelease=[i];else{let a=this.prerelease.length;for(;--a>=0;)typeof this.prerelease[a]=="number"&&(this.prerelease[a]++,a=-2);if(a===-1){if(n===this.prerelease.join(".")&&r===!1)throw new Error("invalid increment argument: identifier already exists");this.prerelease.push(i)}}if(n){let a=[n,i];r===!1&&(a=[n]),pr(this.prerelease[0],n)===0?isNaN(this.prerelease[1])&&(this.prerelease=a):this.prerelease=a}break}default:throw new Error(`invalid increment argument: ${e}`)}return this.raw=this.format(),this.build.length&&(this.raw+=`+${this.build.join(".")}`),this}}var Ze=bt;const pf=Ze,hw=(t,e,n=!1)=>{if(t instanceof pf)return t;try{return new pf(t,e)}catch(r){if(!n)return null;throw r}};var ei=hw;const pw=ei,mw=(t,e)=>{const n=pw(t,e);return n?n.version:null};var gw=mw;const yw=ei,vw=(t,e)=>{const n=yw(t.trim().replace(/^[=v]+/,""),e);return n?n.version:null};var _w=vw;const mf=Ze,ww=(t,e,n,r,i)=>{typeof n=="string"&&(i=r,r=n,n=void 0);try{return new mf(t instanceof mf?t.version:t,n).inc(e,r,i).version}catch{return null}};var bw=ww;const gf=ei,Ew=(t,e)=>{const n=gf(t,null,!0),r=gf(e,null,!0),i=n.compare(r);if(i===0)return null;const a=i>0,s=a?n:r,o=a?r:n,u=!!s.prerelease.length;if(!!o.prerelease.length&&!u)return!o.patch&&!o.minor?"major":s.patch?"patch":s.minor?"minor":"major";const c=u?"pre":"";return n.major!==r.major?c+"major":n.minor!==r.minor?c+"minor":n.patch!==r.patch?c+"patch":"prerelease"};var Sw=Ew;const kw=Ze,Tw=(t,e)=>new kw(t,e).major;var xw=Tw;const Ow=Ze,Cw=(t,e)=>new Ow(t,e).minor;var Pw=Cw;const Rw=Ze,Iw=(t,e)=>new Rw(t,e).patch;var Nw=Iw;const $w=ei,Aw=(t,e)=>{const n=$w(t,e);return n&&n.prerelease.length?n.prerelease:null};var Lw=Aw;const yf=Ze,jw=(t,e,n)=>new yf(t,n).compare(new yf(e,n));var Nt=jw;const Dw=Nt,Mw=(t,e,n)=>Dw(e,t,n);var Uw=Mw;const Fw=Nt,zw=(t,e)=>Fw(t,e,!0);var Bw=zw;const vf=Ze,Hw=(t,e,n)=>{const r=new vf(t,n),i=new vf(e,n);return r.compare(i)||r.compareBuild(i)};var yc=Hw;const Vw=yc,Zw=(t,e)=>t.sort((n,r)=>Vw(n,r,e));var Gw=Zw;const Ww=yc,Jw=(t,e)=>t.sort((n,r)=>Ww(r,n,e));var Qw=Jw;const qw=Nt,Kw=(t,e,n)=>qw(t,e,n)>0;var co=Kw;const Xw=Nt,Yw=(t,e,n)=>Xw(t,e,n)<0;var vc=Yw;const e0=Nt,t0=(t,e,n)=>e0(t,e,n)===0;var Lm=t0;const n0=Nt,r0=(t,e,n)=>n0(t,e,n)!==0;var jm=r0;const i0=Nt,a0=(t,e,n)=>i0(t,e,n)>=0;var _c=a0;const s0=Nt,o0=(t,e,n)=>s0(t,e,n)<=0;var wc=o0;const u0=Lm,l0=jm,c0=co,d0=_c,f0=vc,h0=wc,p0=(t,e,n,r)=>{switch(e){case"===":return typeof t=="object"&&(t=t.version),typeof n=="object"&&(n=n.version),t===n;case"!==":return typeof t=="object"&&(t=t.version),typeof n=="object"&&(n=n.version),t!==n;case"":case"=":case"==":return u0(t,n,r);case"!=":return l0(t,n,r);case">":return c0(t,n,r);case">=":return d0(t,n,r);case"<":return f0(t,n,r);case"<=":return h0(t,n,r);default:throw new TypeError(`Invalid operator: ${e}`)}};var Dm=p0;const m0=Ze,g0=ei,{safeRe:Za,t:Ga}=sr.exports,y0=(t,e)=>{if(t instanceof m0)return t;if(typeof t=="number"&&(t=String(t)),typeof t!="string")return null;e=e||{};let n=null;if(!e.rtl)n=t.match(e.includePrerelease?Za[Ga.COERCEFULL]:Za[Ga.COERCE]);else{const u=e.includePrerelease?Za[Ga.COERCERTLFULL]:Za[Ga.COERCERTL];let l;for(;(l=u.exec(t))&&(!n||n.index+n[0].length!==t.length);)(!n||l.index+l[0].length!==n.index+n[0].length)&&(n=l),u.lastIndex=l.index+l[1].length+l[2].length;u.lastIndex=-1}if(n===null)return null;const r=n[2],i=n[3]||"0",a=n[4]||"0",s=e.includePrerelease&&n[5]?`-${n[5]}`:"",o=e.includePrerelease&&n[6]?`+${n[6]}`:"";return g0(`${r}.${i}.${a}${s}${o}`,e)};var v0=y0;class _0{constructor(){this.max=1e3,this.map=new Map}get(e){const n=this.map.get(e);if(n!==void 0)return this.map.delete(e),this.map.set(e,n),n}delete(e){return this.map.delete(e)}set(e,n){if(!this.delete(e)&&n!==void 0){if(this.map.size>=this.max){const i=this.map.keys().next().value;this.delete(i)}this.map.set(e,n)}return this}}var w0=_0,qo,_f;function $t(){if(_f)return qo;_f=1;const t=/\s+/g;class e{constructor(I,U){if(U=i(U),I instanceof e)return I.loose===!!U.loose&&I.includePrerelease===!!U.includePrerelease?I:new e(I.raw,U);if(I instanceof a)return this.raw=I.value,this.set=[[I]],this.formatted=void 0,this;if(this.options=U,this.loose=!!U.loose,this.includePrerelease=!!U.includePrerelease,this.raw=I.trim().replace(t," "),this.set=this.raw.split("||").map(j=>this.parseRange(j.trim())).filter(j=>j.length),!this.set.length)throw new TypeError(`Invalid SemVer Range: ${this.raw}`);if(this.set.length>1){const j=this.set[0];if(this.set=this.set.filter(b=>!v(b[0])),this.set.length===0)this.set=[j];else if(this.set.length>1){for(const b of this.set)if(b.length===1&&_(b[0])){this.set=[b];break}}}this.formatted=void 0}get range(){if(this.formatted===void 0){this.formatted="";for(let I=0;I<this.set.length;I++){I>0&&(this.formatted+="||");const U=this.set[I];for(let j=0;j<U.length;j++)j>0&&(this.formatted+=" "),this.formatted+=U[j].toString().trim()}}return this.formatted}format(){return this.range}toString(){return this.range}parseRange(I){const j=((this.options.includePrerelease&&h)|(this.options.loose&&p))+":"+I,b=r.get(j);if(b)return b;const S=this.options.loose,R=S?u[l.HYPHENRANGELOOSE]:u[l.HYPHENRANGE];I=I.replace(R,Ge(this.options.includePrerelease)),s("hyphen replace",I),I=I.replace(u[l.COMPARATORTRIM],c),s("comparator trim",I),I=I.replace(u[l.TILDETRIM],d),s("tilde trim",I),I=I.replace(u[l.CARETTRIM],f),s("caret trim",I);let F=I.split(" ").map(re=>g(re,this.options)).join(" ").split(/\s+/).map(re=>le(re,this.options));S&&(F=F.filter(re=>(s("loose invalid filter",re,this.options),!!re.match(u[l.COMPARATORLOOSE])))),s("range list",F);const D=new Map,Y=F.map(re=>new a(re,this.options));for(const re of Y){if(v(re))return[re];D.set(re.value,re)}D.size>1&&D.has("")&&D.delete("");const oe=[...D.values()];return r.set(j,oe),oe}intersects(I,U){if(!(I instanceof e))throw new TypeError("a Range is required");return this.set.some(j=>m(j,U)&&I.set.some(b=>m(b,U)&&j.every(S=>b.every(R=>S.intersects(R,U)))))}test(I){if(!I)return!1;if(typeof I=="string")try{I=new o(I,this.options)}catch{return!1}for(let U=0;U<this.set.length;U++)if(yt(this.set[U],I,this.options))return!0;return!1}}qo=e;const n=w0,r=new n,i=gc,a=fo(),s=lo,o=Ze,{safeRe:u,t:l,comparatorTrimReplace:c,tildeTrimReplace:d,caretTrimReplace:f}=sr.exports,{FLAG_INCLUDE_PRERELEASE:h,FLAG_LOOSE:p}=uo,v=$=>$.value==="<0.0.0-0",_=$=>$.value==="",m=($,I)=>{let U=!0;const j=$.slice();let b=j.pop();for(;U&&j.length;)U=j.every(S=>b.intersects(S,I)),b=j.pop();return U},g=($,I)=>(s("comp",$,I),$=T($,I),s("caret",$),$=w($,I),s("tildes",$),$=P($,I),s("xrange",$),$=B($,I),s("stars",$),$),y=$=>!$||$.toLowerCase()==="x"||$==="*",w=($,I)=>$.trim().split(/\s+/).map(U=>E(U,I)).join(" "),E=($,I)=>{const U=I.loose?u[l.TILDELOOSE]:u[l.TILDE];return $.replace(U,(j,b,S,R,F)=>{s("tilde",$,j,b,S,R,F);let D;return y(b)?D="":y(S)?D=`>=${b}.0.0 <${+b+1}.0.0-0`:y(R)?D=`>=${b}.${S}.0 <${b}.${+S+1}.0-0`:F?(s("replaceTilde pr",F),D=`>=${b}.${S}.${R}-${F} <${b}.${+S+1}.0-0`):D=`>=${b}.${S}.${R} <${b}.${+S+1}.0-0`,s("tilde return",D),D})},T=($,I)=>$.trim().split(/\s+/).map(U=>C(U,I)).join(" "),C=($,I)=>{s("caret",$,I);const U=I.loose?u[l.CARETLOOSE]:u[l.CARET],j=I.includePrerelease?"-0":"";return $.replace(U,(b,S,R,F,D)=>{s("caret",$,b,S,R,F,D);let Y;return y(S)?Y="":y(R)?Y=`>=${S}.0.0${j} <${+S+1}.0.0-0`:y(F)?S==="0"?Y=`>=${S}.${R}.0${j} <${S}.${+R+1}.0-0`:Y=`>=${S}.${R}.0${j} <${+S+1}.0.0-0`:D?(s("replaceCaret pr",D),S==="0"?R==="0"?Y=`>=${S}.${R}.${F}-${D} <${S}.${R}.${+F+1}-0`:Y=`>=${S}.${R}.${F}-${D} <${S}.${+R+1}.0-0`:Y=`>=${S}.${R}.${F}-${D} <${+S+1}.0.0-0`):(s("no pr"),S==="0"?R==="0"?Y=`>=${S}.${R}.${F}${j} <${S}.${R}.${+F+1}-0`:Y=`>=${S}.${R}.${F}${j} <${S}.${+R+1}.0-0`:Y=`>=${S}.${R}.${F} <${+S+1}.0.0-0`),s("caret return",Y),Y})},P=($,I)=>(s("replaceXRanges",$,I),$.split(/\s+/).map(U=>J(U,I)).join(" ")),J=($,I)=>{$=$.trim();const U=I.loose?u[l.XRANGELOOSE]:u[l.XRANGE];return $.replace(U,(j,b,S,R,F,D)=>{s("xRange",$,j,b,S,R,F,D);const Y=y(S),oe=Y||y(R),re=oe||y(F),Pe=re;return b==="="&&Pe&&(b=""),D=I.includePrerelease?"-0":"",Y?b===">"||b==="<"?j="<0.0.0-0":j="*":b&&Pe?(oe&&(R=0),F=0,b===">"?(b=">=",oe?(S=+S+1,R=0,F=0):(R=+R+1,F=0)):b==="<="&&(b="<",oe?S=+S+1:R=+R+1),b==="<"&&(D="-0"),j=`${b+S}.${R}.${F}${D}`):oe?j=`>=${S}.0.0${D} <${+S+1}.0.0-0`:re&&(j=`>=${S}.${R}.0${D} <${S}.${+R+1}.0-0`),s("xRange return",j),j})},B=($,I)=>(s("replaceStars",$,I),$.trim().replace(u[l.STAR],"")),le=($,I)=>(s("replaceGTE0",$,I),$.trim().replace(u[I.includePrerelease?l.GTE0PRE:l.GTE0],"")),Ge=$=>(I,U,j,b,S,R,F,D,Y,oe,re,Pe)=>(y(j)?U="":y(b)?U=`>=${j}.0.0${$?"-0":""}`:y(S)?U=`>=${j}.${b}.0${$?"-0":""}`:R?U=`>=${U}`:U=`>=${U}${$?"-0":""}`,y(Y)?D="":y(oe)?D=`<${+Y+1}.0.0-0`:y(re)?D=`<${Y}.${+oe+1}.0-0`:Pe?D=`<=${Y}.${oe}.${re}-${Pe}`:$?D=`<${Y}.${oe}.${+re+1}-0`:D=`<=${D}`,`${U} ${D}`.trim()),yt=($,I,U)=>{for(let j=0;j<$.length;j++)if(!$[j].test(I))return!1;if(I.prerelease.length&&!U.includePrerelease){for(let j=0;j<$.length;j++)if(s($[j].semver),$[j].semver!==a.ANY&&$[j].semver.prerelease.length>0){const b=$[j].semver;if(b.major===I.major&&b.minor===I.minor&&b.patch===I.patch)return!0}return!1}return!0};return qo}var Ko,wf;function fo(){if(wf)return Ko;wf=1;const t=Symbol("SemVer ANY");class e{static get ANY(){return t}constructor(c,d){if(d=n(d),c instanceof e){if(c.loose===!!d.loose)return c;c=c.value}c=c.trim().split(/\s+/).join(" "),s("comparator",c,d),this.options=d,this.loose=!!d.loose,this.parse(c),this.semver===t?this.value="":this.value=this.operator+this.semver.version,s("comp",this)}parse(c){const d=this.options.loose?r[i.COMPARATORLOOSE]:r[i.COMPARATOR],f=c.match(d);if(!f)throw new TypeError(`Invalid comparator: ${c}`);this.operator=f[1]!==void 0?f[1]:"",this.operator==="="&&(this.operator=""),f[2]?this.semver=new o(f[2],this.options.loose):this.semver=t}toString(){return this.value}test(c){if(s("Comparator.test",c,this.options.loose),this.semver===t||c===t)return!0;if(typeof c=="string")try{c=new o(c,this.options)}catch{return!1}return a(c,this.operator,this.semver,this.options)}intersects(c,d){if(!(c instanceof e))throw new TypeError("a Comparator is required");return this.operator===""?this.value===""?!0:new u(c.value,d).test(this.value):c.operator===""?c.value===""?!0:new u(this.value,d).test(c.semver):(d=n(d),d.includePrerelease&&(this.value==="<0.0.0-0"||c.value==="<0.0.0-0")||!d.includePrerelease&&(this.value.startsWith("<0.0.0")||c.value.startsWith("<0.0.0"))?!1:!!(this.operator.startsWith(">")&&c.operator.startsWith(">")||this.operator.startsWith("<")&&c.operator.startsWith("<")||this.semver.version===c.semver.version&&this.operator.includes("=")&&c.operator.includes("=")||a(this.semver,"<",c.semver,d)&&this.operator.startsWith(">")&&c.operator.startsWith("<")||a(this.semver,">",c.semver,d)&&this.operator.startsWith("<")&&c.operator.startsWith(">")))}}Ko=e;const n=gc,{safeRe:r,t:i}=sr.exports,a=Dm,s=lo,o=Ze,u=$t();return Ko}const b0=$t(),E0=(t,e,n)=>{try{e=new b0(e,n)}catch{return!1}return e.test(t)};var ho=E0;const S0=$t(),k0=(t,e)=>new S0(t,e).set.map(n=>n.map(r=>r.value).join(" ").trim().split(" "));var T0=k0;const x0=Ze,O0=$t(),C0=(t,e,n)=>{let r=null,i=null,a=null;try{a=new O0(e,n)}catch{return null}return t.forEach(s=>{a.test(s)&&(!r||i.compare(s)===-1)&&(r=s,i=new x0(r,n))}),r};var P0=C0;const R0=Ze,I0=$t(),N0=(t,e,n)=>{let r=null,i=null,a=null;try{a=new I0(e,n)}catch{return null}return t.forEach(s=>{a.test(s)&&(!r||i.compare(s)===1)&&(r=s,i=new R0(r,n))}),r};var $0=N0;const Xo=Ze,A0=$t(),bf=co,L0=(t,e)=>{t=new A0(t,e);let n=new Xo("0.0.0");if(t.test(n)||(n=new Xo("0.0.0-0"),t.test(n)))return n;n=null;for(let r=0;r<t.set.length;++r){const i=t.set[r];let a=null;i.forEach(s=>{const o=new Xo(s.semver.version);switch(s.operator){case">":o.prerelease.length===0?o.patch++:o.prerelease.push(0),o.raw=o.format();case"":case">=":(!a||bf(o,a))&&(a=o);break;case"<":case"<=":break;default:throw new Error(`Unexpected operation: ${s.operator}`)}}),a&&(!n||bf(n,a))&&(n=a)}return n&&t.test(n)?n:null};var j0=L0;const D0=$t(),M0=(t,e)=>{try{return new D0(t,e).range||"*"}catch{return null}};var U0=M0;const F0=Ze,Mm=fo(),{ANY:z0}=Mm,B0=$t(),H0=ho,Ef=co,Sf=vc,V0=wc,Z0=_c,G0=(t,e,n,r)=>{t=new F0(t,r),e=new B0(e,r);let i,a,s,o,u;switch(n){case">":i=Ef,a=V0,s=Sf,o=">",u=">=";break;case"<":i=Sf,a=Z0,s=Ef,o="<",u="<=";break;default:throw new TypeError('Must provide a hilo val of "<" or ">"')}if(H0(t,e,r))return!1;for(let l=0;l<e.set.length;++l){const c=e.set[l];let d=null,f=null;if(c.forEach(h=>{h.semver===z0&&(h=new Mm(">=0.0.0")),d=d||h,f=f||h,i(h.semver,d.semver,r)?d=h:s(h.semver,f.semver,r)&&(f=h)}),d.operator===o||d.operator===u||(!f.operator||f.operator===o)&&a(t,f.semver))return!1;if(f.operator===u&&s(t,f.semver))return!1}return!0};var bc=G0;const W0=bc,J0=(t,e,n)=>W0(t,e,">",n);var Q0=J0;const q0=bc,K0=(t,e,n)=>q0(t,e,"<",n);var X0=K0;const kf=$t(),Y0=(t,e,n)=>(t=new kf(t,n),e=new kf(e,n),t.intersects(e,n));var eb=Y0;const tb=ho,nb=Nt;var rb=(t,e,n)=>{const r=[];let i=null,a=null;const s=t.sort((c,d)=>nb(c,d,n));for(const c of s)tb(c,e,n)?(a=c,i||(i=c)):(a&&r.push([i,a]),a=null,i=null);i&&r.push([i,null]);const o=[];for(const[c,d]of r)c===d?o.push(c):!d&&c===s[0]?o.push("*"):d?c===s[0]?o.push(`<=${d}`):o.push(`${c} - ${d}`):o.push(`>=${c}`);const u=o.join(" || "),l=typeof e.raw=="string"?e.raw:String(e);return u.length<l.length?u:e};const Tf=$t(),Ec=fo(),{ANY:Yo}=Ec,fi=ho,Sc=Nt,ib=(t,e,n={})=>{if(t===e)return!0;t=new Tf(t,n),e=new Tf(e,n);let r=!1;e:for(const i of t.set){for(const a of e.set){const s=sb(i,a,n);if(r=r||s!==null,s)continue e}if(r)return!1}return!0},ab=[new Ec(">=0.0.0-0")],xf=[new Ec(">=0.0.0")],sb=(t,e,n)=>{if(t===e)return!0;if(t.length===1&&t[0].semver===Yo){if(e.length===1&&e[0].semver===Yo)return!0;n.includePrerelease?t=ab:t=xf}if(e.length===1&&e[0].semver===Yo){if(n.includePrerelease)return!0;e=xf}const r=new Set;let i,a;for(const h of t)h.operator===">"||h.operator===">="?i=Of(i,h,n):h.operator==="<"||h.operator==="<="?a=Cf(a,h,n):r.add(h.semver);if(r.size>1)return null;let s;if(i&&a){if(s=Sc(i.semver,a.semver,n),s>0)return null;if(s===0&&(i.operator!==">="||a.operator!=="<="))return null}for(const h of r){if(i&&!fi(h,String(i),n)||a&&!fi(h,String(a),n))return null;for(const p of e)if(!fi(h,String(p),n))return!1;return!0}let o,u,l,c,d=a&&!n.includePrerelease&&a.semver.prerelease.length?a.semver:!1,f=i&&!n.includePrerelease&&i.semver.prerelease.length?i.semver:!1;d&&d.prerelease.length===1&&a.operator==="<"&&d.prerelease[0]===0&&(d=!1);for(const h of e){if(c=c||h.operator===">"||h.operator===">=",l=l||h.operator==="<"||h.operator==="<=",i){if(f&&h.semver.prerelease&&h.semver.prerelease.length&&h.semver.major===f.major&&h.semver.minor===f.minor&&h.semver.patch===f.patch&&(f=!1),h.operator===">"||h.operator===">="){if(o=Of(i,h,n),o===h&&o!==i)return!1}else if(i.operator===">="&&!fi(i.semver,String(h),n))return!1}if(a){if(d&&h.semver.prerelease&&h.semver.prerelease.length&&h.semver.major===d.major&&h.semver.minor===d.minor&&h.semver.patch===d.patch&&(d=!1),h.operator==="<"||h.operator==="<="){if(u=Cf(a,h,n),u===h&&u!==a)return!1}else if(a.operator==="<="&&!fi(a.semver,String(h),n))return!1}if(!h.operator&&(a||i)&&s!==0)return!1}return!(i&&l&&!a&&s!==0||a&&c&&!i&&s!==0||f||d)},Of=(t,e,n)=>{if(!t)return e;const r=Sc(t.semver,e.semver,n);return r>0?t:r<0||e.operator===">"&&t.operator===">="?e:t},Cf=(t,e,n)=>{if(!t)return e;const r=Sc(t.semver,e.semver,n);return r<0?t:r>0||e.operator==="<"&&t.operator==="<="?e:t};var ob=ib;const eu=sr.exports,Pf=uo,ub=Ze,Rf=Am,lb=ei,cb=gw,db=_w,fb=bw,hb=Sw,pb=xw,mb=Pw,gb=Nw,yb=Lw,vb=Nt,_b=Uw,wb=Bw,bb=yc,Eb=Gw,Sb=Qw,kb=co,Tb=vc,xb=Lm,Ob=jm,Cb=_c,Pb=wc,Rb=Dm,Ib=v0,Nb=fo(),$b=$t(),Ab=ho,Lb=T0,jb=P0,Db=$0,Mb=j0,Ub=U0,Fb=bc,zb=Q0,Bb=X0,Hb=eb,Vb=rb,Zb=ob;var If={parse:lb,valid:cb,clean:db,inc:fb,diff:hb,major:pb,minor:mb,patch:gb,prerelease:yb,compare:vb,rcompare:_b,compareLoose:wb,compareBuild:bb,sort:Eb,rsort:Sb,gt:kb,lt:Tb,eq:xb,neq:Ob,gte:Cb,lte:Pb,cmp:Rb,coerce:Ib,Comparator:Nb,Range:$b,satisfies:Ab,toComparators:Lb,maxSatisfying:jb,minSatisfying:Db,minVersion:Mb,validRange:Ub,outside:Fb,gtr:zb,ltr:Bb,intersects:Hb,simplifyRange:Vb,subset:Zb,SemVer:ub,re:eu.re,src:eu.src,tokens:eu.t,SEMVER_SPEC_VERSION:Pf.SEMVER_SPEC_VERSION,RELEASE_TYPES:Pf.RELEASE_TYPES,compareIdentifiers:Rf.compareIdentifiers,rcompareIdentifiers:Rf.rcompareIdentifiers};function Gb(t,e){const n=If.parse(t),r=If.parse(e);if(!n||!r)throw new Error("Invalid version format.");return n.compare(r)>=0}function on(t){if(!t||t.split("/").length>2||t.startsWith("/")||t.endsWith("/")||t.split(":").length>2)throw new Error(`Invalid identifier format: ${t}`);const[e,n]=t.split(":"),r=n||"latest";if(e.includes("/")){const[i,a]=e.split("/",2);if(!i||!a)throw new Error(`Invalid identifier format: ${t}`);return[i,a,r]}else{if(!e)throw new Error(`Invalid identifier format: ${t}`);return["-",e,r]}}class Wb extends Error{constructor(e){super(e),this.name="LangSmithConflictError"}}async function G(t,e,n){let r;if(t.ok){n&&(r=await t.text());return}r=await t.text();const i=`Failed to ${e}. Received status [${t.status}]: ${t.statusText}. Server response: ${r}`;throw t.status===409?new Wb(i):new Error(i)}var Nf="[...]",Jb={result:"[Circular]"},Ds=[],Pr=[];function Qb(){return{depthLimit:Number.MAX_SAFE_INTEGER,edgesLimit:Number.MAX_SAFE_INTEGER}}function hi(t,e,n,r){typeof r>"u"&&(r=Qb()),pl(t,"",0,[],void 0,0,r);var i;try{Pr.length===0?i=JSON.stringify(t,e,n):i=JSON.stringify(t,qb(e),n)}catch{return JSON.stringify("[unable to serialize, circular reference is too complex to analyze]")}finally{for(;Ds.length!==0;){var a=Ds.pop();a.length===4?Object.defineProperty(a[0],a[1],a[3]):a[0][a[1]]=a[2]}}return i}function tu(t,e,n,r){var i=Object.getOwnPropertyDescriptor(r,n);i.get!==void 0?i.configurable?(Object.defineProperty(r,n,{value:t}),Ds.push([r,n,e,i])):Pr.push([e,n,t]):(r[n]=t,Ds.push([r,n,e]))}function pl(t,e,n,r,i,a,s){a+=1;var o;if(typeof t=="object"&&t!==null){for(o=0;o<r.length;o++)if(r[o]===t){tu(Jb,t,e,i);return}if(typeof s.depthLimit<"u"&&a>s.depthLimit){tu(Nf,t,e,i);return}if(typeof s.edgesLimit<"u"&&n+1>s.edgesLimit){tu(Nf,t,e,i);return}if(r.push(t),Array.isArray(t))for(o=0;o<t.length;o++)pl(t[o],o,o,r,t,a,s);else{var u=Object.keys(t);for(o=0;o<u.length;o++){var l=u[o];pl(t[l],l,o,r,t,a,s)}}r.pop()}}function qb(t){return t=typeof t<"u"?t:function(e,n){return n},function(e,n){if(Pr.length>0)for(var r=0;r<Pr.length;r++){var i=Pr[r];if(i[1]===e&&i[0]===n){n=i[2],Pr.splice(r,1);break}}return t.call(this,e,n)}}async function $f(t){const e=await zm(),n=uE();return t.map(r=>{var s,o;const i=(s=r.extra)!=null?s:{},a=i.metadata;return r.extra={...i,runtime:{...e,...i==null?void 0:i.runtime},metadata:{...n,...n.revision_id||r.revision_id?{revision_id:(o=r.revision_id)!=null?o:n.revision_id}:{},...a}},r})}const Kb=()=>{const t=Fn("TRACING_SAMPLING_RATE");if(t===void 0)return;const e=parseFloat(t);if(e<0||e>1)throw new Error(`LANGSMITH_TRACING_SAMPLING_RATE must be between 0 and 1 if set. Got: ${e}`);return e},Xb=t=>{const n=t.replace("http://","").replace("https://","").split("/")[0].split(":")[0];return n==="localhost"||n==="127.0.0.1"||n==="::1"};async function Yb(t){const e=[];for await(const n of t)e.push(n);return e}function nu(t){if(t!==void 0)return t.trim().replace(/^"(.*)"$/,"$1").replace(/^'(.*)'$/,"$1")}const eE=async t=>{var e;if((t==null?void 0:t.status)===429){const n=parseInt((e=t.headers.get("retry-after"))!=null?e:"30",10)*1e3;if(n>0)return await new Promise(r=>setTimeout(r,n)),!0}return!1};class tE{constructor(){Object.defineProperty(this,"items",{enumerable:!0,configurable:!0,writable:!0,value:[]})}get size(){return this.items.length}push(e){let n;const r=new Promise(i=>{n=i});return this.items.push([e,n,r]),r}pop(e){if(e<1)throw new Error("Number of items to pop off may not be less than 1.");const n=[];for(;n.length<e&&this.items.length;){const r=this.items.shift();if(r)n.push(r);else break}return[n.map(r=>r[0]),()=>n.forEach(r=>r[1]())]}}const nE=20971520;class da{constructor(e={}){var r,i,a,s,o,u,l,c,d,f,h,p,v,_,m;Object.defineProperty(this,"apiKey",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"apiUrl",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"webUrl",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"caller",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"batchIngestCaller",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"timeout_ms",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_tenantId",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"hideInputs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"hideOutputs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"tracingSampleRate",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"filteredPostUuids",{enumerable:!0,configurable:!0,writable:!0,value:new Set}),Object.defineProperty(this,"autoBatchTracing",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"batchEndpointSupported",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"autoBatchQueue",{enumerable:!0,configurable:!0,writable:!0,value:new tE}),Object.defineProperty(this,"pendingAutoBatchedRunLimit",{enumerable:!0,configurable:!0,writable:!0,value:100}),Object.defineProperty(this,"autoBatchTimeout",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"autoBatchInitialDelayMs",{enumerable:!0,configurable:!0,writable:!0,value:250}),Object.defineProperty(this,"autoBatchAggregationDelayMs",{enumerable:!0,configurable:!0,writable:!0,value:50}),Object.defineProperty(this,"serverInfo",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"fetchOptions",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"settings",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"blockOnRootRunFinalization",{enumerable:!0,configurable:!0,writable:!0,value:!0});const n=da.getDefaultClientConfig();this.tracingSampleRate=Kb(),this.apiUrl=(i=nu((r=e.apiUrl)!=null?r:n.apiUrl))!=null?i:"",this.apiUrl.endsWith("/")&&(this.apiUrl=this.apiUrl.slice(0,-1)),this.apiKey=nu((a=e.apiKey)!=null?a:n.apiKey),this.webUrl=nu((s=e.webUrl)!=null?s:n.webUrl),(o=this.webUrl)!=null&&o.endsWith("/")&&(this.webUrl=this.webUrl.slice(0,-1)),this.timeout_ms=(u=e.timeout_ms)!=null?u:12e3,this.caller=new sf((l=e.callerOptions)!=null?l:{}),this.batchIngestCaller=new sf({...(c=e.callerOptions)!=null?c:{},onFailedResponseHook:eE}),this.hideInputs=(f=(d=e.hideInputs)!=null?d:e.anonymizer)!=null?f:n.hideInputs,this.hideOutputs=(p=(h=e.hideOutputs)!=null?h:e.anonymizer)!=null?p:n.hideOutputs,this.autoBatchTracing=(v=e.autoBatchTracing)!=null?v:this.autoBatchTracing,this.blockOnRootRunFinalization=(_=e.blockOnRootRunFinalization)!=null?_:this.blockOnRootRunFinalization,this.pendingAutoBatchedRunLimit=(m=e.pendingAutoBatchedRunLimit)!=null?m:this.pendingAutoBatchedRunLimit,this.fetchOptions=e.fetchOptions||{}}static getDefaultClientConfig(){var a;const e=Fn("API_KEY"),n=(a=Fn("ENDPOINT"))!=null?a:"https://api.smith.langchain.com",r=Fn("HIDE_INPUTS")==="true",i=Fn("HIDE_OUTPUTS")==="true";return{apiUrl:n,apiKey:e,webUrl:void 0,hideInputs:r,hideOutputs:i}}getHostUrl(){return this.webUrl?this.webUrl:Xb(this.apiUrl)?(this.webUrl="http://localhost:3000",this.webUrl):this.apiUrl.includes("/api")&&!this.apiUrl.split(".",1)[0].endsWith("api")?(this.webUrl=this.apiUrl.replace("/api",""),this.webUrl):this.apiUrl.split(".",1)[0].includes("dev")?(this.webUrl="https://dev.smith.langchain.com",this.webUrl):this.apiUrl.split(".",1)[0].includes("eu")?(this.webUrl="https://eu.smith.langchain.com",this.webUrl):(this.webUrl="https://smith.langchain.com",this.webUrl)}get headers(){const e={"User-Agent":`langsmith-js/${Um}`};return this.apiKey&&(e["x-api-key"]=`${this.apiKey}`),e}processInputs(e){return this.hideInputs===!1?e:this.hideInputs===!0?{}:typeof this.hideInputs=="function"?this.hideInputs(e):e}processOutputs(e){return this.hideOutputs===!1?e:this.hideOutputs===!0?{}:typeof this.hideOutputs=="function"?this.hideOutputs(e):e}prepareRunCreateOrUpdateInputs(e){const n={...e};return n.inputs!==void 0&&(n.inputs=this.processInputs(n.inputs)),n.outputs!==void 0&&(n.outputs=this.processOutputs(n.outputs)),n}async _getResponse(e,n){var s;const r=(s=n==null?void 0:n.toString())!=null?s:"",i=`${this.apiUrl}${e}?${r}`,a=await this.caller.call(z(),i,{method:"GET",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await G(a,`Failed to fetch ${e}`),a}async _get(e,n){return(await this._getResponse(e,n)).json()}async*_getPaginated(e,n=new URLSearchParams,r){let i=Number(n.get("offset"))||0;const a=Number(n.get("limit"))||100;for(;;){n.set("offset",String(i)),n.set("limit",String(a));const s=`${this.apiUrl}${e}?${n}`,o=await this.caller.call(z(),s,{method:"GET",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});await G(o,`Failed to fetch ${e}`);const u=r?r(await o.json()):await o.json();if(u.length===0||(yield u,u.length<a))break;i+=u.length}}async*_getCursorPaginatedList(e,n=null,r="POST",i="runs"){const a=n?{...n}:{};for(;;){const o=await(await this.caller.call(z(),`${this.apiUrl}${e}`,{method:r,headers:{...this.headers,"Content-Type":"application/json"},signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions,body:JSON.stringify(a)})).json();if(!o||!o[i])break;yield o[i];const u=o.cursors;if(!u||!u.next)break;a.cursor=u.next}}_filterForSampling(e,n=!1){if(this.tracingSampleRate===void 0)return e;if(n){const r=[];for(const i of e)this.filteredPostUuids.has(i.id)?this.filteredPostUuids.delete(i.id):r.push(i);return r}else{const r=[];for(const i of e)i.id!==i.trace_id&&!this.filteredPostUuids.has(i.trace_id)||Math.random()<this.tracingSampleRate?r.push(i):this.filteredPostUuids.add(i.id);return r}}async drainAutoBatchQueue(){for(;this.autoBatchQueue.size>=0;){const[e,n]=this.autoBatchQueue.pop(this.pendingAutoBatchedRunLimit);if(!e.length){n();return}try{await this.batchIngestRuns({runCreates:e.filter(r=>r.action==="create").map(r=>r.item),runUpdates:e.filter(r=>r.action==="update").map(r=>r.item)})}finally{n()}}}async processRunOperation(e,n){const r=this.autoBatchTimeout;clearTimeout(this.autoBatchTimeout),this.autoBatchTimeout=void 0;const i=this.autoBatchQueue.push(e);return(n||this.autoBatchQueue.size>this.pendingAutoBatchedRunLimit)&&await this.drainAutoBatchQueue().catch(console.error),this.autoBatchQueue.size>0&&(this.autoBatchTimeout=setTimeout(()=>{this.autoBatchTimeout=void 0,this.drainAutoBatchQueue().catch(console.error)},r?this.autoBatchAggregationDelayMs:this.autoBatchInitialDelayMs)),i}async _getServerInfo(){const e=await z()(`${this.apiUrl}/info`,{method:"GET",headers:{Accept:"application/json"},signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await G(e,"get server info"),e.json()}async batchEndpointIsSupported(){try{this.serverInfo=await this._getServerInfo()}catch{return!1}return!0}async _getSettings(){return this.settings||(this.settings=this._get("/settings")),await this.settings}async createRun(e){var o;if(!this._filterForSampling([e]).length)return;const n={...this.headers,"Content-Type":"application/json"},r=e.project_name;delete e.project_name;const i=this.prepareRunCreateOrUpdateInputs({session_name:r,...e,start_time:(o=e.start_time)!=null?o:Date.now()});if(this.autoBatchTracing&&i.trace_id!==void 0&&i.dotted_order!==void 0){this.processRunOperation({action:"create",item:i}).catch(console.error);return}const a=await $f([i]),s=await this.caller.call(z(),`${this.apiUrl}/runs`,{method:"POST",headers:n,body:hi(a[0]),signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});await G(s,"create run",!0)}async batchIngestRuns({runCreates:e,runUpdates:n}){var l,c,d,f,h;if(e===void 0&&n===void 0)return;let r=(l=e==null?void 0:e.map(p=>this.prepareRunCreateOrUpdateInputs(p)))!=null?l:[],i=(c=n==null?void 0:n.map(p=>this.prepareRunCreateOrUpdateInputs(p)))!=null?c:[];if(r.length>0&&i.length>0){const p=r.reduce((_,m)=>(m.id&&(_[m.id]=m),_),{}),v=[];for(const _ of i)_.id!==void 0&&p[_.id]?p[_.id]={...p[_.id],..._}:v.push(_);r=Object.values(p),i=v}const a={post:this._filterForSampling(r),patch:this._filterForSampling(i,!0)};if(!a.post.length&&!a.patch.length)return;if(r=await $f(r),this.batchEndpointSupported===void 0&&(this.batchEndpointSupported=await this.batchEndpointIsSupported()),!this.batchEndpointSupported){this.autoBatchTracing=!1;for(const p of a.post)await this.createRun(p);for(const p of a.patch)p.id!==void 0&&await this.updateRun(p.id,p);return}const s=(h=(f=(d=this.serverInfo)==null?void 0:d.batch_ingest_config)==null?void 0:f.size_limit_bytes)!=null?h:nE,o={post:[],patch:[]};let u=0;for(const p of["post","patch"]){const v=p,_=a[v].reverse();let m=_.pop();for(;m!==void 0;){const g=hi(m);u>0&&u+g.length>s&&(await this._postBatchIngestRuns(hi(o)),u=0,o.post=[],o.patch=[]),u+=g.length,o[v].push(m),m=_.pop()}}(o.post.length>0||o.patch.length>0)&&await this._postBatchIngestRuns(hi(o))}async _postBatchIngestRuns(e){const n={...this.headers,"Content-Type":"application/json",Accept:"application/json"},r=await this.batchIngestCaller.call(z(),`${this.apiUrl}/runs/batch`,{method:"POST",headers:n,body:e,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});await G(r,"batch create run",!0)}async updateRun(e,n){Q(e),n.inputs&&(n.inputs=this.processInputs(n.inputs)),n.outputs&&(n.outputs=this.processOutputs(n.outputs));const r={...n,id:e};if(!this._filterForSampling([r],!0).length)return;if(this.autoBatchTracing&&r.trace_id!==void 0&&r.dotted_order!==void 0){if(n.end_time!==void 0&&r.parent_run_id===void 0&&this.blockOnRootRunFinalization){await this.processRunOperation({action:"update",item:r},!0);return}else this.processRunOperation({action:"update",item:r}).catch(console.error);return}const i={...this.headers,"Content-Type":"application/json"},a=await this.caller.call(z(),`${this.apiUrl}/runs/${e}`,{method:"PATCH",headers:i,body:hi(n),signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});await G(a,"update run",!0)}async readRun(e,{loadChildRuns:n}={loadChildRuns:!1}){Q(e);let r=await this._get(`/runs/${e}`);return n&&r.child_run_ids&&(r=await this._loadChildRuns(r)),r}async getRunUrl({runId:e,run:n,projectOpts:r}){if(n!==void 0){let i;n.session_id?i=n.session_id:r!=null&&r.projectName?i=(await this.readProject({projectName:r==null?void 0:r.projectName})).id:r!=null&&r.projectId?i=r==null?void 0:r.projectId:i=(await this.readProject({projectName:Fn("PROJECT")||"default"})).id;const a=await this._getTenantId();return`${this.getHostUrl()}/o/${a}/projects/p/${i}/r/${n.id}?poll=true`}else if(e!==void 0){const i=await this.readRun(e);if(!i.app_path)throw new Error(`Run ${e} has no app_path`);return`${this.getHostUrl()}${i.app_path}`}else throw new Error("Must provide either runId or run")}async _loadChildRuns(e){const n=await Yb(this.listRuns({id:e.child_run_ids})),r={},i={};n.sort((a,s)=>{var o,u;return((o=a==null?void 0:a.dotted_order)!=null?o:"").localeCompare((u=s==null?void 0:s.dotted_order)!=null?u:"")});for(const a of n){if(a.parent_run_id===null||a.parent_run_id===void 0)throw new Error(`Child run ${a.id} has no parent`);a.parent_run_id in r||(r[a.parent_run_id]=[]),r[a.parent_run_id].push(a),i[a.id]=a}e.child_runs=r[e.id]||[];for(const a in r)a!==e.id&&(i[a].child_runs=r[a]);return e}async*listRuns(e){const{projectId:n,projectName:r,parentRunId:i,traceId:a,referenceExampleId:s,startTime:o,executionOrder:u,isRoot:l,runType:c,error:d,id:f,query:h,filter:p,traceFilter:v,treeFilter:_,limit:m,select:g}=e;let y=[];if(n&&(y=Array.isArray(n)?n:[n]),r){const C=Array.isArray(r)?r:[r],P=await Promise.all(C.map(J=>this.readProject({projectName:J}).then(B=>B.id)));y.push(...P)}const w=["app_path","child_run_ids","completion_cost","completion_tokens","dotted_order","end_time","error","events","extra","feedback_stats","first_token_time","id","inputs","name","outputs","parent_run_id","parent_run_ids","prompt_cost","prompt_tokens","reference_example_id","run_type","session_id","start_time","status","tags","total_cost","total_tokens","trace_id"],E={session:y.length?y:null,run_type:c,reference_example:s,query:h,filter:p,trace_filter:v,tree_filter:_,execution_order:u,parent_run:i,start_time:o?o.toISOString():null,error:d,id:f,limit:m,trace:a,select:g||w,is_root:l};let T=0;for await(const C of this._getCursorPaginatedList("/runs/query",E))if(m){if(T>=m)break;if(C.length+T>m){yield*C.slice(0,m-T);break}T+=C.length,yield*C}else yield*C}async getRunStats({id:e,trace:n,parentRun:r,runType:i,projectNames:a,projectIds:s,referenceExampleIds:o,startTime:u,endTime:l,error:c,query:d,filter:f,traceFilter:h,treeFilter:p,isRoot:v,dataSourceType:_}){let m=s||[];a&&(m=[...s||[],...await Promise.all(a.map(T=>this.readProject({projectName:T}).then(C=>C.id)))]);const y=Object.fromEntries(Object.entries({id:e,trace:n,parent_run:r,run_type:i,session:m,reference_example:o,start_time:u,end_time:l,error:c,query:d,filter:f,trace_filter:h,tree_filter:p,is_root:v,data_source_type:_}).filter(([T,C])=>C!==void 0));return await(await this.caller.call(z(),`${this.apiUrl}/runs/stats`,{method:"POST",headers:this.headers,body:JSON.stringify(y),signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions})).json()}async shareRun(e,{shareId:n}={}){const r={run_id:e,share_token:n||nt()};Q(e);const a=await(await this.caller.call(z(),`${this.apiUrl}/runs/${e}/share`,{method:"PUT",headers:this.headers,body:JSON.stringify(r),signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions})).json();if(a===null||!("share_token"in a))throw new Error("Invalid response from server");return`${this.getHostUrl()}/public/${a.share_token}/r`}async unshareRun(e){Q(e);const n=await this.caller.call(z(),`${this.apiUrl}/runs/${e}/share`,{method:"DELETE",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});await G(n,"unshare run",!0)}async readRunSharedLink(e){Q(e);const r=await(await this.caller.call(z(),`${this.apiUrl}/runs/${e}/share`,{method:"GET",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions})).json();if(!(r===null||!("share_token"in r)))return`${this.getHostUrl()}/public/${r.share_token}/r`}async listSharedRuns(e,{runIds:n}={}){const r=new URLSearchParams({share_token:e});if(n!==void 0)for(const s of n)r.append("id",s);return Q(e),await(await this.caller.call(z(),`${this.apiUrl}/public/${e}/runs${r}`,{method:"GET",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions})).json()}async readDatasetSharedSchema(e,n){if(!e&&!n)throw new Error("Either datasetId or datasetName must be given");e||(e=(await this.readDataset({datasetName:n})).id),Q(e);const i=await(await this.caller.call(z(),`${this.apiUrl}/datasets/${e}/share`,{method:"GET",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions})).json();return i.url=`${this.getHostUrl()}/public/${i.share_token}/d`,i}async shareDataset(e,n){if(!e&&!n)throw new Error("Either datasetId or datasetName must be given");e||(e=(await this.readDataset({datasetName:n})).id);const r={dataset_id:e};Q(e);const a=await(await this.caller.call(z(),`${this.apiUrl}/datasets/${e}/share`,{method:"PUT",headers:this.headers,body:JSON.stringify(r),signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions})).json();return a.url=`${this.getHostUrl()}/public/${a.share_token}/d`,a}async unshareDataset(e){Q(e);const n=await this.caller.call(z(),`${this.apiUrl}/datasets/${e}/share`,{method:"DELETE",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});await G(n,"unshare dataset",!0)}async readSharedDataset(e){return Q(e),await(await this.caller.call(z(),`${this.apiUrl}/public/${e}/datasets`,{method:"GET",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions})).json()}async listSharedExamples(e,n){const r={};n!=null&&n.exampleIds&&(r.id=n.exampleIds);const i=new URLSearchParams;Object.entries(r).forEach(([o,u])=>{Array.isArray(u)?u.forEach(l=>i.append(o,l)):i.append(o,u)});const a=await this.caller.call(z(),`${this.apiUrl}/public/${e}/examples?${i.toString()}`,{method:"GET",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions}),s=await a.json();if(!a.ok)throw"detail"in s?new Error(`Failed to list shared examples.
Status: ${a.status}
Message: ${s.detail.join(`
`)}`):new Error(`Failed to list shared examples: ${a.status} ${a.statusText}`);return s.map(o=>({...o,_hostUrl:this.getHostUrl()}))}async createProject({projectName:e,description:n=null,metadata:r=null,upsert:i=!1,projectExtra:a=null,referenceDatasetId:s=null}){const o=i?"?upsert=true":"",u=`${this.apiUrl}/sessions${o}`,l=a||{};r&&(l.metadata=r);const c={name:e,extra:l,description:n};s!==null&&(c.reference_dataset_id=s);const d=await this.caller.call(z(),u,{method:"POST",headers:{...this.headers,"Content-Type":"application/json"},body:JSON.stringify(c),signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await G(d,"create project"),await d.json()}async updateProject(e,{name:n=null,description:r=null,metadata:i=null,projectExtra:a=null,endTime:s=null}){const o=`${this.apiUrl}/sessions/${e}`;let u=a;i&&(u={...u||{},metadata:i});const l={name:n,extra:u,description:r,end_time:s?new Date(s).toISOString():null},c=await this.caller.call(z(),o,{method:"PATCH",headers:{...this.headers,"Content-Type":"application/json"},body:JSON.stringify(l),signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await G(c,"update project"),await c.json()}async hasProject({projectId:e,projectName:n}){let r="/sessions";const i=new URLSearchParams;if(e!==void 0&&n!==void 0)throw new Error("Must provide either projectName or projectId, not both");if(e!==void 0)Q(e),r+=`/${e}`;else if(n!==void 0)i.append("name",n);else throw new Error("Must provide projectName or projectId");const a=await this.caller.call(z(),`${this.apiUrl}${r}?${i}`,{method:"GET",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});try{const s=await a.json();return a.ok?Array.isArray(s)?s.length>0:!0:!1}catch{return!1}}async readProject({projectId:e,projectName:n,includeStats:r}){let i="/sessions";const a=new URLSearchParams;if(e!==void 0&&n!==void 0)throw new Error("Must provide either projectName or projectId, not both");if(e!==void 0)Q(e),i+=`/${e}`;else if(n!==void 0)a.append("name",n);else throw new Error("Must provide projectName or projectId");r!==void 0&&a.append("include_stats",r.toString());const s=await this._get(i,a);let o;if(Array.isArray(s)){if(s.length===0)throw new Error(`Project[id=${e}, name=${n}] not found`);o=s[0]}else o=s;return o}async getProjectUrl({projectId:e,projectName:n}){if(e===void 0&&n===void 0)throw new Error("Must provide either projectName or projectId");const r=await this.readProject({projectId:e,projectName:n}),i=await this._getTenantId();return`${this.getHostUrl()}/o/${i}/projects/p/${r.id}`}async getDatasetUrl({datasetId:e,datasetName:n}){if(e===void 0&&n===void 0)throw new Error("Must provide either datasetName or datasetId");const r=await this.readDataset({datasetId:e,datasetName:n}),i=await this._getTenantId();return`${this.getHostUrl()}/o/${i}/datasets/${r.id}`}async _getTenantId(){if(this._tenantId!==null)return this._tenantId;const e=new URLSearchParams({limit:"1"});for await(const n of this._getPaginated("/sessions",e))return this._tenantId=n[0].tenant_id,n[0].tenant_id;throw new Error("No projects found to resolve tenant.")}async*listProjects({projectIds:e,name:n,nameContains:r,referenceDatasetId:i,referenceDatasetName:a,referenceFree:s,metadata:o}={}){const u=new URLSearchParams;if(e!==void 0)for(const l of e)u.append("id",l);if(n!==void 0&&u.append("name",n),r!==void 0&&u.append("name_contains",r),i!==void 0)u.append("reference_dataset",i);else if(a!==void 0){const l=await this.readDataset({datasetName:a});u.append("reference_dataset",l.id)}s!==void 0&&u.append("reference_free",s.toString()),o!==void 0&&u.append("metadata",JSON.stringify(o));for await(const l of this._getPaginated("/sessions",u))yield*l}async deleteProject({projectId:e,projectName:n}){let r;if(e===void 0&&n===void 0)throw new Error("Must provide projectName or projectId");if(e!==void 0&&n!==void 0)throw new Error("Must provide either projectName or projectId, not both");e===void 0?r=(await this.readProject({projectName:n})).id:r=e,Q(r);const i=await this.caller.call(z(),`${this.apiUrl}/sessions/${r}`,{method:"DELETE",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});await G(i,`delete session ${r} (${n})`,!0)}async uploadCsv({csvFile:e,fileName:n,inputKeys:r,outputKeys:i,description:a,dataType:s,name:o}){const u=`${this.apiUrl}/datasets/upload`,l=new FormData;l.append("file",e,n),r.forEach(f=>{l.append("input_keys",f)}),i.forEach(f=>{l.append("output_keys",f)}),a&&l.append("description",a),s&&l.append("data_type",s),o&&l.append("name",o);const c=await this.caller.call(z(),u,{method:"POST",headers:this.headers,body:l,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await G(c,"upload CSV"),await c.json()}async createDataset(e,{description:n,dataType:r,inputsSchema:i,outputsSchema:a,metadata:s}={}){const o={name:e,description:n,extra:s?{metadata:s}:void 0};r&&(o.data_type=r),i&&(o.inputs_schema_definition=i),a&&(o.outputs_schema_definition=a);const u=await this.caller.call(z(),`${this.apiUrl}/datasets`,{method:"POST",headers:{...this.headers,"Content-Type":"application/json"},body:JSON.stringify(o),signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await G(u,"create dataset"),await u.json()}async readDataset({datasetId:e,datasetName:n}){let r="/datasets";const i=new URLSearchParams({limit:"1"});if(e!==void 0&&n!==void 0)throw new Error("Must provide either datasetName or datasetId, not both");if(e!==void 0)Q(e),r+=`/${e}`;else if(n!==void 0)i.append("name",n);else throw new Error("Must provide datasetName or datasetId");const a=await this._get(r,i);let s;if(Array.isArray(a)){if(a.length===0)throw new Error(`Dataset[id=${e}, name=${n}] not found`);s=a[0]}else s=a;return s}async hasDataset({datasetId:e,datasetName:n}){try{return await this.readDataset({datasetId:e,datasetName:n}),!0}catch(r){if(r instanceof Error&&r.message.toLocaleLowerCase().includes("not found"))return!1;throw r}}async diffDatasetVersions({datasetId:e,datasetName:n,fromVersion:r,toVersion:i}){let a=e;if(a===void 0&&n===void 0)throw new Error("Must provide either datasetName or datasetId");if(a!==void 0&&n!==void 0)throw new Error("Must provide either datasetName or datasetId, not both");a===void 0&&(a=(await this.readDataset({datasetName:n})).id);const s=new URLSearchParams({from_version:typeof r=="string"?r:r.toISOString(),to_version:typeof i=="string"?i:i.toISOString()});return await this._get(`/datasets/${a}/versions/diff`,s)}async readDatasetOpenaiFinetuning({datasetId:e,datasetName:n}){const r="/datasets";if(e===void 0)if(n!==void 0)e=(await this.readDataset({datasetName:n})).id;else throw new Error("Must provide datasetName or datasetId");return(await(await this._getResponse(`${r}/${e}/openai_ft`)).text()).trim().split(`
`).map(o=>JSON.parse(o))}async*listDatasets({limit:e=100,offset:n=0,datasetIds:r,datasetName:i,datasetNameContains:a,metadata:s}={}){const o="/datasets",u=new URLSearchParams({limit:e.toString(),offset:n.toString()});if(r!==void 0)for(const l of r)u.append("id",l);i!==void 0&&u.append("name",i),a!==void 0&&u.append("name_contains",a),s!==void 0&&u.append("metadata",JSON.stringify(s));for await(const l of this._getPaginated(o,u))yield*l}async updateDataset(e){const{datasetId:n,datasetName:r,...i}=e;if(!n&&!r)throw new Error("Must provide either datasetName or datasetId");const a=n!=null?n:(await this.readDataset({datasetName:r})).id;Q(a);const s=await this.caller.call(z(),`${this.apiUrl}/datasets/${a}`,{method:"PATCH",headers:{...this.headers,"Content-Type":"application/json"},body:JSON.stringify(i),signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await G(s,"update dataset"),await s.json()}async deleteDataset({datasetId:e,datasetName:n}){let r="/datasets",i=e;if(e!==void 0&&n!==void 0)throw new Error("Must provide either datasetName or datasetId, not both");if(n!==void 0&&(i=(await this.readDataset({datasetName:n})).id),i!==void 0)Q(i),r+=`/${i}`;else throw new Error("Must provide datasetName or datasetId");const a=await this.caller.call(z(),this.apiUrl+r,{method:"DELETE",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});await G(a,`delete ${r}`),await a.json()}async indexDataset({datasetId:e,datasetName:n,tag:r}){let i=e;if(!i&&!n)throw new Error("Must provide either datasetName or datasetId");if(i&&n)throw new Error("Must provide either datasetName or datasetId, not both");i||(i=(await this.readDataset({datasetName:n})).id),Q(i);const a={tag:r},s=await this.caller.call(z(),`${this.apiUrl}/datasets/${i}/index`,{method:"POST",headers:{...this.headers,"Content-Type":"application/json"},body:JSON.stringify(a),signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});await G(s,"index dataset"),await s.json()}async similarExamples(e,n,r,{filter:i}={}){const a={limit:r,inputs:e};i!==void 0&&(a.filter=i),Q(n);const s=await this.caller.call(z(),`${this.apiUrl}/datasets/${n}/search`,{method:"POST",headers:{...this.headers,"Content-Type":"application/json"},body:JSON.stringify(a),signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await G(s,"fetch similar examples"),(await s.json()).examples}async createExample(e,n,{datasetId:r,datasetName:i,createdAt:a,exampleId:s,metadata:o,split:u,sourceRunId:l}){let c=r;if(c===void 0&&i===void 0)throw new Error("Must provide either datasetName or datasetId");if(c!==void 0&&i!==void 0)throw new Error("Must provide either datasetName or datasetId, not both");c===void 0&&(c=(await this.readDataset({datasetName:i})).id);const d=a||new Date,f={dataset_id:c,inputs:e,outputs:n,created_at:d==null?void 0:d.toISOString(),id:s,metadata:o,split:u,source_run_id:l},h=await this.caller.call(z(),`${this.apiUrl}/examples`,{method:"POST",headers:{...this.headers,"Content-Type":"application/json"},body:JSON.stringify(f),signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await G(h,"create example"),await h.json()}async createExamples(e){const{inputs:n,outputs:r,metadata:i,sourceRunIds:a,exampleIds:s,datasetId:o,datasetName:u}=e;let l=o;if(l===void 0&&u===void 0)throw new Error("Must provide either datasetName or datasetId");if(l!==void 0&&u!==void 0)throw new Error("Must provide either datasetName or datasetId, not both");l===void 0&&(l=(await this.readDataset({datasetName:u})).id);const c=n.map((h,p)=>({dataset_id:l,inputs:h,outputs:r?r[p]:void 0,metadata:i?i[p]:void 0,split:e.splits?e.splits[p]:void 0,id:s?s[p]:void 0,source_run_id:a?a[p]:void 0})),d=await this.caller.call(z(),`${this.apiUrl}/examples/bulk`,{method:"POST",headers:{...this.headers,"Content-Type":"application/json"},body:JSON.stringify(c),signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await G(d,"create examples"),await d.json()}async createLLMExample(e,n,r){return this.createExample({input:e},{output:n},r)}async createChatExample(e,n,r){const i=e.map(s=>of(s)?uf(s):s),a=of(n)?uf(n):n;return this.createExample({input:i},{output:a},r)}async readExample(e){Q(e);const n=`/examples/${e}`;return await this._get(n)}async*listExamples({datasetId:e,datasetName:n,exampleIds:r,asOf:i,splits:a,inlineS3Urls:s,metadata:o,limit:u,offset:l,filter:c}={}){let d;if(e!==void 0&&n!==void 0)throw new Error("Must provide either datasetName or datasetId, not both");if(e!==void 0)d=e;else if(n!==void 0)d=(await this.readDataset({datasetName:n})).id;else throw new Error("Must provide a datasetName or datasetId");const f=new URLSearchParams({dataset:d}),h=i?typeof i=="string"?i:i==null?void 0:i.toISOString():void 0;h&&f.append("as_of",h);const p=s!=null?s:!0;if(f.append("inline_s3_urls",p.toString()),r!==void 0)for(const _ of r)f.append("id",_);if(a!==void 0)for(const _ of a)f.append("splits",_);if(o!==void 0){const _=JSON.stringify(o);f.append("metadata",_)}u!==void 0&&f.append("limit",u.toString()),l!==void 0&&f.append("offset",l.toString()),c!==void 0&&f.append("filter",c);let v=0;for await(const _ of this._getPaginated("/examples",f)){for(const m of _)yield m,v++;if(u!==void 0&&v>=u)break}}async deleteExample(e){Q(e);const n=`/examples/${e}`,r=await this.caller.call(z(),this.apiUrl+n,{method:"DELETE",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});await G(r,`delete ${n}`),await r.json()}async updateExample(e,n){Q(e);const r=await this.caller.call(z(),`${this.apiUrl}/examples/${e}`,{method:"PATCH",headers:{...this.headers,"Content-Type":"application/json"},body:JSON.stringify(n),signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await G(r,"update example"),await r.json()}async updateExamples(e){const n=await this.caller.call(z(),`${this.apiUrl}/examples/bulk`,{method:"PATCH",headers:{...this.headers,"Content-Type":"application/json"},body:JSON.stringify(e),signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await G(n,"update examples"),await n.json()}async listDatasetSplits({datasetId:e,datasetName:n,asOf:r}){let i;if(e===void 0&&n===void 0)throw new Error("Must provide dataset name or ID");if(e!==void 0&&n!==void 0)throw new Error("Must provide either datasetName or datasetId, not both");e===void 0?i=(await this.readDataset({datasetName:n})).id:i=e,Q(i);const a=new URLSearchParams,s=r?typeof r=="string"?r:r==null?void 0:r.toISOString():void 0;return s&&a.append("as_of",s),await this._get(`/datasets/${i}/splits`,a)}async updateDatasetSplits({datasetId:e,datasetName:n,splitName:r,exampleIds:i,remove:a=!1}){let s;if(e===void 0&&n===void 0)throw new Error("Must provide dataset name or ID");if(e!==void 0&&n!==void 0)throw new Error("Must provide either datasetName or datasetId, not both");e===void 0?s=(await this.readDataset({datasetName:n})).id:s=e,Q(s);const o={split_name:r,examples:i.map(l=>(Q(l),l)),remove:a},u=await this.caller.call(z(),`${this.apiUrl}/datasets/${s}/splits`,{method:"PUT",headers:{...this.headers,"Content-Type":"application/json"},body:JSON.stringify(o),signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});await G(u,"update dataset splits",!0)}async evaluateRun(e,n,{sourceInfo:r,loadChildRuns:i,referenceExample:a}={loadChildRuns:!1}){Im("This method is deprecated and will be removed in future LangSmith versions, use `evaluate` from `langsmith/evaluation` instead.");let s;if(typeof e=="string")s=await this.readRun(e,{loadChildRuns:i});else if(typeof e=="object"&&"id"in e)s=e;else throw new Error(`Invalid run type: ${typeof e}`);s.reference_example_id!==null&&s.reference_example_id!==void 0&&(a=await this.readExample(s.reference_example_id));const o=await n.evaluateRun(s,a),[u,l]=await this._logEvaluationFeedback(o,s,r);return l[0]}async createFeedback(e,n,{score:r,value:i,correction:a,comment:s,sourceInfo:o,feedbackSourceType:u="api",sourceRunId:l,feedbackId:c,feedbackConfig:d,projectId:f,comparativeExperimentId:h}){var g;if(!e&&!f)throw new Error("One of runId or projectId must be provided");if(e&&f)throw new Error("Only one of runId or projectId can be provided");const p={type:u!=null?u:"api",metadata:o!=null?o:{}};l!==void 0&&(p==null?void 0:p.metadata)!==void 0&&!p.metadata.__run&&(p.metadata.__run={run_id:l}),(p==null?void 0:p.metadata)!==void 0&&((g=p.metadata.__run)==null?void 0:g.run_id)!==void 0&&Q(p.metadata.__run.run_id);const v={id:c!=null?c:nt(),run_id:e,key:n,score:r,value:i,correction:a,comment:s,feedback_source:p,comparative_experiment_id:h,feedbackConfig:d,session_id:f},_=`${this.apiUrl}/feedback`,m=await this.caller.call(z(),_,{method:"POST",headers:{...this.headers,"Content-Type":"application/json"},body:JSON.stringify(v),signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await G(m,"create feedback",!0),v}async updateFeedback(e,{score:n,value:r,correction:i,comment:a}){const s={};n!=null&&(s.score=n),r!=null&&(s.value=r),i!=null&&(s.correction=i),a!=null&&(s.comment=a),Q(e);const o=await this.caller.call(z(),`${this.apiUrl}/feedback/${e}`,{method:"PATCH",headers:{...this.headers,"Content-Type":"application/json"},body:JSON.stringify(s),signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});await G(o,"update feedback",!0)}async readFeedback(e){Q(e);const n=`/feedback/${e}`;return await this._get(n)}async deleteFeedback(e){Q(e);const n=`/feedback/${e}`,r=await this.caller.call(z(),this.apiUrl+n,{method:"DELETE",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});await G(r,`delete ${n}`),await r.json()}async*listFeedback({runIds:e,feedbackKeys:n,feedbackSourceTypes:r}={}){const i=new URLSearchParams;if(e&&i.append("run",e.join(",")),n)for(const a of n)i.append("key",a);if(r)for(const a of r)i.append("source",a);for await(const a of this._getPaginated("/feedback",i))yield*a}async createPresignedFeedbackToken(e,n,{expiration:r,feedbackConfig:i}={}){const a={run_id:e,feedback_key:n,feedback_config:i};return r?typeof r=="string"?a.expires_at=r:((r==null?void 0:r.hours)||(r==null?void 0:r.minutes)||(r==null?void 0:r.days))&&(a.expires_in=r):a.expires_in={hours:3},await(await this.caller.call(z(),`${this.apiUrl}/feedback/tokens`,{method:"POST",headers:{...this.headers,"Content-Type":"application/json"},body:JSON.stringify(a),signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions})).json()}async createComparativeExperiment({name:e,experimentIds:n,referenceDatasetId:r,createdAt:i,description:a,metadata:s,id:o}){var c;if(n.length===0)throw new Error("At least one experiment is required");if(r||(r=(await this.readProject({projectId:n[0]})).reference_dataset_id),!r==null)throw new Error("A reference dataset is required");const u={id:o,name:e,experiment_ids:n,reference_dataset_id:r,description:a,created_at:(c=i!=null?i:new Date)==null?void 0:c.toISOString(),extra:{}};return s&&(u.extra.metadata=s),await(await this.caller.call(z(),`${this.apiUrl}/datasets/comparative`,{method:"POST",headers:{...this.headers,"Content-Type":"application/json"},body:JSON.stringify(u),signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions})).json()}async*listPresignedFeedbackTokens(e){Q(e);const n=new URLSearchParams({run_id:e});for await(const r of this._getPaginated("/feedback/tokens",n))yield*r}_selectEvalResults(e){let n;return"results"in e?n=e.results:n=[e],n}async _logEvaluationFeedback(e,n,r){const i=this._selectEvalResults(e),a=[];for(const s of i){let o=r||{};s.evaluatorInfo&&(o={...s.evaluatorInfo,...o});let u=null;s.targetRunId?u=s.targetRunId:n&&(u=n.id),a.push(await this.createFeedback(u,s.key,{score:s.score,value:s.value,comment:s.comment,correction:s.correction,sourceInfo:o,sourceRunId:s.sourceRunId,feedbackConfig:s.feedbackConfig,feedbackSourceType:"model"}))}return[i,a]}async logEvaluationFeedback(e,n,r){const[i]=await this._logEvaluationFeedback(e,n,r);return i}async*listAnnotationQueues(e={}){const{queueIds:n,name:r,nameContains:i,limit:a}=e,s=new URLSearchParams;n&&n.forEach((u,l)=>{Q(u,`queueIds[${l}]`),s.append("ids",u)}),r&&s.append("name",r),i&&s.append("name_contains",i),s.append("limit",(a!==void 0?Math.min(a,100):100).toString());let o=0;for await(const u of this._getPaginated("/annotation-queues",s))if(yield*u,o++,a!==void 0&&o>=a)break}async createAnnotationQueue(e){const{name:n,description:r,queueId:i}=e,a={name:n,description:r,id:i||nt()},s=await this.caller.call(z(),`${this.apiUrl}/annotation-queues`,{method:"POST",headers:{...this.headers,"Content-Type":"application/json"},body:JSON.stringify(Object.fromEntries(Object.entries(a).filter(([u,l])=>l!==void 0))),signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await G(s,"create annotation queue"),await s.json()}async readAnnotationQueue(e){const n=await this.listAnnotationQueues({queueIds:[e]}).next();if(n.done)throw new Error(`Annotation queue with ID ${e} not found`);return n.value}async updateAnnotationQueue(e,n){const{name:r,description:i}=n,a=await this.caller.call(z(),`${this.apiUrl}/annotation-queues/${Q(e,"queueId")}`,{method:"PATCH",headers:{...this.headers,"Content-Type":"application/json"},body:JSON.stringify({name:r,description:i}),signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});await G(a,"update annotation queue")}async deleteAnnotationQueue(e){const n=await this.caller.call(z(),`${this.apiUrl}/annotation-queues/${Q(e,"queueId")}`,{method:"DELETE",headers:{...this.headers,Accept:"application/json"},signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});await G(n,"delete annotation queue")}async addRunsToAnnotationQueue(e,n){const r=await this.caller.call(z(),`${this.apiUrl}/annotation-queues/${Q(e,"queueId")}/runs`,{method:"POST",headers:{...this.headers,"Content-Type":"application/json"},body:JSON.stringify(n.map((i,a)=>Q(i,`runIds[${a}]`).toString())),signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});await G(r,"add runs to annotation queue")}async getRunFromAnnotationQueue(e,n){const r=`/annotation-queues/${Q(e,"queueId")}/run`,i=await this.caller.call(z(),`${this.apiUrl}${r}/${n}`,{method:"GET",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await G(i,"get run from annotation queue"),await i.json()}async _currentTenantIsOwner(e){const n=await this._getSettings();return e=="-"||n.tenant_handle===e}async _ownerConflictError(e,n){const r=await this._getSettings();return new Error(`Cannot ${e} for another tenant.

      Current tenant: ${r.tenant_handle}

      Requested tenant: ${n}`)}async _getLatestCommitHash(e){const n=await this.caller.call(z(),`${this.apiUrl}/commits/${e}/?limit=${1}&offset=${0}`,{method:"GET",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions}),r=await n.json();if(!n.ok){const i=typeof r.detail=="string"?r.detail:JSON.stringify(r.detail),a=new Error(`Error ${n.status}: ${n.statusText}
${i}`);throw a.statusCode=n.status,a}if(r.commits.length!==0)return r.commits[0].commit_hash}async _likeOrUnlikePrompt(e,n){const[r,i,a]=on(e),s=await this.caller.call(z(),`${this.apiUrl}/likes/${r}/${i}`,{method:"POST",body:JSON.stringify({like:n}),headers:{...this.headers,"Content-Type":"application/json"},signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await G(s,`${n?"like":"unlike"} prompt`),await s.json()}async _getPromptUrl(e){const[n,r,i]=on(e);if(await this._currentTenantIsOwner(n)){const a=await this._getSettings();return i!=="latest"?`${this.getHostUrl()}/prompts/${r}/${i.substring(0,8)}?organizationId=${a.id}`:`${this.getHostUrl()}/prompts/${r}?organizationId=${a.id}`}else return i!=="latest"?`${this.getHostUrl()}/hub/${n}/${r}/${i.substring(0,8)}`:`${this.getHostUrl()}/hub/${n}/${r}`}async promptExists(e){return!!await this.getPrompt(e)}async likePrompt(e){return this._likeOrUnlikePrompt(e,!0)}async unlikePrompt(e){return this._likeOrUnlikePrompt(e,!1)}async*listCommits(e){for await(const n of this._getPaginated(`/commits/${e}/`,new URLSearchParams,r=>r.commits))yield*n}async*listPrompts(e){var r;const n=new URLSearchParams;n.append("sort_field",(r=e==null?void 0:e.sortField)!=null?r:"updated_at"),n.append("sort_direction","desc"),n.append("is_archived",(!!(e!=null&&e.isArchived)).toString()),(e==null?void 0:e.isPublic)!==void 0&&n.append("is_public",e.isPublic.toString()),e!=null&&e.query&&n.append("query",e.query);for await(const i of this._getPaginated("/repos",n,a=>a.repos))yield*i}async getPrompt(e){const[n,r,i]=on(e),a=await this.caller.call(z(),`${this.apiUrl}/repos/${n}/${r}`,{method:"GET",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});if(a.status===404)return null;await G(a,"get prompt");const s=await a.json();return s.repo?s.repo:null}async createPrompt(e,n){const r=await this._getSettings();if((n==null?void 0:n.isPublic)&&!r.tenant_handle)throw new Error(`Cannot create a public prompt without first

        creating a LangChain Hub handle. 
        You can add a handle by creating a public prompt at:

        https://smith.langchain.com/prompts`);const[i,a,s]=on(e);if(!await this._currentTenantIsOwner(i))throw await this._ownerConflictError("create a prompt",i);const o={repo_handle:a,...(n==null?void 0:n.description)&&{description:n.description},...(n==null?void 0:n.readme)&&{readme:n.readme},...(n==null?void 0:n.tags)&&{tags:n.tags},is_public:!!(n!=null&&n.isPublic)},u=await this.caller.call(z(),`${this.apiUrl}/repos/`,{method:"POST",headers:{...this.headers,"Content-Type":"application/json"},body:JSON.stringify(o),signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});await G(u,"create prompt");const{repo:l}=await u.json();return l}async createCommit(e,n,r){if(!await this.promptExists(e))throw new Error("Prompt does not exist, you must create it first.");const[i,a,s]=on(e),o=(r==null?void 0:r.parentCommitHash)==="latest"||!(r!=null&&r.parentCommitHash)?await this._getLatestCommitHash(`${i}/${a}`):r==null?void 0:r.parentCommitHash,u={manifest:JSON.parse(JSON.stringify(n)),parent_commit:o},l=await this.caller.call(z(),`${this.apiUrl}/commits/${i}/${a}`,{method:"POST",headers:{...this.headers,"Content-Type":"application/json"},body:JSON.stringify(u),signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});await G(l,"create commit");const c=await l.json();return this._getPromptUrl(`${i}/${a}${c.commit_hash?`:${c.commit_hash}`:""}`)}async updatePrompt(e,n){if(!await this.promptExists(e))throw new Error("Prompt does not exist, you must create it first.");const[r,i]=on(e);if(!await this._currentTenantIsOwner(r))throw await this._ownerConflictError("update a prompt",r);const a={};if((n==null?void 0:n.description)!==void 0&&(a.description=n.description),(n==null?void 0:n.readme)!==void 0&&(a.readme=n.readme),(n==null?void 0:n.tags)!==void 0&&(a.tags=n.tags),(n==null?void 0:n.isPublic)!==void 0&&(a.is_public=n.isPublic),(n==null?void 0:n.isArchived)!==void 0&&(a.is_archived=n.isArchived),Object.keys(a).length===0)throw new Error("No valid update options provided");const s=await this.caller.call(z(),`${this.apiUrl}/repos/${r}/${i}`,{method:"PATCH",body:JSON.stringify(a),headers:{...this.headers,"Content-Type":"application/json"},signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await G(s,"update prompt"),s.json()}async deletePrompt(e){if(!await this.promptExists(e))throw new Error("Prompt does not exist, you must create it first.");const[n,r,i]=on(e);if(!await this._currentTenantIsOwner(n))throw await this._ownerConflictError("delete a prompt",n);return await(await this.caller.call(z(),`${this.apiUrl}/repos/${n}/${r}`,{method:"DELETE",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions})).json()}async pullPromptCommit(e,n){const[r,i,a]=on(e),s=await this._getServerInfo(),o=Gb(s.version,"0.5.23");let u=a;if(!o&&a==="latest"){const d=await this._getLatestCommitHash(`${r}/${i}`);if(d)u=d;else throw new Error("No commits found")}const l=await this.caller.call(z(),`${this.apiUrl}/commits/${r}/${i}/${u}${n!=null&&n.includeModel?"?include_model=true":""}`,{method:"GET",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});await G(l,"pull prompt commit");const c=await l.json();return{owner:r,repo:i,commit_hash:c.commit_hash,manifest:c.manifest,examples:c.examples}}async _pullPrompt(e,n){const r=await this.pullPromptCommit(e,{includeModel:n==null?void 0:n.includeModel});return JSON.stringify(r.manifest)}async pushPrompt(e,n){return await this.promptExists(e)?n&&Object.keys(n).some(i=>i!=="object")&&await this.updatePrompt(e,{description:n==null?void 0:n.description,readme:n==null?void 0:n.readme,tags:n==null?void 0:n.tags,isPublic:n==null?void 0:n.isPublic}):await this.createPrompt(e,{description:n==null?void 0:n.description,readme:n==null?void 0:n.readme,tags:n==null?void 0:n.tags,isPublic:n==null?void 0:n.isPublic}),n!=null&&n.object?await this.createCommit(e,n==null?void 0:n.object,{parentCommitHash:n==null?void 0:n.parentCommitHash}):await this._getPromptUrl(e)}async clonePublicDataset(e,n={}){var f,h;const{sourceApiUrl:r=this.apiUrl,datasetName:i}=n,[a,s]=this.parseTokenOrUrl(e,r),o=new da({apiUrl:a,apiKey:"placeholder"}),u=await o.readSharedDataset(s),l=i||u.name;try{if(await this.hasDataset({datasetId:l})){console.log(`Dataset ${l} already exists in your tenant. Skipping.`);return}}catch{}const c=await o.listSharedExamples(s),d=await this.createDataset(l,{description:u.description,dataType:u.data_type||"kv",inputsSchema:(f=u.inputs_schema_definition)!=null?f:void 0,outputsSchema:(h=u.outputs_schema_definition)!=null?h:void 0});try{await this.createExamples({inputs:c.map(p=>p.inputs),outputs:c.flatMap(p=>p.outputs?[p.outputs]:[]),datasetId:d.id})}catch(p){throw console.error(`An error occurred while creating dataset ${l}. You should delete it manually.`),p}}parseTokenOrUrl(e,n,r=2,i="dataset"){try{return Q(e),[n,e]}catch{}try{const s=new URL(e).pathname.split("/").filter(o=>o!=="");if(s.length>=r){const o=s[s.length-r];return[n,o]}else throw new Error(`Invalid public ${i} URL: ${e}`)}catch{throw new Error(`Invalid public ${i} URL or token: ${e}`)}}awaitPendingTraceBatches(){return Promise.all(this.autoBatchQueue.items.map(([,,e])=>e))}}const Um="0.1.65";let Vt;const rE=()=>typeof window<"u"&&typeof window.document<"u",iE=()=>typeof globalThis=="object"&&globalThis.constructor&&globalThis.constructor.name==="DedicatedWorkerGlobalScope",aE=()=>typeof window<"u"&&window.name==="nodejs"||typeof navigator<"u"&&(navigator.userAgent.includes("Node.js")||navigator.userAgent.includes("jsdom")),Fm=()=>typeof Deno<"u",sE=()=>typeof process<"u"&&typeof process.versions<"u"&&typeof process.versions.node<"u"&&!Fm(),oE=()=>Vt||(rE()?Vt="browser":sE()?Vt="node":iE()?Vt="webworker":aE()?Vt="jsdom":Fm()?Vt="deno":Vt="other",Vt);let ru;async function zm(){if(ru===void 0){const t=oE(),e=cE();ru={library:"langsmith",runtime:t,sdk:"langsmith-js",sdk_version:Um,...e}}return ru}function uE(){const t=lE()||{},e={},n=["LANGCHAIN_API_KEY","LANGCHAIN_ENDPOINT","LANGCHAIN_TRACING_V2","LANGCHAIN_PROJECT","LANGCHAIN_SESSION"];for(const[r,i]of Object.entries(t))r.startsWith("LANGCHAIN_")&&typeof i=="string"&&!n.includes(r)&&!r.toLowerCase().includes("key")&&!r.toLowerCase().includes("secret")&&!r.toLowerCase().includes("token")&&(r==="LANGCHAIN_REVISION_ID"?e.revision_id=i:e[r]=i);return e}function lE(){try{return typeof process<"u"&&process.env?Object.entries(process.env).reduce((t,[e,n])=>(t[e]=String(n),t),{}):void 0}catch{return}}function Vn(t){var e;try{return typeof process<"u"?(e=process.env)==null?void 0:e[t]:void 0}catch{return}}function Fn(t){return Vn(`LANGSMITH_${t}`)||Vn(`LANGCHAIN_${t}`)}let iu;function cE(){if(iu!==void 0)return iu;const t=["VERCEL_GIT_COMMIT_SHA","NEXT_PUBLIC_VERCEL_GIT_COMMIT_SHA","COMMIT_REF","RENDER_GIT_COMMIT","CI_COMMIT_SHA","CIRCLE_SHA1","CF_PAGES_COMMIT_SHA","REACT_APP_GIT_SHA","SOURCE_VERSION","GITHUB_SHA","TRAVIS_COMMIT","GIT_COMMIT","BUILD_VCS_NUMBER","bamboo_planRepository_revision","Build.SourceVersion","BITBUCKET_COMMIT","DRONE_COMMIT_SHA","SEMAPHORE_GIT_SHA","BUILDKITE_COMMIT"],e={};for(const n of t){const r=Vn(n);r!==void 0&&(e[n]=r)}return iu=e,e}const dE=t=>t!==void 0?t:!!["TRACING_V2","TRACING"].find(n=>Fn(n)==="true"),au=Symbol.for("lc:context_variables");function fE(t){return t.replace(/[-:.]/g,"")}function hE(t,e,n=1){const r=n.toFixed(0).slice(0,3).padStart(3,"0");return fE(`${new Date(t).toISOString().slice(0,-1)}${r}Z`)+e}class Ms{constructor(e,n){Object.defineProperty(this,"metadata",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"tags",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.metadata=e,this.tags=n}static fromHeader(e){const n=e.split(",");let r={},i=[];for(const a of n){const[s,o]=a.split("="),u=decodeURIComponent(o);s==="langsmith-metadata"?r=JSON.parse(u):s==="langsmith-tags"&&(i=u.split(","))}return new Ms(r,i)}toHeader(){const e=[];return this.metadata&&Object.keys(this.metadata).length>0&&e.push(`langsmith-metadata=${encodeURIComponent(JSON.stringify(this.metadata))}`),this.tags&&this.tags.length>0&&e.push(`langsmith-tags=${encodeURIComponent(this.tags.join(","))}`),e.join(",")}}class et{constructor(e){var o,u,l,c,d;if(Object.defineProperty(this,"id",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"run_type",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"project_name",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"parent_run",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"child_runs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"start_time",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"end_time",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"extra",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"tags",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"error",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"serialized",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"inputs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"outputs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"reference_example_id",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"client",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"events",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"trace_id",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"dotted_order",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"tracingEnabled",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"execution_order",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"child_execution_order",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Bm(e)){Object.assign(this,{...e});return}const n=et.getDefaultConfig(),{metadata:r,...i}=e,a=(o=i.client)!=null?o:et.getSharedClient(),s={...r,...(u=i==null?void 0:i.extra)==null?void 0:u.metadata};if(i.extra={...i.extra,metadata:s},Object.assign(this,{...n,...i,client:a}),this.trace_id||(this.parent_run?this.trace_id=(l=this.parent_run.trace_id)!=null?l:this.id:this.trace_id=this.id),(c=this.execution_order)!=null||(this.execution_order=1),(d=this.child_execution_order)!=null||(this.child_execution_order=1),!this.dotted_order){const f=hE(this.start_time,this.id,this.execution_order);this.parent_run?this.dotted_order=this.parent_run.dotted_order+"."+f:this.dotted_order=f}}static getDefaultConfig(){var e,n,r;return{id:nt(),run_type:"chain",project_name:(n=(e=Vn("LANGCHAIN_PROJECT"))!=null?e:Vn("LANGCHAIN_SESSION"))!=null?n:"default",child_runs:[],api_url:(r=Vn("LANGCHAIN_ENDPOINT"))!=null?r:"http://localhost:1984",api_key:Vn("LANGCHAIN_API_KEY"),caller_options:{},start_time:Date.now(),serialized:{},inputs:{},extra:{}}}static getSharedClient(){return et.sharedClient||(et.sharedClient=new da),et.sharedClient}createChild(e){var u,l,c,d,f,h,p;const n=this.child_execution_order+1,r=new et({...e,parent_run:this,project_name:this.project_name,client:this.client,tracingEnabled:this.tracingEnabled,execution_order:n,child_execution_order:n});au in this&&(r[au]=this[au]);const i=Symbol.for("lc:child_config"),a=(l=(u=e.extra)==null?void 0:u[i])!=null?l:this.extra[i];if(mE(a)){const v={...a},_=pE(v.callbacks)?(d=(c=v.callbacks).copy)==null?void 0:d.call(c):void 0;_&&(Object.assign(_,{_parentRunId:r.id}),(p=(h=(f=_.handlers)==null?void 0:f.find(Hm))==null?void 0:h.updateFromRunTree)==null||p.call(h,r),v.callbacks=_),r.extra[i]=v}const s=new Set;let o=this;for(;o!=null&&!s.has(o.id);)s.add(o.id),o.child_execution_order=Math.max(o.child_execution_order,n),o=o.parent_run;return this.child_runs.push(r),r}async end(e,n,r=Date.now(),i){var a,s,o;this.outputs=(a=this.outputs)!=null?a:e,this.error=(s=this.error)!=null?s:n,this.end_time=(o=this.end_time)!=null?o:r,i&&Object.keys(i).length>0&&(this.extra=this.extra?{...this.extra,metadata:{...this.extra.metadata,...i}}:{metadata:i})}_convertToCreate(e,n,r=!0){var u,l;const i=(u=e.extra)!=null?u:{};if(i.runtime||(i.runtime={}),n)for(const[c,d]of Object.entries(n))i.runtime[c]||(i.runtime[c]=d);let a,s;return r?(s=(l=e.parent_run)==null?void 0:l.id,a=[]):(a=e.child_runs.map(c=>this._convertToCreate(c,n,r)),s=void 0),{id:e.id,name:e.name,start_time:e.start_time,end_time:e.end_time,run_type:e.run_type,reference_example_id:e.reference_example_id,extra:i,serialized:e.serialized,error:e.error,inputs:e.inputs,outputs:e.outputs,session_name:e.project_name,child_runs:a,parent_run_id:s,trace_id:e.trace_id,dotted_order:e.dotted_order,tags:e.tags}}async postRun(e=!0){try{const n=await zm(),r=await this._convertToCreate(this,n,!0);if(await this.client.createRun(r),!e){Im("Posting with excludeChildRuns=false is deprecated and will be removed in a future version.");for(const i of this.child_runs)await i.postRun(!1)}}catch(n){console.error(`Error in postRun for run ${this.id}:`,n)}}async patchRun(){var e;try{const n={end_time:this.end_time,error:this.error,inputs:this.inputs,outputs:this.outputs,parent_run_id:(e=this.parent_run)==null?void 0:e.id,reference_example_id:this.reference_example_id,extra:this.extra,events:this.events,dotted_order:this.dotted_order,trace_id:this.trace_id,tags:this.tags};await this.client.updateRun(this.id,n)}catch(n){console.error(`Error in patchRun for run ${this.id}`,n)}}toJSON(){return this._convertToCreate(this,void 0,!1)}static fromRunnableConfig(e,n){var l,c,d,f,h,p,v;const r=e==null?void 0:e.callbacks;let i,a,s,o=dE();if(r){const _=(c=(l=r==null?void 0:r.getParentRunId)==null?void 0:l.call(r))!=null?c:"",m=(d=r==null?void 0:r.handlers)==null?void 0:d.find(g=>(g==null?void 0:g.name)=="langchain_tracer");i=(f=m==null?void 0:m.getRun)==null?void 0:f.call(m,_),a=m==null?void 0:m.projectName,s=m==null?void 0:m.client,o=o||!!m}return i?new et({name:i.name,id:i.id,trace_id:i.trace_id,dotted_order:i.dotted_order,client:s,tracingEnabled:o,project_name:a,tags:[...new Set(((h=i==null?void 0:i.tags)!=null?h:[]).concat((p=e==null?void 0:e.tags)!=null?p:[]))],extra:{metadata:{...(v=i==null?void 0:i.extra)==null?void 0:v.metadata,...e==null?void 0:e.metadata}}}).createChild(n):new et({...n,client:s,tracingEnabled:o,project_name:a})}static fromDottedOrder(e){return this.fromHeaders({"langsmith-trace":e})}static fromHeaders(e,n){var l,c,d,f;const r="get"in e&&typeof e.get=="function"?{"langsmith-trace":e.get("langsmith-trace"),baggage:e.get("baggage")}:e,i=r["langsmith-trace"];if(!i||typeof i!="string")return;const a=i.trim(),s=a.split(".").map(h=>{const[p,v]=h.split("Z");return{strTime:p,time:Date.parse(p+"Z"),uuid:v}}),o=s[0].uuid,u={...n,name:(l=n==null?void 0:n.name)!=null?l:"parent",run_type:(c=n==null?void 0:n.run_type)!=null?c:"chain",start_time:(d=n==null?void 0:n.start_time)!=null?d:Date.now(),id:(f=s.at(-1))==null?void 0:f.uuid,trace_id:o,dotted_order:a};if(r.baggage&&typeof r.baggage=="string"){const h=Ms.fromHeader(r.baggage);u.metadata=h.metadata,u.tags=h.tags}return new et(u)}toHeaders(e){var r;const n={"langsmith-trace":this.dotted_order,baggage:new Ms((r=this.extra)==null?void 0:r.metadata,this.tags).toHeader()};if(e)for(const[i,a]of Object.entries(n))e.set(i,a);return n}}Object.defineProperty(et,"sharedClient",{enumerable:!0,configurable:!0,writable:!0,value:null});function Bm(t){return t!==void 0&&typeof t.createChild=="function"&&typeof t.postRun=="function"}function Hm(t){return typeof t=="object"&&t!=null&&typeof t.name=="string"&&t.name==="langchain_tracer"}function Af(t){return Array.isArray(t)&&t.some(e=>Hm(e))}function pE(t){return typeof t=="object"&&t!=null&&Array.isArray(t.handlers)}function mE(t){var e;return t!==void 0&&typeof t.callbacks=="object"&&(Af((e=t.callbacks)==null?void 0:e.handlers)||Af(t.callbacks))}class gE{getStore(){}run(e,n){return n()}}const su=Symbol.for("ls:tracing_async_local_storage"),yE=new gE;class vE{getInstance(){var e;return(e=globalThis[su])!=null?e:yE}initializeGlobalInstance(e){globalThis[su]===void 0&&(globalThis[su]=e)}}const _E=new vE,wE=()=>{const t=_E.getInstance().getStore();if(!Bm(t))throw new Error(["Could not get the current run tree.","","Please make sure you are calling this method within a traceable function or the tracing is enabled."].join(`
`));return t};function kc(t){return typeof t=="function"&&"langsmith:traceable"in t}/*!
 * https://github.com/Starcounter-Jack/JSON-Patch
 * (c) 2017-2022 Joachim Wester
 * MIT licensed
 */const bE=Object.prototype.hasOwnProperty;function EE(t,e){return bE.call(t,e)}function SE(t){if(Array.isArray(t)){const n=new Array(t.length);for(let r=0;r<n.length;r++)n[r]=""+r;return n}if(Object.keys)return Object.keys(t);let e=[];for(let n in t)EE(t,n)&&e.push(n);return e}function In(t){switch(typeof t){case"object":return JSON.parse(JSON.stringify(t));case"undefined":return null;default:return t}}function ml(t){let e=0;const n=t.length;let r;for(;e<n;){if(r=t.charCodeAt(e),r>=48&&r<=57){e++;continue}return!1}return!0}function kE(t){return t.indexOf("/")===-1&&t.indexOf("~")===-1?t:t.replace(/~/g,"~0").replace(/\//g,"~1")}function Vm(t){return t.replace(/~1/g,"/").replace(/~0/g,"~")}function gl(t){if(t===void 0)return!0;if(t){if(Array.isArray(t)){for(let n=0,r=t.length;n<r;n++)if(gl(t[n]))return!0}else if(typeof t=="object"){const n=SE(t),r=n.length;for(var e=0;e<r;e++)if(gl(t[n[e]]))return!0}}return!1}function Lf(t,e){const n=[t];for(const r in e){const i=typeof e[r]=="object"?JSON.stringify(e[r],null,2):e[r];typeof i<"u"&&n.push(`${r}: ${i}`)}return n.join(`
`)}class Zm extends Error{constructor(e,n,r,i,a){super(Lf(e,{name:n,index:r,operation:i,tree:a})),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:n}),Object.defineProperty(this,"index",{enumerable:!0,configurable:!0,writable:!0,value:r}),Object.defineProperty(this,"operation",{enumerable:!0,configurable:!0,writable:!0,value:i}),Object.defineProperty(this,"tree",{enumerable:!0,configurable:!0,writable:!0,value:a}),Object.setPrototypeOf(this,new.target.prototype),this.message=Lf(e,{name:n,index:r,operation:i,tree:a})}}const pe=Zm,TE=In,Rr={add:function(t,e,n){return t[e]=this.value,{newDocument:n}},remove:function(t,e,n){var r=t[e];return delete t[e],{newDocument:n,removed:r}},replace:function(t,e,n){var r=t[e];return t[e]=this.value,{newDocument:n,removed:r}},move:function(t,e,n){let r=Us(n,this.path);r&&(r=In(r));const i=qn(n,{op:"remove",path:this.from}).removed;return qn(n,{op:"add",path:this.path,value:i}),{newDocument:n,removed:r}},copy:function(t,e,n){const r=Us(n,this.from);return qn(n,{op:"add",path:this.path,value:In(r)}),{newDocument:n}},test:function(t,e,n){return{newDocument:n,test:ha(t[e],this.value)}},_get:function(t,e,n){return this.value=t[e],{newDocument:n}}};var xE={add:function(t,e,n){return ml(e)?t.splice(e,0,this.value):t[e]=this.value,{newDocument:n,index:e}},remove:function(t,e,n){var r=t.splice(e,1);return{newDocument:n,removed:r[0]}},replace:function(t,e,n){var r=t[e];return t[e]=this.value,{newDocument:n,removed:r}},move:Rr.move,copy:Rr.copy,test:Rr.test,_get:Rr._get};function Us(t,e){if(e=="")return t;var n={op:"_get",path:e};return qn(t,n),n.value}function qn(t,e,n=!1,r=!0,i=!0,a=0){if(n&&(typeof n=="function"?n(e,0,t,e.path):Fs(e,0)),e.path===""){let s={newDocument:t};if(e.op==="add")return s.newDocument=e.value,s;if(e.op==="replace")return s.newDocument=e.value,s.removed=t,s;if(e.op==="move"||e.op==="copy")return s.newDocument=Us(t,e.from),e.op==="move"&&(s.removed=t),s;if(e.op==="test"){if(s.test=ha(t,e.value),s.test===!1)throw new pe("Test operation failed","TEST_OPERATION_FAILED",a,e,t);return s.newDocument=t,s}else{if(e.op==="remove")return s.removed=t,s.newDocument=null,s;if(e.op==="_get")return e.value=t,s;if(n)throw new pe("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",a,e,t);return s}}else{r||(t=In(t));const o=(e.path||"").split("/");let u=t,l=1,c=o.length,d,f,h;for(typeof n=="function"?h=n:h=Fs;;){if(f=o[l],f&&f.indexOf("~")!=-1&&(f=Vm(f)),i&&(f=="__proto__"||f=="prototype"&&l>0&&o[l-1]=="constructor"))throw new TypeError("JSON-Patch: modifying `__proto__` or `constructor/prototype` prop is banned for security reasons, if this was on purpose, please set `banPrototypeModifications` flag false and pass it to this function. More info in fast-json-patch README");if(n&&d===void 0&&(u[f]===void 0?d=o.slice(0,l).join("/"):l==c-1&&(d=e.path),d!==void 0&&h(e,0,t,d)),l++,Array.isArray(u)){if(f==="-")f=u.length;else{if(n&&!ml(f))throw new pe("Expected an unsigned base-10 integer value, making the new referenced value the array element with the zero-based index","OPERATION_PATH_ILLEGAL_ARRAY_INDEX",a,e,t);ml(f)&&(f=~~f)}if(l>=c){if(n&&e.op==="add"&&f>u.length)throw new pe("The specified index MUST NOT be greater than the number of elements in the array","OPERATION_VALUE_OUT_OF_BOUNDS",a,e,t);const p=xE[e.op].call(e,u,f,t);if(p.test===!1)throw new pe("Test operation failed","TEST_OPERATION_FAILED",a,e,t);return p}}else if(l>=c){const p=Rr[e.op].call(e,u,f,t);if(p.test===!1)throw new pe("Test operation failed","TEST_OPERATION_FAILED",a,e,t);return p}if(u=u[f],n&&l<c&&(!u||typeof u!="object"))throw new pe("Cannot perform operation at the desired path","OPERATION_PATH_UNRESOLVABLE",a,e,t)}}}function fa(t,e,n,r=!0,i=!0){if(n&&!Array.isArray(e))throw new pe("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");r||(t=In(t));const a=new Array(e.length);for(let s=0,o=e.length;s<o;s++)a[s]=qn(t,e[s],n,!0,i,s),t=a[s].newDocument;return a.newDocument=t,a}function OE(t,e,n){const r=qn(t,e);if(r.test===!1)throw new pe("Test operation failed","TEST_OPERATION_FAILED",n,e,t);return r.newDocument}function Fs(t,e,n,r){if(typeof t!="object"||t===null||Array.isArray(t))throw new pe("Operation is not an object","OPERATION_NOT_AN_OBJECT",e,t,n);if(Rr[t.op]){if(typeof t.path!="string")throw new pe("Operation `path` property is not a string","OPERATION_PATH_INVALID",e,t,n);if(t.path.indexOf("/")!==0&&t.path.length>0)throw new pe('Operation `path` property must start with "/"',"OPERATION_PATH_INVALID",e,t,n);if((t.op==="move"||t.op==="copy")&&typeof t.from!="string")throw new pe("Operation `from` property is not present (applicable in `move` and `copy` operations)","OPERATION_FROM_REQUIRED",e,t,n);if((t.op==="add"||t.op==="replace"||t.op==="test")&&t.value===void 0)throw new pe("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_REQUIRED",e,t,n);if((t.op==="add"||t.op==="replace"||t.op==="test")&&gl(t.value))throw new pe("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_CANNOT_CONTAIN_UNDEFINED",e,t,n);if(n){if(t.op=="add"){var i=t.path.split("/").length,a=r.split("/").length;if(i!==a+1&&i!==a)throw new pe("Cannot perform an `add` operation at the desired path","OPERATION_PATH_CANNOT_ADD",e,t,n)}else if(t.op==="replace"||t.op==="remove"||t.op==="_get"){if(t.path!==r)throw new pe("Cannot perform the operation at a path that does not exist","OPERATION_PATH_UNRESOLVABLE",e,t,n)}else if(t.op==="move"||t.op==="copy"){var s={op:"_get",path:t.from,value:void 0},o=Gm([s],n);if(o&&o.name==="OPERATION_PATH_UNRESOLVABLE")throw new pe("Cannot perform the operation from a path that does not exist","OPERATION_FROM_UNRESOLVABLE",e,t,n)}}}else throw new pe("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",e,t,n)}function Gm(t,e,n){try{if(!Array.isArray(t))throw new pe("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");if(e)fa(In(e),In(t),n||!0);else{n=n||Fs;for(var r=0;r<t.length;r++)n(t[r],r,e,void 0)}}catch(i){if(i instanceof pe)return i;throw i}}function ha(t,e){if(t===e)return!0;if(t&&e&&typeof t=="object"&&typeof e=="object"){var n=Array.isArray(t),r=Array.isArray(e),i,a,s;if(n&&r){if(a=t.length,a!=e.length)return!1;for(i=a;i--!==0;)if(!ha(t[i],e[i]))return!1;return!0}if(n!=r)return!1;var o=Object.keys(t);if(a=o.length,a!==Object.keys(e).length)return!1;for(i=a;i--!==0;)if(!e.hasOwnProperty(o[i]))return!1;for(i=a;i--!==0;)if(s=o[i],!ha(t[s],e[s]))return!1;return!0}return t!==t&&e!==e}const CE=Object.freeze(Object.defineProperty({__proto__:null,JsonPatchError:pe,deepClone:TE,getValueByPointer:Us,applyOperation:qn,applyPatch:fa,applyReducer:OE,validator:Fs,validate:Gm,_areEquals:ha},Symbol.toStringTag,{value:"Module"}));({...CE});var PE=function(t,e){if(typeof t!="string")throw new TypeError("Expected a string");return e=typeof e>"u"?"_":e,t.replace(/([a-z\d])([A-Z])/g,"$1"+e+"$2").replace(/([A-Z]+)([A-Z][a-z\d]+)/g,"$1"+e+"$2").toLowerCase()},Wm={exports:{}};const RE=/[\p{Lu}]/u,IE=/[\p{Ll}]/u,jf=/^[\p{Lu}](?![\p{Lu}])/gu,Jm=/([\p{Alpha}\p{N}_]|$)/u,Qm=/[_.\- ]+/,NE=new RegExp("^"+Qm.source),Df=new RegExp(Qm.source+Jm.source,"gu"),Mf=new RegExp("\\d+"+Jm.source,"gu"),$E=(t,e,n)=>{let r=!1,i=!1,a=!1;for(let s=0;s<t.length;s++){const o=t[s];r&&RE.test(o)?(t=t.slice(0,s)+"-"+t.slice(s),r=!1,a=i,i=!0,s++):i&&a&&IE.test(o)?(t=t.slice(0,s-1)+"-"+t.slice(s-1),a=i,i=!1,r=!0):(r=e(o)===o&&n(o)!==o,a=i,i=n(o)===o&&e(o)!==o)}return t},AE=(t,e)=>(jf.lastIndex=0,t.replace(jf,n=>e(n))),LE=(t,e)=>(Df.lastIndex=0,Mf.lastIndex=0,t.replace(Df,(n,r)=>e(r)).replace(Mf,n=>e(n))),qm=(t,e)=>{if(!(typeof t=="string"||Array.isArray(t)))throw new TypeError("Expected the input to be `string | string[]`");if(e={pascalCase:!1,preserveConsecutiveUppercase:!1,...e},Array.isArray(t)?t=t.map(a=>a.trim()).filter(a=>a.length).join("-"):t=t.trim(),t.length===0)return"";const n=e.locale===!1?a=>a.toLowerCase():a=>a.toLocaleLowerCase(e.locale),r=e.locale===!1?a=>a.toUpperCase():a=>a.toLocaleUpperCase(e.locale);return t.length===1?e.pascalCase?r(t):n(t):(t!==n(t)&&(t=$E(t,n,r)),t=t.replace(NE,""),e.preserveConsecutiveUppercase?t=AE(t,n):t=n(t),e.pascalCase&&(t=r(t.charAt(0))+t.slice(1)),LE(t,r))};Wm.exports=qm;Wm.exports.default=qm;function jE(t,e){return(e==null?void 0:e[t])||PE(t)}function DE(t,e,n){const r={};for(const i in t)Object.hasOwn(t,i)&&(r[e(i,n)]=t[i]);return r}function Uf(t){return Array.isArray(t)?[...t]:{...t}}function ME(t,e){const n=Uf(t);for(const[r,i]of Object.entries(e)){const[a,...s]=r.split(".").reverse();let o=n;for(const u of s.reverse()){if(o[u]===void 0)break;o[u]=Uf(o[u]),o=o[u]}o[a]!==void 0&&(o[a]={lc:1,type:"secret",id:[i]})}return n}function Km(t){const e=Object.getPrototypeOf(t);return typeof t.lc_name=="function"&&(typeof e.lc_name!="function"||t.lc_name()!==e.lc_name())?t.lc_name():t.name}class or{static lc_name(){return this.name}get lc_id(){return[...this.lc_namespace,Km(this.constructor)]}get lc_secrets(){}get lc_attributes(){}get lc_aliases(){}constructor(e,...n){Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"lc_kwargs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.lc_kwargs=e||{}}toJSON(){if(!this.lc_serializable)return this.toJSONNotImplemented();if(this.lc_kwargs instanceof or||typeof this.lc_kwargs!="object"||Array.isArray(this.lc_kwargs))return this.toJSONNotImplemented();const e={},n={},r=Object.keys(this.lc_kwargs).reduce((i,a)=>(i[a]=a in this?this[a]:this.lc_kwargs[a],i),{});for(let i=Object.getPrototypeOf(this);i;i=Object.getPrototypeOf(i))Object.assign(e,Reflect.get(i,"lc_aliases",this)),Object.assign(n,Reflect.get(i,"lc_secrets",this)),Object.assign(r,Reflect.get(i,"lc_attributes",this));return Object.keys(n).forEach(i=>{let a=this,s=r;const[o,...u]=i.split(".").reverse();for(const l of u.reverse()){if(!(l in a)||a[l]===void 0)return;(!(l in s)||s[l]===void 0)&&(typeof a[l]=="object"&&a[l]!=null?s[l]={}:Array.isArray(a[l])&&(s[l]=[])),a=a[l],s=s[l]}o in a&&a[o]!==void 0&&(s[o]=s[o]||a[o])}),{lc:1,type:"constructor",id:this.lc_id,kwargs:DE(Object.keys(n).length?ME(r,n):r,jE,e)}}toJSONNotImplemented(){return{lc:1,type:"not_implemented",id:this.lc_id}}}const UE=()=>typeof window<"u"&&typeof window.document<"u",FE=()=>typeof globalThis=="object"&&globalThis.constructor&&globalThis.constructor.name==="DedicatedWorkerGlobalScope",zE=()=>typeof window<"u"&&window.name==="nodejs"||typeof navigator<"u"&&(navigator.userAgent.includes("Node.js")||navigator.userAgent.includes("jsdom")),Xm=()=>typeof Deno<"u",BE=()=>typeof process<"u"&&typeof process.versions<"u"&&typeof process.versions.node<"u"&&!Xm(),HE=()=>{let t;return UE()?t="browser":BE()?t="node":FE()?t="webworker":zE()?t="jsdom":Xm()?t="deno":t="other",t};let ou;async function VE(){return ou===void 0&&(ou={library:"langchain-js",runtime:HE()}),ou}function Jr(t){var e;try{return typeof process<"u"?(e=process.env)==null?void 0:e[t]:void 0}catch{return}}class ZE{}class wa extends ZE{get lc_namespace(){return["langchain_core","callbacks",this.name]}get lc_secrets(){}get lc_attributes(){}get lc_aliases(){}static lc_name(){return this.name}get lc_id(){return[...this.lc_namespace,Km(this.constructor)]}constructor(e){var n,r,i,a,s,o,u;super(),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"lc_kwargs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"ignoreLLM",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"ignoreChain",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"ignoreAgent",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"ignoreRetriever",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"ignoreCustomEvent",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"raiseError",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"awaitHandlers",{enumerable:!0,configurable:!0,writable:!0,value:Jr("LANGCHAIN_CALLBACKS_BACKGROUND")==="false"}),this.lc_kwargs=e||{},e&&(this.ignoreLLM=(n=e.ignoreLLM)!=null?n:this.ignoreLLM,this.ignoreChain=(r=e.ignoreChain)!=null?r:this.ignoreChain,this.ignoreAgent=(i=e.ignoreAgent)!=null?i:this.ignoreAgent,this.ignoreRetriever=(a=e.ignoreRetriever)!=null?a:this.ignoreRetriever,this.ignoreCustomEvent=(s=e.ignoreCustomEvent)!=null?s:this.ignoreCustomEvent,this.raiseError=(o=e.raiseError)!=null?o:this.raiseError,this.awaitHandlers=this.raiseError||((u=e._awaitHandler)!=null?u:this.awaitHandlers))}copy(){return new this.constructor(this)}toJSON(){return or.prototype.toJSON.call(this)}toJSONNotImplemented(){return or.prototype.toJSONNotImplemented.call(this)}static fromMethods(e){class n extends wa{constructor(){super(),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:nt()}),Object.assign(this,e)}}return new n}}function uu(t,e){return t&&!Array.isArray(t)&&typeof t=="object"?t:{[e]:t}}function GE(t){return t.replace(/[-:.]/g,"")}function WE(t,e,n){const r=n.toFixed(0).slice(0,3).padStart(3,"0");return GE(`${new Date(t).toISOString().slice(0,-1)}${r}Z`)+e}function pi(t){return typeof t._addRunToRunMap=="function"}class ba extends wa{constructor(e){super(...arguments),Object.defineProperty(this,"runMap",{enumerable:!0,configurable:!0,writable:!0,value:new Map})}copy(){return this}stringifyError(e){return e instanceof Error?e.message+(e!=null&&e.stack?`

${e.stack}`:""):typeof e=="string"?e:`${e}`}_addChildRun(e,n){e.child_runs.push(n)}_addRunToRunMap(e){const n=WE(e.start_time,e.id,e.execution_order),r={...e};if(r.parent_run_id!==void 0){const i=this.runMap.get(r.parent_run_id);i&&(this._addChildRun(i,r),i.child_execution_order=Math.max(i.child_execution_order,r.child_execution_order),r.trace_id=i.trace_id,i.dotted_order!==void 0&&(r.dotted_order=[i.dotted_order,n].join(".")))}else r.trace_id=r.id,r.dotted_order=n;return this.runMap.set(r.id,r),r}async _endTrace(e){var r;const n=e.parent_run_id!==void 0&&this.runMap.get(e.parent_run_id);n?n.child_execution_order=Math.max(n.child_execution_order,e.child_execution_order):await this.persistRun(e),this.runMap.delete(e.id),await((r=this.onRunUpdate)==null?void 0:r.call(this,e))}_getExecutionOrder(e){const n=e!==void 0&&this.runMap.get(e);return n?n.child_execution_order+1:1}_createRunForLLMStart(e,n,r,i,a,s,o,u){const l=this._getExecutionOrder(i),c=Date.now(),d=o?{...a,metadata:o}:a,f={id:r,name:u!=null?u:e.id[e.id.length-1],parent_run_id:i,start_time:c,serialized:e,events:[{name:"start",time:new Date(c).toISOString()}],inputs:{prompts:n},execution_order:l,child_runs:[],child_execution_order:l,run_type:"llm",extra:d!=null?d:{},tags:s||[]};return this._addRunToRunMap(f)}async handleLLMStart(e,n,r,i,a,s,o,u){var c,d,f;const l=(c=this.runMap.get(r))!=null?c:this._createRunForLLMStart(e,n,r,i,a,s,o,u);return await((d=this.onRunCreate)==null?void 0:d.call(this,l)),await((f=this.onLLMStart)==null?void 0:f.call(this,l)),l}_createRunForChatModelStart(e,n,r,i,a,s,o,u){const l=this._getExecutionOrder(i),c=Date.now(),d=o?{...a,metadata:o}:a,f={id:r,name:u!=null?u:e.id[e.id.length-1],parent_run_id:i,start_time:c,serialized:e,events:[{name:"start",time:new Date(c).toISOString()}],inputs:{messages:n},execution_order:l,child_runs:[],child_execution_order:l,run_type:"llm",extra:d!=null?d:{},tags:s||[]};return this._addRunToRunMap(f)}async handleChatModelStart(e,n,r,i,a,s,o,u){var c,d,f;const l=(c=this.runMap.get(r))!=null?c:this._createRunForChatModelStart(e,n,r,i,a,s,o,u);return await((d=this.onRunCreate)==null?void 0:d.call(this,l)),await((f=this.onLLMStart)==null?void 0:f.call(this,l)),l}async handleLLMEnd(e,n){var i;const r=this.runMap.get(n);if(!r||(r==null?void 0:r.run_type)!=="llm")throw new Error("No LLM run to end.");return r.end_time=Date.now(),r.outputs=e,r.events.push({name:"end",time:new Date(r.end_time).toISOString()}),await((i=this.onLLMEnd)==null?void 0:i.call(this,r)),await this._endTrace(r),r}async handleLLMError(e,n){var i;const r=this.runMap.get(n);if(!r||(r==null?void 0:r.run_type)!=="llm")throw new Error("No LLM run to end.");return r.end_time=Date.now(),r.error=this.stringifyError(e),r.events.push({name:"error",time:new Date(r.end_time).toISOString()}),await((i=this.onLLMError)==null?void 0:i.call(this,r)),await this._endTrace(r),r}_createRunForChainStart(e,n,r,i,a,s,o,u){const l=this._getExecutionOrder(i),c=Date.now(),d={id:r,name:u!=null?u:e.id[e.id.length-1],parent_run_id:i,start_time:c,serialized:e,events:[{name:"start",time:new Date(c).toISOString()}],inputs:n,execution_order:l,child_execution_order:l,run_type:o!=null?o:"chain",child_runs:[],extra:s?{metadata:s}:{},tags:a||[]};return this._addRunToRunMap(d)}async handleChainStart(e,n,r,i,a,s,o,u){var c,d,f;const l=(c=this.runMap.get(r))!=null?c:this._createRunForChainStart(e,n,r,i,a,s,o,u);return await((d=this.onRunCreate)==null?void 0:d.call(this,l)),await((f=this.onChainStart)==null?void 0:f.call(this,l)),l}async handleChainEnd(e,n,r,i,a){var o;const s=this.runMap.get(n);if(!s)throw new Error("No chain run to end.");return s.end_time=Date.now(),s.outputs=uu(e,"output"),s.events.push({name:"end",time:new Date(s.end_time).toISOString()}),(a==null?void 0:a.inputs)!==void 0&&(s.inputs=uu(a.inputs,"input")),await((o=this.onChainEnd)==null?void 0:o.call(this,s)),await this._endTrace(s),s}async handleChainError(e,n,r,i,a){var o;const s=this.runMap.get(n);if(!s)throw new Error("No chain run to end.");return s.end_time=Date.now(),s.error=this.stringifyError(e),s.events.push({name:"error",time:new Date(s.end_time).toISOString()}),(a==null?void 0:a.inputs)!==void 0&&(s.inputs=uu(a.inputs,"input")),await((o=this.onChainError)==null?void 0:o.call(this,s)),await this._endTrace(s),s}_createRunForToolStart(e,n,r,i,a,s,o){const u=this._getExecutionOrder(i),l=Date.now(),c={id:r,name:o!=null?o:e.id[e.id.length-1],parent_run_id:i,start_time:l,serialized:e,events:[{name:"start",time:new Date(l).toISOString()}],inputs:{input:n},execution_order:u,child_execution_order:u,run_type:"tool",child_runs:[],extra:s?{metadata:s}:{},tags:a||[]};return this._addRunToRunMap(c)}async handleToolStart(e,n,r,i,a,s,o){var l,c,d;const u=(l=this.runMap.get(r))!=null?l:this._createRunForToolStart(e,n,r,i,a,s,o);return await((c=this.onRunCreate)==null?void 0:c.call(this,u)),await((d=this.onToolStart)==null?void 0:d.call(this,u)),u}async handleToolEnd(e,n){var i;const r=this.runMap.get(n);if(!r||(r==null?void 0:r.run_type)!=="tool")throw new Error("No tool run to end");return r.end_time=Date.now(),r.outputs={output:e},r.events.push({name:"end",time:new Date(r.end_time).toISOString()}),await((i=this.onToolEnd)==null?void 0:i.call(this,r)),await this._endTrace(r),r}async handleToolError(e,n){var i;const r=this.runMap.get(n);if(!r||(r==null?void 0:r.run_type)!=="tool")throw new Error("No tool run to end");return r.end_time=Date.now(),r.error=this.stringifyError(e),r.events.push({name:"error",time:new Date(r.end_time).toISOString()}),await((i=this.onToolError)==null?void 0:i.call(this,r)),await this._endTrace(r),r}async handleAgentAction(e,n){var a;const r=this.runMap.get(n);if(!r||(r==null?void 0:r.run_type)!=="chain")return;const i=r;i.actions=i.actions||[],i.actions.push(e),i.events.push({name:"agent_action",time:new Date().toISOString(),kwargs:{action:e}}),await((a=this.onAgentAction)==null?void 0:a.call(this,r))}async handleAgentEnd(e,n){var i;const r=this.runMap.get(n);!r||(r==null?void 0:r.run_type)!=="chain"||(r.events.push({name:"agent_end",time:new Date().toISOString(),kwargs:{action:e}}),await((i=this.onAgentEnd)==null?void 0:i.call(this,r)))}_createRunForRetrieverStart(e,n,r,i,a,s,o){const u=this._getExecutionOrder(i),l=Date.now(),c={id:r,name:o!=null?o:e.id[e.id.length-1],parent_run_id:i,start_time:l,serialized:e,events:[{name:"start",time:new Date(l).toISOString()}],inputs:{query:n},execution_order:u,child_execution_order:u,run_type:"retriever",child_runs:[],extra:s?{metadata:s}:{},tags:a||[]};return this._addRunToRunMap(c)}async handleRetrieverStart(e,n,r,i,a,s,o){var l,c,d;const u=(l=this.runMap.get(r))!=null?l:this._createRunForRetrieverStart(e,n,r,i,a,s,o);return await((c=this.onRunCreate)==null?void 0:c.call(this,u)),await((d=this.onRetrieverStart)==null?void 0:d.call(this,u)),u}async handleRetrieverEnd(e,n){var i;const r=this.runMap.get(n);if(!r||(r==null?void 0:r.run_type)!=="retriever")throw new Error("No retriever run to end");return r.end_time=Date.now(),r.outputs={documents:e},r.events.push({name:"end",time:new Date(r.end_time).toISOString()}),await((i=this.onRetrieverEnd)==null?void 0:i.call(this,r)),await this._endTrace(r),r}async handleRetrieverError(e,n){var i;const r=this.runMap.get(n);if(!r||(r==null?void 0:r.run_type)!=="retriever")throw new Error("No retriever run to end");return r.end_time=Date.now(),r.error=this.stringifyError(e),r.events.push({name:"error",time:new Date(r.end_time).toISOString()}),await((i=this.onRetrieverError)==null?void 0:i.call(this,r)),await this._endTrace(r),r}async handleText(e,n){var i;const r=this.runMap.get(n);!r||(r==null?void 0:r.run_type)!=="chain"||(r.events.push({name:"text",time:new Date().toISOString(),kwargs:{text:e}}),await((i=this.onText)==null?void 0:i.call(this,r)))}async handleLLMNewToken(e,n,r,i,a,s){var u;const o=this.runMap.get(r);if(!o||(o==null?void 0:o.run_type)!=="llm")throw new Error('Invalid "runId" provided to "handleLLMNewToken" callback.');return o.events.push({name:"new_token",time:new Date().toISOString(),kwargs:{token:e,idx:n,chunk:s==null?void 0:s.chunk}}),await((u=this.onLLMNewToken)==null?void 0:u.call(this,o,e,{chunk:s==null?void 0:s.chunk})),o}}var Ym={exports:{}};(function(t){const n=(a=0)=>s=>`\x1B[${38+a};5;${s}m`,r=(a=0)=>(s,o,u)=>`\x1B[${38+a};2;${s};${o};${u}m`;function i(){const a=new Map,s={modifier:{reset:[0,0],bold:[1,22],dim:[2,22],italic:[3,23],underline:[4,24],overline:[53,55],inverse:[7,27],hidden:[8,28],strikethrough:[9,29]},color:{black:[30,39],red:[31,39],green:[32,39],yellow:[33,39],blue:[34,39],magenta:[35,39],cyan:[36,39],white:[37,39],blackBright:[90,39],redBright:[91,39],greenBright:[92,39],yellowBright:[93,39],blueBright:[94,39],magentaBright:[95,39],cyanBright:[96,39],whiteBright:[97,39]},bgColor:{bgBlack:[40,49],bgRed:[41,49],bgGreen:[42,49],bgYellow:[43,49],bgBlue:[44,49],bgMagenta:[45,49],bgCyan:[46,49],bgWhite:[47,49],bgBlackBright:[100,49],bgRedBright:[101,49],bgGreenBright:[102,49],bgYellowBright:[103,49],bgBlueBright:[104,49],bgMagentaBright:[105,49],bgCyanBright:[106,49],bgWhiteBright:[107,49]}};s.color.gray=s.color.blackBright,s.bgColor.bgGray=s.bgColor.bgBlackBright,s.color.grey=s.color.blackBright,s.bgColor.bgGrey=s.bgColor.bgBlackBright;for(const[o,u]of Object.entries(s)){for(const[l,c]of Object.entries(u))s[l]={open:`\x1B[${c[0]}m`,close:`\x1B[${c[1]}m`},u[l]=s[l],a.set(c[0],c[1]);Object.defineProperty(s,o,{value:u,enumerable:!1})}return Object.defineProperty(s,"codes",{value:a,enumerable:!1}),s.color.close="\x1B[39m",s.bgColor.close="\x1B[49m",s.color.ansi256=n(),s.color.ansi16m=r(),s.bgColor.ansi256=n(10),s.bgColor.ansi16m=r(10),Object.defineProperties(s,{rgbToAnsi256:{value:(o,u,l)=>o===u&&u===l?o<8?16:o>248?231:Math.round((o-8)/247*24)+232:16+36*Math.round(o/255*5)+6*Math.round(u/255*5)+Math.round(l/255*5),enumerable:!1},hexToRgb:{value:o=>{const u=/(?<colorString>[a-f\d]{6}|[a-f\d]{3})/i.exec(o.toString(16));if(!u)return[0,0,0];let{colorString:l}=u.groups;l.length===3&&(l=l.split("").map(d=>d+d).join(""));const c=Number.parseInt(l,16);return[c>>16&255,c>>8&255,c&255]},enumerable:!1},hexToAnsi256:{value:o=>s.rgbToAnsi256(...s.hexToRgb(o)),enumerable:!1}}),s}Object.defineProperty(t,"exports",{enumerable:!0,get:i})})(Ym);const eg=Ym.exports;function je(t,e){return`${t.open}${e}${t.close}`}function lt(t,e){try{return JSON.stringify(t,null,2)}catch{return e}}function Ff(t){return typeof t=="string"?t.trim():t==null?t:lt(t,t.toString())}function un(t){if(!t.end_time)return"";const e=t.end_time-t.start_time;return e<1e3?`${e}ms`:`${(e/1e3).toFixed(2)}s`}const{color:We}=eg;class zf extends ba{constructor(){super(...arguments),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"console_callback_handler"})}persistRun(e){return Promise.resolve()}getParents(e){const n=[];let r=e;for(;r.parent_run_id;){const i=this.runMap.get(r.parent_run_id);if(i)n.push(i),r=i;else break}return n}getBreadcrumbs(e){const r=[...this.getParents(e).reverse(),e].map((i,a,s)=>{const o=`${i.execution_order}:${i.run_type}:${i.name}`;return a===s.length-1?je(eg.bold,o):o}).join(" > ");return je(We.grey,r)}onChainStart(e){const n=this.getBreadcrumbs(e);console.log(`${je(We.green,"[chain/start]")} [${n}] Entering Chain run with input: ${lt(e.inputs,"[inputs]")}`)}onChainEnd(e){const n=this.getBreadcrumbs(e);console.log(`${je(We.cyan,"[chain/end]")} [${n}] [${un(e)}] Exiting Chain run with output: ${lt(e.outputs,"[outputs]")}`)}onChainError(e){const n=this.getBreadcrumbs(e);console.log(`${je(We.red,"[chain/error]")} [${n}] [${un(e)}] Chain run errored with error: ${lt(e.error,"[error]")}`)}onLLMStart(e){const n=this.getBreadcrumbs(e),r="prompts"in e.inputs?{prompts:e.inputs.prompts.map(i=>i.trim())}:e.inputs;console.log(`${je(We.green,"[llm/start]")} [${n}] Entering LLM run with input: ${lt(r,"[inputs]")}`)}onLLMEnd(e){const n=this.getBreadcrumbs(e);console.log(`${je(We.cyan,"[llm/end]")} [${n}] [${un(e)}] Exiting LLM run with output: ${lt(e.outputs,"[response]")}`)}onLLMError(e){const n=this.getBreadcrumbs(e);console.log(`${je(We.red,"[llm/error]")} [${n}] [${un(e)}] LLM run errored with error: ${lt(e.error,"[error]")}`)}onToolStart(e){const n=this.getBreadcrumbs(e);console.log(`${je(We.green,"[tool/start]")} [${n}] Entering Tool run with input: "${Ff(e.inputs.input)}"`)}onToolEnd(e){var r;const n=this.getBreadcrumbs(e);console.log(`${je(We.cyan,"[tool/end]")} [${n}] [${un(e)}] Exiting Tool run with output: "${Ff((r=e.outputs)==null?void 0:r.output)}"`)}onToolError(e){const n=this.getBreadcrumbs(e);console.log(`${je(We.red,"[tool/error]")} [${n}] [${un(e)}] Tool run errored with error: ${lt(e.error,"[error]")}`)}onRetrieverStart(e){const n=this.getBreadcrumbs(e);console.log(`${je(We.green,"[retriever/start]")} [${n}] Entering Retriever run with input: ${lt(e.inputs,"[inputs]")}`)}onRetrieverEnd(e){const n=this.getBreadcrumbs(e);console.log(`${je(We.cyan,"[retriever/end]")} [${n}] [${un(e)}] Exiting Retriever run with output: ${lt(e.outputs,"[outputs]")}`)}onRetrieverError(e){const n=this.getBreadcrumbs(e);console.log(`${je(We.red,"[retriever/error]")} [${n}] [${un(e)}] Retriever run errored with error: ${lt(e.error,"[error]")}`)}onAgentAction(e){const n=e,r=this.getBreadcrumbs(e);console.log(`${je(We.blue,"[agent/action]")} [${r}] Agent selected action: ${lt(n.actions[n.actions.length-1],"[action]")}`)}}function JE(t){return!!(t&&typeof t=="object"&&"type"in t&&t.type==="tool_call")}class QE extends Error{constructor(e,n){super(e),Object.defineProperty(this,"output",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.output=n}}function qE(t){if(typeof t>"u")return null;try{return JSON.parse(t)}catch{}let e="";const n=[];let r=!1,i=!1;for(let a of t){if(r)a==='"'&&!i?r=!1:a===`
`&&!i?a="\\n":a==="\\"?i=!i:i=!1;else if(a==='"')r=!0,i=!1;else if(a==="{")n.push("}");else if(a==="[")n.push("]");else if(a==="}"||a==="]")if(n&&n[n.length-1]===a)n.pop();else return null;e+=a}r&&(e+='"');for(let a=n.length-1;a>=0;a-=1)e+=n[a];try{return JSON.parse(e)}catch{return null}}function ti(t,e){var n;return typeof t=="string"?typeof e=="string"?t+e:[{type:"text",text:t},...e]:Array.isArray(e)?(n=po(t,e))!=null?n:[...t,...e]:[...t,{type:"text",text:e}]}function KE(t,e){return t==="error"||e==="error"?"error":"success"}function XE(t,e){function n(r,i){if(typeof r!="object"||r===null||r===void 0)return r;if(i>=e)return Array.isArray(r)?"[Array]":"[Object]";if(Array.isArray(r))return r.map(s=>n(s,i+1));const a={};for(const s of Object.keys(r))a[s]=n(r[s],i+1);return a}return JSON.stringify(n(t,0),null,2)}class dr extends or{get lc_aliases(){return{additional_kwargs:"additional_kwargs",response_metadata:"response_metadata"}}get text(){return typeof this.content=="string"?this.content:""}getType(){return this._getType()}constructor(e,n){typeof e=="string"&&(e={content:e,additional_kwargs:n,response_metadata:{}}),e.additional_kwargs||(e.additional_kwargs={}),e.response_metadata||(e.response_metadata={}),super(e),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain_core","messages"]}),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"content",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"additional_kwargs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"response_metadata",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"id",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.name=e.name,this.content=e.content,this.additional_kwargs=e.additional_kwargs,this.response_metadata=e.response_metadata,this.id=e.id}toDict(){return{type:this._getType(),data:this.toJSON().kwargs}}static lc_name(){return"BaseMessage"}get _printableFields(){return{id:this.id,content:this.content,name:this.name,additional_kwargs:this.additional_kwargs,response_metadata:this.response_metadata}}_updateId(e){this.id=e,this.lc_kwargs.id=e}get[Symbol.toStringTag](){return this.constructor.lc_name()}[Symbol.for("nodejs.util.inspect.custom")](e){if(e===null)return this;const n=XE(this._printableFields,Math.max(4,e));return`${this.constructor.lc_name()} ${n}`}}function ze(t,e){const n={...t};for(const[r,i]of Object.entries(e))if(n[r]==null)n[r]=i;else{if(i==null)continue;if(typeof n[r]!=typeof i||Array.isArray(n[r])!==Array.isArray(i))throw new Error(`field[${r}] already exists in the message chunk, but with a different type.`);if(typeof n[r]=="string"){if(r==="type")continue;n[r]+=i}else if(typeof n[r]=="object"&&!Array.isArray(n[r]))n[r]=ze(n[r],i);else if(Array.isArray(n[r]))n[r]=po(n[r],i);else{if(n[r]===i)continue;console.warn(`field[${r}] already exists in this message chunk and value has unsupported type.`)}}return n}function po(t,e){if(!(t===void 0&&e===void 0)){if(t===void 0||e===void 0)return t||e;{const n=[...t];for(const r of e)if(typeof r=="object"&&"index"in r&&typeof r.index=="number"){const i=n.findIndex(a=>a.index===r.index);i!==-1?n[i]=ze(n[i],r):n.push(r)}else{if(typeof r=="object"&&"text"in r&&r.text==="")continue;n.push(r)}return n}}}function YE(t,e){if(!t&&!e)throw new Error("Cannot merge two undefined objects.");if(!t||!e)return t||e;if(typeof t!=typeof e)throw new Error(`Cannot merge objects of different types.
Left ${typeof t}
Right ${typeof e}`);if(typeof t=="string"&&typeof e=="string")return t+e;if(Array.isArray(t)&&Array.isArray(e))return po(t,e);if(typeof t=="object"&&typeof e=="object")return ze(t,e);if(t===e)return t;throw new Error(`Can not merge objects of different types.
Left ${t}
Right ${e}`)}class ni extends dr{}function e1(t){return typeof(t==null?void 0:t._getType)=="function"}class tg extends dr{static lc_name(){return"ToolMessage"}get lc_aliases(){return{tool_call_id:"tool_call_id"}}constructor(e,n,r){typeof e=="string"&&(e={content:e,name:r,tool_call_id:n}),super(e),Object.defineProperty(this,"status",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"tool_call_id",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"artifact",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.tool_call_id=e.tool_call_id,this.artifact=e.artifact,this.status=e.status}_getType(){return"tool"}static isInstance(e){return e._getType()==="tool"}get _printableFields(){return{...super._printableFields,tool_call_id:this.tool_call_id,artifact:this.artifact}}}class Tc extends ni{constructor(e){super(e),Object.defineProperty(this,"tool_call_id",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"status",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"artifact",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.tool_call_id=e.tool_call_id,this.artifact=e.artifact,this.status=e.status}static lc_name(){return"ToolMessageChunk"}_getType(){return"tool"}concat(e){var n;return new Tc({content:ti(this.content,e.content),additional_kwargs:ze(this.additional_kwargs,e.additional_kwargs),response_metadata:ze(this.response_metadata,e.response_metadata),artifact:YE(this.artifact,e.artifact),tool_call_id:this.tool_call_id,id:(n=this.id)!=null?n:e.id,status:KE(this.status,e.status)})}get _printableFields(){return{...super._printableFields,tool_call_id:this.tool_call_id,artifact:this.artifact}}}function t1(t){const e=[],n=[];for(const r of t)if(r.function){const i=r.function.name;try{const a=JSON.parse(r.function.arguments),s={name:i||"",args:a||{},id:r.id};e.push(s)}catch{n.push({name:i,args:r.function.arguments,id:r.id,error:"Malformed args."})}}else continue;return[e,n]}class n1 extends dr{get lc_aliases(){return{...super.lc_aliases,tool_calls:"tool_calls",invalid_tool_calls:"invalid_tool_calls"}}constructor(e,n){var i,a,s,o,u;let r;if(typeof e=="string")r={content:e,tool_calls:[],invalid_tool_calls:[],additional_kwargs:n!=null?n:{}};else{r=e;const l=(i=r.additional_kwargs)==null?void 0:i.tool_calls,c=r.tool_calls;l!=null&&l.length>0&&(c===void 0||c.length===0)&&console.warn(["New LangChain packages are available that more efficiently handle",`tool calling.

Please upgrade your packages to versions that set`,"message tool calls. e.g., `yarn add @langchain/anthropic`,","yarn add @langchain/openai`, etc."].join(" "));try{if(l!=null&&c===void 0){const[d,f]=t1(l);r.tool_calls=d!=null?d:[],r.invalid_tool_calls=f!=null?f:[]}else r.tool_calls=(a=r.tool_calls)!=null?a:[],r.invalid_tool_calls=(s=r.invalid_tool_calls)!=null?s:[]}catch{r.tool_calls=[],r.invalid_tool_calls=[]}}super(r),Object.defineProperty(this,"tool_calls",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"invalid_tool_calls",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"usage_metadata",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),typeof r!="string"&&(this.tool_calls=(o=r.tool_calls)!=null?o:this.tool_calls,this.invalid_tool_calls=(u=r.invalid_tool_calls)!=null?u:this.invalid_tool_calls),this.usage_metadata=r.usage_metadata}static lc_name(){return"AIMessage"}_getType(){return"ai"}get _printableFields(){return{...super._printableFields,tool_calls:this.tool_calls,invalid_tool_calls:this.invalid_tool_calls,usage_metadata:this.usage_metadata}}}class Ea extends ni{constructor(e){var r,i,a,s,o;let n;if(typeof e=="string")n={content:e,tool_calls:[],invalid_tool_calls:[],tool_call_chunks:[]};else if(e.tool_call_chunks===void 0)n={...e,tool_calls:(r=e.tool_calls)!=null?r:[],invalid_tool_calls:[],tool_call_chunks:[],usage_metadata:e.usage_metadata!==void 0?e.usage_metadata:void 0};else{const u=[],l=[];for(const c of e.tool_call_chunks){let d={};try{if(d=qE(c.args||"{}"),d===null||typeof d!="object"||Array.isArray(d))throw new Error("Malformed tool call chunk args.");u.push({name:(i=c.name)!=null?i:"",args:d,id:c.id,type:"tool_call"})}catch{l.push({name:c.name,args:c.args,id:c.id,error:"Malformed args.",type:"invalid_tool_call"})}}n={...e,tool_calls:u,invalid_tool_calls:l,usage_metadata:e.usage_metadata!==void 0?e.usage_metadata:void 0}}super(n),Object.defineProperty(this,"tool_calls",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"invalid_tool_calls",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"tool_call_chunks",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"usage_metadata",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.tool_call_chunks=(a=n.tool_call_chunks)!=null?a:this.tool_call_chunks,this.tool_calls=(s=n.tool_calls)!=null?s:this.tool_calls,this.invalid_tool_calls=(o=n.invalid_tool_calls)!=null?o:this.invalid_tool_calls,this.usage_metadata=n.usage_metadata}get lc_aliases(){return{...super.lc_aliases,tool_calls:"tool_calls",invalid_tool_calls:"invalid_tool_calls",tool_call_chunks:"tool_call_chunks"}}static lc_name(){return"AIMessageChunk"}_getType(){return"ai"}get _printableFields(){return{...super._printableFields,tool_calls:this.tool_calls,tool_call_chunks:this.tool_call_chunks,invalid_tool_calls:this.invalid_tool_calls,usage_metadata:this.usage_metadata}}concat(e){var r,i,a,s,o,u,l,c,d,f,h,p,v,_,m,g,y,w,E,T,C,P,J,B,le,Ge,yt,$,I,U,j,b,S,R,F,D,Y,oe,re,Pe,jn,Ac,Lc,jc,Dc,Mc,Uc,Fc,zc,Bc,Hc,Vc,Zc;const n={content:ti(this.content,e.content),additional_kwargs:ze(this.additional_kwargs,e.additional_kwargs),response_metadata:ze(this.response_metadata,e.response_metadata),tool_call_chunks:[],id:(r=this.id)!=null?r:e.id};if(this.tool_call_chunks!==void 0||e.tool_call_chunks!==void 0){const fr=po(this.tool_call_chunks,e.tool_call_chunks);fr!==void 0&&fr.length>0&&(n.tool_call_chunks=fr)}if(this.usage_metadata!==void 0||e.usage_metadata!==void 0){const fr={...(((a=(i=this.usage_metadata)==null?void 0:i.input_token_details)==null?void 0:a.audio)!==void 0||((o=(s=e.usage_metadata)==null?void 0:s.input_token_details)==null?void 0:o.audio)!==void 0)&&{audio:((c=(l=(u=this.usage_metadata)==null?void 0:u.input_token_details)==null?void 0:l.audio)!=null?c:0)+((h=(f=(d=e.usage_metadata)==null?void 0:d.input_token_details)==null?void 0:f.audio)!=null?h:0)},...(((v=(p=this.usage_metadata)==null?void 0:p.input_token_details)==null?void 0:v.cache_read)!==void 0||((m=(_=e.usage_metadata)==null?void 0:_.input_token_details)==null?void 0:m.cache_read)!==void 0)&&{cache_read:((w=(y=(g=this.usage_metadata)==null?void 0:g.input_token_details)==null?void 0:y.cache_read)!=null?w:0)+((C=(T=(E=e.usage_metadata)==null?void 0:E.input_token_details)==null?void 0:T.cache_read)!=null?C:0)},...(((J=(P=this.usage_metadata)==null?void 0:P.input_token_details)==null?void 0:J.cache_creation)!==void 0||((le=(B=e.usage_metadata)==null?void 0:B.input_token_details)==null?void 0:le.cache_creation)!==void 0)&&{cache_creation:(($=(yt=(Ge=this.usage_metadata)==null?void 0:Ge.input_token_details)==null?void 0:yt.cache_creation)!=null?$:0)+((j=(U=(I=e.usage_metadata)==null?void 0:I.input_token_details)==null?void 0:U.cache_creation)!=null?j:0)}},Gc={...(((S=(b=this.usage_metadata)==null?void 0:b.output_token_details)==null?void 0:S.audio)!==void 0||((F=(R=e.usage_metadata)==null?void 0:R.output_token_details)==null?void 0:F.audio)!==void 0)&&{audio:((oe=(Y=(D=this.usage_metadata)==null?void 0:D.output_token_details)==null?void 0:Y.audio)!=null?oe:0)+((jn=(Pe=(re=e.usage_metadata)==null?void 0:re.output_token_details)==null?void 0:Pe.audio)!=null?jn:0)},...(((Lc=(Ac=this.usage_metadata)==null?void 0:Ac.output_token_details)==null?void 0:Lc.reasoning)!==void 0||((Dc=(jc=e.usage_metadata)==null?void 0:jc.output_token_details)==null?void 0:Dc.reasoning)!==void 0)&&{reasoning:((Fc=(Uc=(Mc=this.usage_metadata)==null?void 0:Mc.output_token_details)==null?void 0:Uc.reasoning)!=null?Fc:0)+((Hc=(Bc=(zc=e.usage_metadata)==null?void 0:zc.output_token_details)==null?void 0:Bc.reasoning)!=null?Hc:0)}},wo=(Vc=this.usage_metadata)!=null?Vc:{input_tokens:0,output_tokens:0,total_tokens:0},bo=(Zc=e.usage_metadata)!=null?Zc:{input_tokens:0,output_tokens:0,total_tokens:0},fg={input_tokens:wo.input_tokens+bo.input_tokens,output_tokens:wo.output_tokens+bo.output_tokens,total_tokens:wo.total_tokens+bo.total_tokens,...Object.keys(fr).length>0&&{input_token_details:fr},...Object.keys(Gc).length>0&&{output_token_details:Gc}};n.usage_metadata=fg}return new Ea(n)}}class mo extends dr{static lc_name(){return"ChatMessage"}static _chatMessageClass(){return mo}constructor(e,n){typeof e=="string"&&(e={content:e,role:n}),super(e),Object.defineProperty(this,"role",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.role=e.role}_getType(){return"generic"}static isInstance(e){return e._getType()==="generic"}get _printableFields(){return{...super._printableFields,role:this.role}}}class xc extends ni{static lc_name(){return"ChatMessageChunk"}constructor(e,n){typeof e=="string"&&(e={content:e,role:n}),super(e),Object.defineProperty(this,"role",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.role=e.role}_getType(){return"generic"}concat(e){var n;return new xc({content:ti(this.content,e.content),additional_kwargs:ze(this.additional_kwargs,e.additional_kwargs),response_metadata:ze(this.response_metadata,e.response_metadata),role:this.role,id:(n=this.id)!=null?n:e.id})}get _printableFields(){return{...super._printableFields,role:this.role}}}class r1 extends dr{static lc_name(){return"FunctionMessage"}constructor(e,n){typeof e=="string"&&(e={content:e,name:n}),super(e)}_getType(){return"function"}}class Oc extends ni{static lc_name(){return"FunctionMessageChunk"}_getType(){return"function"}concat(e){var n,r;return new Oc({content:ti(this.content,e.content),additional_kwargs:ze(this.additional_kwargs,e.additional_kwargs),response_metadata:ze(this.response_metadata,e.response_metadata),name:(n=this.name)!=null?n:"",id:(r=this.id)!=null?r:e.id})}}class ng extends dr{static lc_name(){return"HumanMessage"}_getType(){return"human"}}class Cc extends ni{static lc_name(){return"HumanMessageChunk"}_getType(){return"human"}concat(e){var n;return new Cc({content:ti(this.content,e.content),additional_kwargs:ze(this.additional_kwargs,e.additional_kwargs),response_metadata:ze(this.response_metadata,e.response_metadata),id:(n=this.id)!=null?n:e.id})}}class i1 extends dr{static lc_name(){return"SystemMessage"}_getType(){return"system"}}class Pc extends ni{static lc_name(){return"SystemMessageChunk"}_getType(){return"system"}concat(e){var n;return new Pc({content:ti(this.content,e.content),additional_kwargs:ze(this.additional_kwargs,e.additional_kwargs),response_metadata:ze(this.response_metadata,e.response_metadata),id:(n=this.id)!=null?n:e.id})}}function rg(t,e="Human",n="AI"){const r=[];for(const i of t){let a;if(i._getType()==="human")a=e;else if(i._getType()==="ai")a=n;else if(i._getType()==="system")a="System";else if(i._getType()==="function")a="Function";else if(i._getType()==="tool")a="Tool";else if(i._getType()==="generic")a=i.role;else throw new Error(`Got unsupported message type: ${i._getType()}`);const s=i.name?`${i.name}, `:"",o=typeof i.content=="string"?i.content:JSON.stringify(i.content,null,2);r.push(`${a}: ${s}${o}`)}return r.join(`
`)}class $i extends ba{constructor(e={}){var s;super(e),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"langchain_tracer"}),Object.defineProperty(this,"projectName",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"exampleId",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"client",{enumerable:!0,configurable:!0,writable:!0,value:void 0});const{exampleId:n,projectName:r,client:i}=e;this.projectName=(s=r!=null?r:Jr("LANGCHAIN_PROJECT"))!=null?s:Jr("LANGCHAIN_SESSION"),this.exampleId=n,this.client=i!=null?i:new da({});const a=$i.getTraceableRunTree();a&&this.updateFromRunTree(a)}async _convertToCreate(e,n=void 0){return{...e,extra:{...e.extra,runtime:await VE()},child_runs:void 0,session_name:this.projectName,reference_example_id:e.parent_run_id?void 0:n}}async persistRun(e){}async onRunCreate(e){const n=await this._convertToCreate(e,this.exampleId);await this.client.createRun(n)}async onRunUpdate(e){const n={end_time:e.end_time,error:e.error,outputs:e.outputs,events:e.events,inputs:e.inputs,trace_id:e.trace_id,dotted_order:e.dotted_order,parent_run_id:e.parent_run_id};await this.client.updateRun(e.id,n)}getRun(e){return this.runMap.get(e)}updateFromRunTree(e){var a,s,o;let n=e;const r=new Set;for(;n.parent_run&&!(r.has(n.id)||(r.add(n.id),!n.parent_run));)n=n.parent_run;r.clear();const i=[n];for(;i.length>0;){const u=i.shift();!u||r.has(u.id)||(r.add(u.id),this.runMap.set(u.id,u),u.child_runs&&i.push(...u.child_runs))}this.client=(a=e.client)!=null?a:this.client,this.projectName=(s=e.project_name)!=null?s:this.projectName,this.exampleId=(o=e.reference_example_id)!=null?o:this.exampleId}convertToRunTree(e){const n={},r=[];for(const[i,a]of this.runMap){const s=new et({...a,child_runs:[],parent_run:void 0,client:this.client,project_name:this.projectName,reference_example_id:this.exampleId,tracingEnabled:!0});n[i]=s,r.push([i,a.dotted_order])}r.sort((i,a)=>!i[1]||!a[1]?0:i[1].localeCompare(a[1]));for(const[i]of r){const a=this.runMap.get(i),s=n[i];if(!(!a||!s)&&a.parent_run_id){const o=n[a.parent_run_id];o&&(o.child_runs.push(s),s.parent_run=o)}}return n[e]}static getTraceableRunTree(){try{return wE()}catch{return}}}let lu;function a1(){const t="default"in Xt?Xt.default:Xt;return new t({autoStart:!0,concurrency:1})}async function be(t,e){e===!0?await t():(typeof lu>"u"&&(lu=a1()),lu.add(t))}const s1=t=>t!==void 0?t:!!["LANGSMITH_TRACING_V2","LANGCHAIN_TRACING_V2","LANGSMITH_TRACING","LANGCHAIN_TRACING"].find(n=>Jr(n)==="true");class o1{setHandler(e){return this.setHandlers([e])}}class go{constructor(e,n,r,i,a,s,o,u){Object.defineProperty(this,"runId",{enumerable:!0,configurable:!0,writable:!0,value:e}),Object.defineProperty(this,"handlers",{enumerable:!0,configurable:!0,writable:!0,value:n}),Object.defineProperty(this,"inheritableHandlers",{enumerable:!0,configurable:!0,writable:!0,value:r}),Object.defineProperty(this,"tags",{enumerable:!0,configurable:!0,writable:!0,value:i}),Object.defineProperty(this,"inheritableTags",{enumerable:!0,configurable:!0,writable:!0,value:a}),Object.defineProperty(this,"metadata",{enumerable:!0,configurable:!0,writable:!0,value:s}),Object.defineProperty(this,"inheritableMetadata",{enumerable:!0,configurable:!0,writable:!0,value:o}),Object.defineProperty(this,"_parentRunId",{enumerable:!0,configurable:!0,writable:!0,value:u})}get parentRunId(){return this._parentRunId}async handleText(e){await Promise.all(this.handlers.map(n=>be(async()=>{var r;try{await((r=n.handleText)==null?void 0:r.call(n,e,this.runId,this._parentRunId,this.tags))}catch(i){if((n.raiseError?console.error:console.warn)(`Error in handler ${n.constructor.name}, handleText: ${i}`),n.raiseError)throw i}},n.awaitHandlers)))}async handleCustomEvent(e,n,r,i,a){await Promise.all(this.handlers.map(s=>be(async()=>{var o;try{await((o=s.handleCustomEvent)==null?void 0:o.call(s,e,n,this.runId,this.tags,this.metadata))}catch(u){if((s.raiseError?console.error:console.warn)(`Error in handler ${s.constructor.name}, handleCustomEvent: ${u}`),s.raiseError)throw u}},s.awaitHandlers)))}}class u1 extends go{getChild(e){const n=new Ft(this.runId);return n.setHandlers(this.inheritableHandlers),n.addTags(this.inheritableTags),n.addMetadata(this.inheritableMetadata),e&&n.addTags([e],!1),n}async handleRetrieverEnd(e){await Promise.all(this.handlers.map(n=>be(async()=>{var r;if(!n.ignoreRetriever)try{await((r=n.handleRetrieverEnd)==null?void 0:r.call(n,e,this.runId,this._parentRunId,this.tags))}catch(i){if((n.raiseError?console.error:console.warn)(`Error in handler ${n.constructor.name}, handleRetriever`),n.raiseError)throw i}},n.awaitHandlers)))}async handleRetrieverError(e){await Promise.all(this.handlers.map(n=>be(async()=>{var r;if(!n.ignoreRetriever)try{await((r=n.handleRetrieverError)==null?void 0:r.call(n,e,this.runId,this._parentRunId,this.tags))}catch(i){if((n.raiseError?console.error:console.warn)(`Error in handler ${n.constructor.name}, handleRetrieverError: ${i}`),n.raiseError)throw e}},n.awaitHandlers)))}}class Bf extends go{async handleLLMNewToken(e,n,r,i,a,s){await Promise.all(this.handlers.map(o=>be(async()=>{var u;if(!o.ignoreLLM)try{await((u=o.handleLLMNewToken)==null?void 0:u.call(o,e,n!=null?n:{prompt:0,completion:0},this.runId,this._parentRunId,this.tags,s))}catch(l){if((o.raiseError?console.error:console.warn)(`Error in handler ${o.constructor.name}, handleLLMNewToken: ${l}`),o.raiseError)throw l}},o.awaitHandlers)))}async handleLLMError(e){await Promise.all(this.handlers.map(n=>be(async()=>{var r;if(!n.ignoreLLM)try{await((r=n.handleLLMError)==null?void 0:r.call(n,e,this.runId,this._parentRunId,this.tags))}catch(i){if((n.raiseError?console.error:console.warn)(`Error in handler ${n.constructor.name}, handleLLMError: ${i}`),n.raiseError)throw i}},n.awaitHandlers)))}async handleLLMEnd(e){await Promise.all(this.handlers.map(n=>be(async()=>{var r;if(!n.ignoreLLM)try{await((r=n.handleLLMEnd)==null?void 0:r.call(n,e,this.runId,this._parentRunId,this.tags))}catch(i){if((n.raiseError?console.error:console.warn)(`Error in handler ${n.constructor.name}, handleLLMEnd: ${i}`),n.raiseError)throw i}},n.awaitHandlers)))}}class l1 extends go{getChild(e){const n=new Ft(this.runId);return n.setHandlers(this.inheritableHandlers),n.addTags(this.inheritableTags),n.addMetadata(this.inheritableMetadata),e&&n.addTags([e],!1),n}async handleChainError(e,n,r,i,a){await Promise.all(this.handlers.map(s=>be(async()=>{var o;if(!s.ignoreChain)try{await((o=s.handleChainError)==null?void 0:o.call(s,e,this.runId,this._parentRunId,this.tags,a))}catch(u){if((s.raiseError?console.error:console.warn)(`Error in handler ${s.constructor.name}, handleChainError: ${u}`),s.raiseError)throw u}},s.awaitHandlers)))}async handleChainEnd(e,n,r,i,a){await Promise.all(this.handlers.map(s=>be(async()=>{var o;if(!s.ignoreChain)try{await((o=s.handleChainEnd)==null?void 0:o.call(s,e,this.runId,this._parentRunId,this.tags,a))}catch(u){if((s.raiseError?console.error:console.warn)(`Error in handler ${s.constructor.name}, handleChainEnd: ${u}`),s.raiseError)throw u}},s.awaitHandlers)))}async handleAgentAction(e){await Promise.all(this.handlers.map(n=>be(async()=>{var r;if(!n.ignoreAgent)try{await((r=n.handleAgentAction)==null?void 0:r.call(n,e,this.runId,this._parentRunId,this.tags))}catch(i){if((n.raiseError?console.error:console.warn)(`Error in handler ${n.constructor.name}, handleAgentAction: ${i}`),n.raiseError)throw i}},n.awaitHandlers)))}async handleAgentEnd(e){await Promise.all(this.handlers.map(n=>be(async()=>{var r;if(!n.ignoreAgent)try{await((r=n.handleAgentEnd)==null?void 0:r.call(n,e,this.runId,this._parentRunId,this.tags))}catch(i){if((n.raiseError?console.error:console.warn)(`Error in handler ${n.constructor.name}, handleAgentEnd: ${i}`),n.raiseError)throw i}},n.awaitHandlers)))}}class c1 extends go{getChild(e){const n=new Ft(this.runId);return n.setHandlers(this.inheritableHandlers),n.addTags(this.inheritableTags),n.addMetadata(this.inheritableMetadata),e&&n.addTags([e],!1),n}async handleToolError(e){await Promise.all(this.handlers.map(n=>be(async()=>{var r;if(!n.ignoreAgent)try{await((r=n.handleToolError)==null?void 0:r.call(n,e,this.runId,this._parentRunId,this.tags))}catch(i){if((n.raiseError?console.error:console.warn)(`Error in handler ${n.constructor.name}, handleToolError: ${i}`),n.raiseError)throw i}},n.awaitHandlers)))}async handleToolEnd(e){await Promise.all(this.handlers.map(n=>be(async()=>{var r;if(!n.ignoreAgent)try{await((r=n.handleToolEnd)==null?void 0:r.call(n,e,this.runId,this._parentRunId,this.tags))}catch(i){if((n.raiseError?console.error:console.warn)(`Error in handler ${n.constructor.name}, handleToolEnd: ${i}`),n.raiseError)throw i}},n.awaitHandlers)))}}class Ft extends o1{constructor(e,n){var r,i,a,s,o,u;super(),Object.defineProperty(this,"handlers",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"inheritableHandlers",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"tags",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"inheritableTags",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"metadata",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"inheritableMetadata",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"callback_manager"}),Object.defineProperty(this,"_parentRunId",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.handlers=(r=n==null?void 0:n.handlers)!=null?r:this.handlers,this.inheritableHandlers=(i=n==null?void 0:n.inheritableHandlers)!=null?i:this.inheritableHandlers,this.tags=(a=n==null?void 0:n.tags)!=null?a:this.tags,this.inheritableTags=(s=n==null?void 0:n.inheritableTags)!=null?s:this.inheritableTags,this.metadata=(o=n==null?void 0:n.metadata)!=null?o:this.metadata,this.inheritableMetadata=(u=n==null?void 0:n.inheritableMetadata)!=null?u:this.inheritableMetadata,this._parentRunId=e}getParentRunId(){return this._parentRunId}async handleLLMStart(e,n,r=void 0,i=void 0,a=void 0,s=void 0,o=void 0,u=void 0){return Promise.all(n.map(async(l,c)=>{const d=c===0&&r?r:nt();return await Promise.all(this.handlers.map(f=>{if(!f.ignoreLLM)return pi(f)&&f._createRunForLLMStart(e,[l],d,this._parentRunId,a,this.tags,this.metadata,u),be(async()=>{var h;try{await((h=f.handleLLMStart)==null?void 0:h.call(f,e,[l],d,this._parentRunId,a,this.tags,this.metadata,u))}catch(p){if((f.raiseError?console.error:console.warn)(`Error in handler ${f.constructor.name}, handleLLMStart: ${p}`),f.raiseError)throw p}},f.awaitHandlers)})),new Bf(d,this.handlers,this.inheritableHandlers,this.tags,this.inheritableTags,this.metadata,this.inheritableMetadata,this._parentRunId)}))}async handleChatModelStart(e,n,r=void 0,i=void 0,a=void 0,s=void 0,o=void 0,u=void 0){return Promise.all(n.map(async(l,c)=>{const d=c===0&&r?r:nt();return await Promise.all(this.handlers.map(f=>{if(!f.ignoreLLM)return pi(f)&&f._createRunForChatModelStart(e,[l],d,this._parentRunId,a,this.tags,this.metadata,u),be(async()=>{var h,p;try{if(f.handleChatModelStart)await((h=f.handleChatModelStart)==null?void 0:h.call(f,e,[l],d,this._parentRunId,a,this.tags,this.metadata,u));else if(f.handleLLMStart){const v=rg(l);await((p=f.handleLLMStart)==null?void 0:p.call(f,e,[v],d,this._parentRunId,a,this.tags,this.metadata,u))}}catch(v){if((f.raiseError?console.error:console.warn)(`Error in handler ${f.constructor.name}, handleLLMStart: ${v}`),f.raiseError)throw v}},f.awaitHandlers)})),new Bf(d,this.handlers,this.inheritableHandlers,this.tags,this.inheritableTags,this.metadata,this.inheritableMetadata,this._parentRunId)}))}async handleChainStart(e,n,r=nt(),i=void 0,a=void 0,s=void 0,o=void 0){return await Promise.all(this.handlers.map(u=>{if(!u.ignoreChain)return pi(u)&&u._createRunForChainStart(e,n,r,this._parentRunId,this.tags,this.metadata,i,o),be(async()=>{var l;try{await((l=u.handleChainStart)==null?void 0:l.call(u,e,n,r,this._parentRunId,this.tags,this.metadata,i,o))}catch(c){if((u.raiseError?console.error:console.warn)(`Error in handler ${u.constructor.name}, handleChainStart: ${c}`),u.raiseError)throw c}},u.awaitHandlers)})),new l1(r,this.handlers,this.inheritableHandlers,this.tags,this.inheritableTags,this.metadata,this.inheritableMetadata,this._parentRunId)}async handleToolStart(e,n,r=nt(),i=void 0,a=void 0,s=void 0,o=void 0){return await Promise.all(this.handlers.map(u=>{if(!u.ignoreAgent)return pi(u)&&u._createRunForToolStart(e,n,r,this._parentRunId,this.tags,this.metadata,o),be(async()=>{var l;try{await((l=u.handleToolStart)==null?void 0:l.call(u,e,n,r,this._parentRunId,this.tags,this.metadata,o))}catch(c){if((u.raiseError?console.error:console.warn)(`Error in handler ${u.constructor.name}, handleToolStart: ${c}`),u.raiseError)throw c}},u.awaitHandlers)})),new c1(r,this.handlers,this.inheritableHandlers,this.tags,this.inheritableTags,this.metadata,this.inheritableMetadata,this._parentRunId)}async handleRetrieverStart(e,n,r=nt(),i=void 0,a=void 0,s=void 0,o=void 0){return await Promise.all(this.handlers.map(u=>{if(!u.ignoreRetriever)return pi(u)&&u._createRunForRetrieverStart(e,n,r,this._parentRunId,this.tags,this.metadata,o),be(async()=>{var l;try{await((l=u.handleRetrieverStart)==null?void 0:l.call(u,e,n,r,this._parentRunId,this.tags,this.metadata,o))}catch(c){if((u.raiseError?console.error:console.warn)(`Error in handler ${u.constructor.name}, handleRetrieverStart: ${c}`),u.raiseError)throw c}},u.awaitHandlers)})),new u1(r,this.handlers,this.inheritableHandlers,this.tags,this.inheritableTags,this.metadata,this.inheritableMetadata,this._parentRunId)}async handleCustomEvent(e,n,r,i,a){await Promise.all(this.handlers.map(s=>be(async()=>{var o;if(!s.ignoreCustomEvent)try{await((o=s.handleCustomEvent)==null?void 0:o.call(s,e,n,r,this.tags,this.metadata))}catch(u){if((s.raiseError?console.error:console.warn)(`Error in handler ${s.constructor.name}, handleCustomEvent: ${u}`),s.raiseError)throw u}},s.awaitHandlers)))}addHandler(e,n=!0){this.handlers.push(e),n&&this.inheritableHandlers.push(e)}removeHandler(e){this.handlers=this.handlers.filter(n=>n!==e),this.inheritableHandlers=this.inheritableHandlers.filter(n=>n!==e)}setHandlers(e,n=!0){this.handlers=[],this.inheritableHandlers=[];for(const r of e)this.addHandler(r,n)}addTags(e,n=!0){this.removeTags(e),this.tags.push(...e),n&&this.inheritableTags.push(...e)}removeTags(e){this.tags=this.tags.filter(n=>!e.includes(n)),this.inheritableTags=this.inheritableTags.filter(n=>!e.includes(n))}addMetadata(e,n=!0){this.metadata={...this.metadata,...e},n&&(this.inheritableMetadata={...this.inheritableMetadata,...e})}removeMetadata(e){for(const n of Object.keys(e))delete this.metadata[n],delete this.inheritableMetadata[n]}copy(e=[],n=!0){const r=new Ft(this._parentRunId);for(const i of this.handlers){const a=this.inheritableHandlers.includes(i);r.addHandler(i,a)}for(const i of this.tags){const a=this.inheritableTags.includes(i);r.addTags([i],a)}for(const i of Object.keys(this.metadata)){const a=Object.keys(this.inheritableMetadata).includes(i);r.addMetadata({[i]:this.metadata[i]},a)}for(const i of e)r.handlers.filter(a=>a.name==="console_callback_handler").some(a=>a.name===i.name)||r.addHandler(i,n);return r}static fromHandlers(e){class n extends wa{constructor(){super(),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:nt()}),Object.assign(this,e)}}const r=new this;return r.addHandler(new n),r}static configure(e,n,r,i,a,s,o){return this._configureSync(e,n,r,i,a,s,o)}static _configureSync(e,n,r,i,a,s,o){var f,h,p,v,_;let u;(e||n)&&(Array.isArray(e)||!e?(u=new Ft,u.setHandlers((f=e==null?void 0:e.map(zs))!=null?f:[],!0)):u=e,u=u.copy(Array.isArray(n)?n.map(zs):n==null?void 0:n.handlers,!1));const l=Jr("LANGCHAIN_VERBOSE")==="true"||(o==null?void 0:o.verbose),c=((h=$i.getTraceableRunTree())==null?void 0:h.tracingEnabled)||s1(),d=c||((p=Jr("LANGCHAIN_TRACING"))!=null?p:!1);if(l||d){if(u||(u=new Ft),l&&!u.handlers.some(m=>m.name===zf.prototype.name)){const m=new zf;u.addHandler(m,!0)}if(d&&!u.handlers.some(m=>m.name==="langchain_tracer")&&c){const m=new $i;u.addHandler(m,!0),u._parentRunId=(_=(v=$i.getTraceableRunTree())==null?void 0:v.id)!=null?_:u._parentRunId}}return(r||i)&&u&&(u.addTags(r!=null?r:[]),u.addTags(i!=null?i:[],!1)),(a||s)&&u&&(u.addMetadata(a!=null?a:{}),u.addMetadata(s!=null?s:{},!1)),u}}function zs(t){return"name"in t?t:wa.fromMethods(t)}class d1{getStore(){}run(e,n){return n()}enterWith(e){}}const f1=new d1,cu=Symbol.for("ls:tracing_async_local_storage"),Hf=Symbol.for("lc:child_config"),du=Symbol.for("lc:context_variables");class h1{getInstance(){var e;return(e=globalThis[cu])!=null?e:f1}getRunnableConfig(){var n,r;return(r=(n=this.getInstance().getStore())==null?void 0:n.extra)==null?void 0:r[Hf]}runWithConfig(e,n,r){var c;const i=Ft._configureSync(e==null?void 0:e.callbacks,void 0,e==null?void 0:e.tags,void 0,e==null?void 0:e.metadata),a=this.getInstance(),s=a.getStore(),o=i==null?void 0:i.getParentRunId(),u=(c=i==null?void 0:i.handlers)==null?void 0:c.find(d=>(d==null?void 0:d.name)==="langchain_tracer");let l;return u&&o?l=u.convertToRunTree(o):r||(l=new et({name:"<runnable_lambda>",tracingEnabled:!1})),l&&(l.extra={...l.extra,[Hf]:e}),s!==void 0&&s[du]!==void 0&&(l[du]=s[du]),a.run(l,n)}initializeGlobalInstance(e){globalThis[cu]===void 0&&(globalThis[cu]=e)}}const ur=new h1;async function Nn(t,e){if(e===void 0)return t;let n;return Promise.race([t.catch(r=>{if(!(e!=null&&e.aborted))throw r}),new Promise((r,i)=>{n=()=>{i(new Error("Aborted"))},e.addEventListener("abort",n),e.aborted&&i(new Error("Aborted"))})]).finally(()=>e.removeEventListener("abort",n))}class Be extends ReadableStream{constructor(){super(...arguments),Object.defineProperty(this,"reader",{enumerable:!0,configurable:!0,writable:!0,value:void 0})}ensureReader(){this.reader||(this.reader=this.getReader())}async next(){this.ensureReader();try{const e=await this.reader.read();return e.done?(this.reader.releaseLock(),{done:!0,value:void 0}):{done:!1,value:e.value}}catch(e){throw this.reader.releaseLock(),e}}async return(){if(this.ensureReader(),this.locked){const e=this.reader.cancel();this.reader.releaseLock(),await e}return{done:!0,value:void 0}}async throw(e){if(this.ensureReader(),this.locked){const n=this.reader.cancel();this.reader.releaseLock(),await n}throw e}[Symbol.asyncIterator](){return this}async[Symbol.asyncDispose](){await this.return()}static fromReadableStream(e){const n=e.getReader();return new Be({start(r){return i();function i(){return n.read().then(({done:a,value:s})=>{if(a){r.close();return}return r.enqueue(s),i()})}},cancel(){n.releaseLock()}})}static fromAsyncGenerator(e){return new Be({async pull(n){const{value:r,done:i}=await e.next();i&&n.close(),n.enqueue(r)},async cancel(n){await e.return(n)}})}}function ig(t,e=2){const n=Array.from({length:e},()=>[]);return n.map(async function*(i){for(;;)if(i.length===0){const a=await t.next();for(const s of n)s.push(a)}else{if(i[0].done)return;yield i.shift().value}})}function zt(t,e){if(Array.isArray(t)&&Array.isArray(e))return t.concat(e);if(typeof t=="string"&&typeof e=="string")return t+e;if(typeof t=="number"&&typeof e=="number")return t+e;if("concat"in t&&typeof t.concat=="function")return t.concat(e);if(typeof t=="object"&&typeof e=="object"){const n={...t};for(const[r,i]of Object.entries(e))r in n&&!Array.isArray(n[r])?n[r]=zt(n[r],i):n[r]=i;return n}else throw new Error(`Cannot concat ${typeof t} and ${typeof e}`)}class ri{constructor(e){var n,r;Object.defineProperty(this,"generator",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"setup",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"config",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"signal",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"firstResult",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"firstResultUsed",{enumerable:!0,configurable:!0,writable:!0,value:!1}),this.generator=e.generator,this.config=e.config,this.signal=(r=e.signal)!=null?r:(n=this.config)==null?void 0:n.signal,this.setup=new Promise((i,a)=>{ur.runWithConfig(e.config,async()=>{this.firstResult=e.generator.next(),e.startSetup?this.firstResult.then(e.startSetup).then(i,a):this.firstResult.then(s=>i(void 0),a)},!0)})}async next(...e){var n;return(n=this.signal)==null||n.throwIfAborted(),this.firstResultUsed?ur.runWithConfig(this.config,this.signal?async()=>Nn(this.generator.next(...e),this.signal):async()=>this.generator.next(...e),!0):(this.firstResultUsed=!0,this.firstResult)}async return(e){return this.generator.return(e)}async throw(e){return this.generator.throw(e)}[Symbol.asyncIterator](){return this}async[Symbol.asyncDispose](){await this.return()}}async function p1(t,e,n,r,...i){const a=new ri({generator:e,startSetup:n,signal:r}),s=await a.setup;return{output:t(a,s,...i),setup:s}}class Jt{constructor(e){var n;Object.defineProperty(this,"ops",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.ops=(n=e.ops)!=null?n:[]}concat(e){const n=this.ops.concat(e.ops),r=fa({},n);return new Qr({ops:n,state:r[r.length-1].newDocument})}}class Qr extends Jt{constructor(e){super(e),Object.defineProperty(this,"state",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.state=e.state}concat(e){const n=this.ops.concat(e.ops),r=fa(this.state,e.ops);return new Qr({ops:n,state:r[r.length-1].newDocument})}static fromRunLogPatch(e){const n=fa({},e.ops);return new Qr({ops:e.ops,state:n[n.length-1].newDocument})}}const m1=t=>t.name==="log_stream_tracer";async function Vf(t,e){if(e==="original")throw new Error("Do not assign inputs with original schema drop the key for now. When inputs are added to streamLog they should be added with standardized schema for streaming events.");const{inputs:n}=t;if(["retriever","llm","prompt"].includes(t.run_type))return n;if(!(Object.keys(n).length===1&&(n==null?void 0:n.input)===""))return n.input}async function Zf(t,e){const{outputs:n}=t;return e==="original"||["retriever","llm","prompt"].includes(t.run_type)?n:n!==void 0&&Object.keys(n).length===1&&(n==null?void 0:n.output)!==void 0?n.output:n}function g1(t){return t!==void 0&&t.message!==void 0}class Gf extends ba{constructor(e){var n,r;super({_awaitHandler:!0,...e}),Object.defineProperty(this,"autoClose",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"includeNames",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"includeTypes",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"includeTags",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"excludeNames",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"excludeTypes",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"excludeTags",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_schemaFormat",{enumerable:!0,configurable:!0,writable:!0,value:"original"}),Object.defineProperty(this,"rootId",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"keyMapByRunId",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"counterMapByRunName",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"transformStream",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"writer",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"receiveStream",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"log_stream_tracer"}),this.autoClose=(n=e==null?void 0:e.autoClose)!=null?n:!0,this.includeNames=e==null?void 0:e.includeNames,this.includeTypes=e==null?void 0:e.includeTypes,this.includeTags=e==null?void 0:e.includeTags,this.excludeNames=e==null?void 0:e.excludeNames,this.excludeTypes=e==null?void 0:e.excludeTypes,this.excludeTags=e==null?void 0:e.excludeTags,this._schemaFormat=(r=e==null?void 0:e._schemaFormat)!=null?r:this._schemaFormat,this.transformStream=new TransformStream,this.writer=this.transformStream.writable.getWriter(),this.receiveStream=Be.fromReadableStream(this.transformStream.readable)}[Symbol.asyncIterator](){return this.receiveStream}async persistRun(e){}_includeRun(e){var i;if(e.id===this.rootId)return!1;const n=(i=e.tags)!=null?i:[];let r=this.includeNames===void 0&&this.includeTags===void 0&&this.includeTypes===void 0;return this.includeNames!==void 0&&(r=r||this.includeNames.includes(e.name)),this.includeTypes!==void 0&&(r=r||this.includeTypes.includes(e.run_type)),this.includeTags!==void 0&&(r=r||n.find(a=>{var s;return(s=this.includeTags)==null?void 0:s.includes(a)})!==void 0),this.excludeNames!==void 0&&(r=r&&!this.excludeNames.includes(e.name)),this.excludeTypes!==void 0&&(r=r&&!this.excludeTypes.includes(e.run_type)),this.excludeTags!==void 0&&(r=r&&n.every(a=>{var s;return!((s=this.excludeTags)!=null&&s.includes(a))})),r}async*tapOutputIterable(e,n){for await(const r of n){if(e!==this.rootId){const i=this.keyMapByRunId[e];i&&await this.writer.write(new Jt({ops:[{op:"add",path:`/logs/${i}/streamed_output/-`,value:r}]}))}yield r}}async onRunCreate(e){var i,a,s;if(this.rootId===void 0&&(this.rootId=e.id,await this.writer.write(new Jt({ops:[{op:"replace",path:"",value:{id:e.id,name:e.name,type:e.run_type,streamed_output:[],final_output:void 0,logs:{}}}]}))),!this._includeRun(e))return;this.counterMapByRunName[e.name]===void 0&&(this.counterMapByRunName[e.name]=0),this.counterMapByRunName[e.name]+=1;const n=this.counterMapByRunName[e.name];this.keyMapByRunId[e.id]=n===1?e.name:`${e.name}:${n}`;const r={id:e.id,name:e.name,type:e.run_type,tags:(i=e.tags)!=null?i:[],metadata:(s=(a=e.extra)==null?void 0:a.metadata)!=null?s:{},start_time:new Date(e.start_time).toISOString(),streamed_output:[],streamed_output_str:[],final_output:void 0,end_time:void 0};this._schemaFormat==="streaming_events"&&(r.inputs=await Vf(e,this._schemaFormat)),await this.writer.write(new Jt({ops:[{op:"add",path:`/logs/${this.keyMapByRunId[e.id]}`,value:r}]}))}async onRunUpdate(e){try{const n=this.keyMapByRunId[e.id];if(n===void 0)return;const r=[];this._schemaFormat==="streaming_events"&&r.push({op:"replace",path:`/logs/${n}/inputs`,value:await Vf(e,this._schemaFormat)}),r.push({op:"add",path:`/logs/${n}/final_output`,value:await Zf(e,this._schemaFormat)}),e.end_time!==void 0&&r.push({op:"add",path:`/logs/${n}/end_time`,value:new Date(e.end_time).toISOString()});const i=new Jt({ops:r});await this.writer.write(i)}finally{if(e.id===this.rootId){const n=new Jt({ops:[{op:"replace",path:"/final_output",value:await Zf(e,this._schemaFormat)}]});await this.writer.write(n),this.autoClose&&await this.writer.close()}}}async onLLMNewToken(e,n,r){const i=this.keyMapByRunId[e.id];if(i===void 0)return;const a=e.inputs.messages!==void 0;let s;a?g1(r==null?void 0:r.chunk)?s=r==null?void 0:r.chunk:s=new Ea({id:`run-${e.id}`,content:n}):s=n;const o=new Jt({ops:[{op:"add",path:`/logs/${i}/streamed_output_str/-`,value:n},{op:"add",path:`/logs/${i}/streamed_output/-`,value:s}]});await this.writer.write(o)}}const y1="__run";class qr{constructor(e){Object.defineProperty(this,"text",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"generationInfo",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.text=e.text,this.generationInfo=e.generationInfo}concat(e){return new qr({text:this.text+e.text,generationInfo:{...this.generationInfo,...e.generationInfo}})}}class Rc extends qr{constructor(e){super(e),Object.defineProperty(this,"message",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.message=e.message}concat(e){return new Rc({text:this.text+e.text,generationInfo:{...this.generationInfo,...e.generationInfo},message:this.message.concat(e.message)})}}function Wa({name:t,serialized:e}){return t!==void 0?t:(e==null?void 0:e.name)!==void 0?e.name:(e==null?void 0:e.id)!==void 0&&Array.isArray(e==null?void 0:e.id)?e.id[e.id.length-1]:"Unnamed"}const v1=t=>t.name==="event_stream_tracer";class _1 extends ba{constructor(e){var n;super({_awaitHandler:!0,...e}),Object.defineProperty(this,"autoClose",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"includeNames",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"includeTypes",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"includeTags",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"excludeNames",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"excludeTypes",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"excludeTags",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"runInfoMap",{enumerable:!0,configurable:!0,writable:!0,value:new Map}),Object.defineProperty(this,"tappedPromises",{enumerable:!0,configurable:!0,writable:!0,value:new Map}),Object.defineProperty(this,"transformStream",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"writer",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"receiveStream",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"event_stream_tracer"}),this.autoClose=(n=e==null?void 0:e.autoClose)!=null?n:!0,this.includeNames=e==null?void 0:e.includeNames,this.includeTypes=e==null?void 0:e.includeTypes,this.includeTags=e==null?void 0:e.includeTags,this.excludeNames=e==null?void 0:e.excludeNames,this.excludeTypes=e==null?void 0:e.excludeTypes,this.excludeTags=e==null?void 0:e.excludeTags,this.transformStream=new TransformStream,this.writer=this.transformStream.writable.getWriter(),this.receiveStream=Be.fromReadableStream(this.transformStream.readable)}[Symbol.asyncIterator](){return this.receiveStream}async persistRun(e){}_includeRun(e){var i;const n=(i=e.tags)!=null?i:[];let r=this.includeNames===void 0&&this.includeTags===void 0&&this.includeTypes===void 0;return this.includeNames!==void 0&&(r=r||this.includeNames.includes(e.name)),this.includeTypes!==void 0&&(r=r||this.includeTypes.includes(e.runType)),this.includeTags!==void 0&&(r=r||n.find(a=>{var s;return(s=this.includeTags)==null?void 0:s.includes(a)})!==void 0),this.excludeNames!==void 0&&(r=r&&!this.excludeNames.includes(e.name)),this.excludeTypes!==void 0&&(r=r&&!this.excludeTypes.includes(e.runType)),this.excludeTags!==void 0&&(r=r&&n.every(a=>{var s;return!((s=this.excludeTags)!=null&&s.includes(a))})),r}async*tapOutputIterable(e,n){const r=await n.next();if(r.done)return;const i=this.runInfoMap.get(e);if(i===void 0){yield r.value;return}function a(o,u){return o==="llm"&&typeof u=="string"?new qr({text:u}):u}let s=this.tappedPromises.get(e);if(s===void 0){let o;s=new Promise(u=>{o=u}),this.tappedPromises.set(e,s);try{const u={event:`on_${i.runType}_stream`,run_id:e,name:i.name,tags:i.tags,metadata:i.metadata,data:{}};await this.send({...u,data:{chunk:a(i.runType,r.value)}},i),yield r.value;for await(const l of n)i.runType!=="tool"&&i.runType!=="retriever"&&await this.send({...u,data:{chunk:a(i.runType,l)}},i),yield l}finally{o()}}else{yield r.value;for await(const o of n)yield o}}async send(e,n){this._includeRun(n)&&await this.writer.write(e)}async sendEndEvent(e,n){const r=this.tappedPromises.get(e.run_id);r!==void 0?r.then(()=>{this.send(e,n)}):await this.send(e,n)}async onLLMStart(e){var s,o,u,l,c,d;const n=Wa(e),r=e.inputs.messages!==void 0?"chat_model":"llm",i={tags:(s=e.tags)!=null?s:[],metadata:(u=(o=e.extra)==null?void 0:o.metadata)!=null?u:{},name:n,runType:r,inputs:e.inputs};this.runInfoMap.set(e.id,i);const a=`on_${r}_start`;await this.send({event:a,data:{input:e.inputs},name:n,tags:(l=e.tags)!=null?l:[],run_id:e.id,metadata:(d=(c=e.extra)==null?void 0:c.metadata)!=null?d:{}},i)}async onLLMNewToken(e,n,r){const i=this.runInfoMap.get(e.id);let a,s;if(i===void 0)throw new Error(`onLLMNewToken: Run ID ${e.id} not found in run map.`);if(this.runInfoMap.size!==1){if(i.runType==="chat_model")s="on_chat_model_stream",(r==null?void 0:r.chunk)===void 0?a=new Ea({content:n,id:`run-${e.id}`}):a=r.chunk.message;else if(i.runType==="llm")s="on_llm_stream",(r==null?void 0:r.chunk)===void 0?a=new qr({text:n}):a=r.chunk;else throw new Error(`Unexpected run type ${i.runType}`);await this.send({event:s,data:{chunk:a},run_id:e.id,name:i.name,tags:i.tags,metadata:i.metadata},i)}}async onLLMEnd(e){var s,o,u,l;const n=this.runInfoMap.get(e.id);this.runInfoMap.delete(e.id);let r;if(n===void 0)throw new Error(`onLLMEnd: Run ID ${e.id} not found in run map.`);const i=(s=e.outputs)==null?void 0:s.generations;let a;if(n.runType==="chat_model"){for(const c of i!=null?i:[]){if(a!==void 0)break;a=(o=c[0])==null?void 0:o.message}r="on_chat_model_end"}else if(n.runType==="llm")a={generations:i==null?void 0:i.map(c=>c.map(d=>({text:d.text,generationInfo:d.generationInfo}))),llmOutput:(l=(u=e.outputs)==null?void 0:u.llmOutput)!=null?l:{}},r="on_llm_end";else throw new Error(`onLLMEnd: Unexpected run type: ${n.runType}`);await this.sendEndEvent({event:r,data:{output:a,input:n.inputs},run_id:e.id,name:n.name,tags:n.tags,metadata:n.metadata},n)}async onChainStart(e){var s,o,u,l,c,d,f;const n=Wa(e),r=(s=e.run_type)!=null?s:"chain",i={tags:(o=e.tags)!=null?o:[],metadata:(l=(u=e.extra)==null?void 0:u.metadata)!=null?l:{},name:n,runType:e.run_type};let a={};e.inputs.input===""&&Object.keys(e.inputs).length===1?(a={},i.inputs={}):e.inputs.input!==void 0?(a.input=e.inputs.input,i.inputs=e.inputs.input):(a.input=e.inputs,i.inputs=e.inputs),this.runInfoMap.set(e.id,i),await this.send({event:`on_${r}_start`,data:a,name:n,tags:(c=e.tags)!=null?c:[],run_id:e.id,metadata:(f=(d=e.extra)==null?void 0:d.metadata)!=null?f:{}},i)}async onChainEnd(e){var o,u,l,c,d;const n=this.runInfoMap.get(e.id);if(this.runInfoMap.delete(e.id),n===void 0)throw new Error(`onChainEnd: Run ID ${e.id} not found in run map.`);const r=`on_${e.run_type}_end`,i=(u=(o=e.inputs)!=null?o:n.inputs)!=null?u:{},s={output:(c=(l=e.outputs)==null?void 0:l.output)!=null?c:e.outputs,input:i};i.input&&Object.keys(i).length===1&&(s.input=i.input,n.inputs=i.input),await this.sendEndEvent({event:r,data:s,run_id:e.id,name:n.name,tags:n.tags,metadata:(d=n.metadata)!=null?d:{}},n)}async onToolStart(e){var i,a,s,o,u,l,c,d;const n=Wa(e),r={tags:(i=e.tags)!=null?i:[],metadata:(s=(a=e.extra)==null?void 0:a.metadata)!=null?s:{},name:n,runType:"tool",inputs:(o=e.inputs)!=null?o:{}};this.runInfoMap.set(e.id,r),await this.send({event:"on_tool_start",data:{input:(u=e.inputs)!=null?u:{}},name:n,run_id:e.id,tags:(l=e.tags)!=null?l:[],metadata:(d=(c=e.extra)==null?void 0:c.metadata)!=null?d:{}},r)}async onToolEnd(e){var i;const n=this.runInfoMap.get(e.id);if(this.runInfoMap.delete(e.id),n===void 0)throw new Error(`onToolEnd: Run ID ${e.id} not found in run map.`);if(n.inputs===void 0)throw new Error(`onToolEnd: Run ID ${e.id} is a tool call, and is expected to have traced inputs.`);const r=((i=e.outputs)==null?void 0:i.output)===void 0?e.outputs:e.outputs.output;await this.sendEndEvent({event:"on_tool_end",data:{output:r,input:n.inputs},run_id:e.id,name:n.name,tags:n.tags,metadata:n.metadata},n)}async onRetrieverStart(e){var a,s,o,u,l,c;const n=Wa(e),r="retriever",i={tags:(a=e.tags)!=null?a:[],metadata:(o=(s=e.extra)==null?void 0:s.metadata)!=null?o:{},name:n,runType:r,inputs:{query:e.inputs.query}};this.runInfoMap.set(e.id,i),await this.send({event:"on_retriever_start",data:{input:{query:e.inputs.query}},name:n,tags:(u=e.tags)!=null?u:[],run_id:e.id,metadata:(c=(l=e.extra)==null?void 0:l.metadata)!=null?c:{}},i)}async onRetrieverEnd(e){var r,i;const n=this.runInfoMap.get(e.id);if(this.runInfoMap.delete(e.id),n===void 0)throw new Error(`onRetrieverEnd: Run ID ${e.id} not found in run map.`);await this.sendEndEvent({event:"on_retriever_end",data:{output:(i=(r=e.outputs)==null?void 0:r.documents)!=null?i:e.outputs,input:n.inputs},run_id:e.id,name:n.name,tags:n.tags,metadata:n.metadata},n)}async handleCustomEvent(e,n,r){const i=this.runInfoMap.get(r);if(i===void 0)throw new Error(`handleCustomEvent: Run ID ${r} not found in run map.`);await this.send({event:"on_custom_event",run_id:r,name:e,tags:i.tags,metadata:i.metadata,data:n},i)}async finish(){const e=[...this.tappedPromises.values()];Promise.all(e).finally(()=>{this.writer.close()})}}const fu=25;async function Ye(t){return Ft._configureSync(t==null?void 0:t.callbacks,void 0,t==null?void 0:t.tags,void 0,t==null?void 0:t.metadata)}function Wf(...t){var n,r,i;const e={};for(const a of t.filter(s=>!!s))for(const s of Object.keys(a))if(s==="metadata")e[s]={...e[s],...a[s]};else if(s==="tags"){const o=(n=e[s])!=null?n:[];e[s]=[...new Set(o.concat((r=a[s])!=null?r:[]))]}else if(s==="configurable")e[s]={...e[s],...a[s]};else if(s==="timeout")e.timeout===void 0?e.timeout=a.timeout:a.timeout!==void 0&&(e.timeout=Math.min(e.timeout,a.timeout));else if(s==="signal")e.signal===void 0?e.signal=a.signal:a.signal!==void 0&&("any"in AbortSignal?e.signal=AbortSignal.any([e.signal,a.signal]):e.signal=a.signal);else if(s==="callbacks"){const o=e.callbacks,u=a.callbacks;if(Array.isArray(u))if(!o)e.callbacks=u;else if(Array.isArray(o))e.callbacks=o.concat(u);else{const l=o.copy();for(const c of u)l.addHandler(zs(c),!0);e.callbacks=l}else if(u)if(!o)e.callbacks=u;else if(Array.isArray(o)){const l=u.copy();for(const c of o)l.addHandler(zs(c),!0);e.callbacks=l}else e.callbacks=new Ft(u._parentRunId,{handlers:o.handlers.concat(u.handlers),inheritableHandlers:o.inheritableHandlers.concat(u.inheritableHandlers),tags:Array.from(new Set(o.tags.concat(u.tags))),inheritableTags:Array.from(new Set(o.inheritableTags.concat(u.inheritableTags))),metadata:{...o.metadata,...u.metadata}})}else{const o=s;e[o]=(i=a[o])!=null?i:e[o]}return e}const w1=new Set(["string","number","boolean"]);function ne(t){var r;const e=ur.getRunnableConfig();let n={tags:[],metadata:{},recursionLimit:25,runId:void 0};if(e){const{runId:i,runName:a,...s}=e;n=Object.entries(s).reduce((o,[u,l])=>(l!==void 0&&(o[u]=l),o),n)}if(t&&(n=Object.entries(t).reduce((i,[a,s])=>(s!==void 0&&(i[a]=s),i),n)),n!=null&&n.configurable)for(const i of Object.keys(n.configurable))w1.has(typeof n.configurable[i])&&!((r=n.metadata)!=null&&r[i])&&(n.metadata||(n.metadata={}),n.metadata[i]=n.configurable[i]);if(n.timeout!==void 0){if(n.timeout<=0)throw new Error("Timeout must be a positive number");const i=AbortSignal.timeout(n.timeout);n.signal!==void 0?"any"in AbortSignal&&(n.signal=AbortSignal.any([n.signal,i])):n.signal=i,delete n.timeout}return n}function $e(t={},{callbacks:e,maxConcurrency:n,recursionLimit:r,runName:i,configurable:a,runId:s}={}){const o=ne(t);return e!==void 0&&(delete o.runName,o.callbacks=e),r!==void 0&&(o.recursionLimit=r),n!==void 0&&(o.maxConcurrency=n),i!==void 0&&(o.runName=i),a!==void 0&&(o.configurable={...o.configurable,...a}),s!==void 0&&delete o.runId,o}const b1=[400,401,402,403,404,405,406,407,409],E1=t=>{var n,r,i;if(t.message.startsWith("Cancel")||t.message.startsWith("AbortError")||t.name==="AbortError"||(t==null?void 0:t.code)==="ECONNABORTED")throw t;const e=(r=(n=t==null?void 0:t.response)==null?void 0:n.status)!=null?r:t==null?void 0:t.status;if(e&&b1.includes(+e))throw t;if(((i=t==null?void 0:t.error)==null?void 0:i.code)==="insufficient_quota"){const a=new Error(t==null?void 0:t.message);throw a.name="InsufficientQuotaError",a}};class S1{constructor(e){var r,i,a;Object.defineProperty(this,"maxConcurrency",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"maxRetries",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"onFailedAttempt",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"queue",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.maxConcurrency=(r=e.maxConcurrency)!=null?r:1/0,this.maxRetries=(i=e.maxRetries)!=null?i:6,this.onFailedAttempt=(a=e.onFailedAttempt)!=null?a:E1;const n="default"in Xt?Xt.default:Xt;this.queue=new n({concurrency:this.maxConcurrency})}call(e,...n){return this.queue.add(()=>ar.exports(()=>e(...n).catch(r=>{throw r instanceof Error?r:new Error(r)}),{onFailedAttempt:this.onFailedAttempt,retries:this.maxRetries,randomize:!0}),{throwOnTimeout:!0})}callWithOptions(e,n,...r){return e.signal?Promise.race([this.call(n,...r),new Promise((i,a)=>{var s;(s=e.signal)==null||s.addEventListener("abort",()=>{a(new Error("AbortError"))})})]):this.call(n,...r)}fetch(...e){return this.call(()=>fetch(...e).then(n=>n.ok?n:Promise.reject(n)))}}class ag extends ba{constructor({config:e,onStart:n,onEnd:r,onError:i}){super({_awaitHandler:!0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"RootListenersTracer"}),Object.defineProperty(this,"rootId",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"config",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"argOnStart",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"argOnEnd",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"argOnError",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.config=e,this.argOnStart=n,this.argOnEnd=r,this.argOnError=i}persistRun(e){return Promise.resolve()}async onRunCreate(e){this.rootId||(this.rootId=e.id,this.argOnStart&&await this.argOnStart(e,this.config))}async onRunUpdate(e){e.id===this.rootId&&(e.error?this.argOnError&&await this.argOnError(e,this.config):this.argOnEnd&&await this.argOnEnd(e,this.config))}}function Ic(t){return t?t.lc_runnable:!1}class k1{constructor(e){Object.defineProperty(this,"includeNames",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"includeTypes",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"includeTags",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"excludeNames",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"excludeTypes",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"excludeTags",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.includeNames=e.includeNames,this.includeTypes=e.includeTypes,this.includeTags=e.includeTags,this.excludeNames=e.excludeNames,this.excludeTypes=e.excludeTypes,this.excludeTags=e.excludeTags}includeEvent(e,n){var a;let r=this.includeNames===void 0&&this.includeTypes===void 0&&this.includeTags===void 0;const i=(a=e.tags)!=null?a:[];return this.includeNames!==void 0&&(r=r||this.includeNames.includes(e.name)),this.includeTypes!==void 0&&(r=r||this.includeTypes.includes(n)),this.includeTags!==void 0&&(r=r||i.some(s=>{var o;return(o=this.includeTags)==null?void 0:o.includes(s)})),this.excludeNames!==void 0&&(r=r&&!this.excludeNames.includes(e.name)),this.excludeTypes!==void 0&&(r=r&&!this.excludeTypes.includes(n)),this.excludeTags!==void 0&&(r=r&&i.every(s=>{var o;return!((o=this.excludeTags)!=null&&o.includes(s))})),r}}const T1=Symbol("Let zodToJsonSchema decide on which parser to use"),Jf={name:void 0,$refStrategy:"root",basePath:["#"],effectStrategy:"input",pipeStrategy:"all",dateStrategy:"format:date-time",mapStrategy:"entries",removeAdditionalStrategy:"passthrough",definitionPath:"definitions",target:"jsonSchema7",strictUnions:!1,definitions:{},errorMessages:!1,markdownDescription:!1,patternStrategy:"escape",applyRegexFlags:!1,emailStrategy:"format:email",base64Strategy:"contentEncoding:base64",nameStrategy:"ref"},x1=t=>typeof t=="string"?{...Jf,name:t}:{...Jf,...t},O1=t=>{const e=x1(t),n=e.name!==void 0?[...e.basePath,e.definitionPath,e.name]:e.basePath;return{...e,currentPath:n,propertyPath:void 0,seen:new Map(Object.entries(e.definitions).map(([r,i])=>[i._def,{def:i._def,path:[...e.basePath,e.definitionPath,r],jsonSchema:void 0}]))}};function sg(t,e,n,r){!(r!=null&&r.errorMessages)||n&&(t.errorMessage={...t.errorMessage,[e]:n})}function ee(t,e,n,r,i){t[e]=n,sg(t,e,r,i)}function C1(){return{}}function P1(t,e){var r,i;const n={type:"array"};return((i=(r=t.type)==null?void 0:r._def)==null?void 0:i.typeName)!==O.ZodAny&&(n.items=X(t.type._def,{...e,currentPath:[...e.currentPath,"items"]})),t.minLength&&ee(n,"minItems",t.minLength.value,t.minLength.message,e),t.maxLength&&ee(n,"maxItems",t.maxLength.value,t.maxLength.message,e),t.exactLength&&(ee(n,"minItems",t.exactLength.value,t.exactLength.message,e),ee(n,"maxItems",t.exactLength.value,t.exactLength.message,e)),n}function R1(t,e){const n={type:"integer",format:"int64"};if(!t.checks)return n;for(const r of t.checks)switch(r.kind){case"min":e.target==="jsonSchema7"?r.inclusive?ee(n,"minimum",r.value,r.message,e):ee(n,"exclusiveMinimum",r.value,r.message,e):(r.inclusive||(n.exclusiveMinimum=!0),ee(n,"minimum",r.value,r.message,e));break;case"max":e.target==="jsonSchema7"?r.inclusive?ee(n,"maximum",r.value,r.message,e):ee(n,"exclusiveMaximum",r.value,r.message,e):(r.inclusive||(n.exclusiveMaximum=!0),ee(n,"maximum",r.value,r.message,e));break;case"multipleOf":ee(n,"multipleOf",r.value,r.message,e);break}return n}function I1(){return{type:"boolean"}}function N1(t,e){return X(t.type._def,e)}const $1=(t,e)=>X(t.innerType._def,e);function og(t,e,n){const r=n!=null?n:e.dateStrategy;if(Array.isArray(r))return{anyOf:r.map((i,a)=>og(t,e,i))};switch(r){case"string":case"format:date-time":return{type:"string",format:"date-time"};case"format:date":return{type:"string",format:"date"};case"integer":return A1(t,e)}}const A1=(t,e)=>{const n={type:"integer",format:"unix-time"};if(e.target==="openApi3")return n;for(const r of t.checks)switch(r.kind){case"min":ee(n,"minimum",r.value,r.message,e);break;case"max":ee(n,"maximum",r.value,r.message,e);break}return n};function L1(t,e){return{...X(t.innerType._def,e),default:t.defaultValue()}}function j1(t,e){return e.effectStrategy==="input"?X(t.schema._def,e):{}}function D1(t){return{type:"string",enum:t.values}}const M1=t=>"type"in t&&t.type==="string"?!1:"allOf"in t;function U1(t,e){const n=[X(t.left._def,{...e,currentPath:[...e.currentPath,"allOf","0"]}),X(t.right._def,{...e,currentPath:[...e.currentPath,"allOf","1"]})].filter(a=>!!a);let r=e.target==="jsonSchema2019-09"?{unevaluatedProperties:!1}:void 0;const i=[];return n.forEach(a=>{if(M1(a))i.push(...a.allOf),a.unevaluatedProperties===void 0&&(r=void 0);else{let s=a;if("additionalProperties"in a&&a.additionalProperties===!1){const{additionalProperties:o,...u}=a;s=u}else r=void 0;i.push(s)}}),i.length?{allOf:i,...r}:void 0}function F1(t,e){const n=typeof t.value;return n!=="bigint"&&n!=="number"&&n!=="boolean"&&n!=="string"?{type:Array.isArray(t.value)?"array":"object"}:e.target==="openApi3"?{type:n==="bigint"?"integer":n,enum:[t.value]}:{type:n==="bigint"?"integer":n,const:t.value}}let hu;const Dn={cuid:/^[cC][^\s-]{8,}$/,cuid2:/^[0-9a-z]+$/,ulid:/^[0-9A-HJKMNP-TV-Z]{26}$/,email:/^(?!\.)(?!.*\.\.)([a-zA-Z0-9_'+\-\.]*)[a-zA-Z0-9_+-]@([a-zA-Z0-9][a-zA-Z0-9\-]*\.)+[a-zA-Z]{2,}$/,emoji:()=>(hu===void 0&&(hu=RegExp("^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$","u")),hu),uuid:/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/,ipv4:/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,ipv6:/^(([a-f0-9]{1,4}:){7}|::([a-f0-9]{1,4}:){0,6}|([a-f0-9]{1,4}:){1}:([a-f0-9]{1,4}:){0,5}|([a-f0-9]{1,4}:){2}:([a-f0-9]{1,4}:){0,4}|([a-f0-9]{1,4}:){3}:([a-f0-9]{1,4}:){0,3}|([a-f0-9]{1,4}:){4}:([a-f0-9]{1,4}:){0,2}|([a-f0-9]{1,4}:){5}:([a-f0-9]{1,4}:){0,1})([a-f0-9]{1,4}|(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2})))$/,base64:/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,nanoid:/^[a-zA-Z0-9_-]{21}$/};function ug(t,e){const n={type:"string"};function r(i){return e.patternStrategy==="escape"?z1(i):i}if(t.checks)for(const i of t.checks)switch(i.kind){case"min":ee(n,"minLength",typeof n.minLength=="number"?Math.max(n.minLength,i.value):i.value,i.message,e);break;case"max":ee(n,"maxLength",typeof n.maxLength=="number"?Math.min(n.maxLength,i.value):i.value,i.message,e);break;case"email":switch(e.emailStrategy){case"format:email":_t(n,"email",i.message,e);break;case"format:idn-email":_t(n,"idn-email",i.message,e);break;case"pattern:zod":wt(n,Dn.email,i.message,e);break}break;case"url":_t(n,"uri",i.message,e);break;case"uuid":_t(n,"uuid",i.message,e);break;case"regex":wt(n,i.regex,i.message,e);break;case"cuid":wt(n,Dn.cuid,i.message,e);break;case"cuid2":wt(n,Dn.cuid2,i.message,e);break;case"startsWith":wt(n,RegExp(`^${r(i.value)}`),i.message,e);break;case"endsWith":wt(n,RegExp(`${r(i.value)}$`),i.message,e);break;case"datetime":_t(n,"date-time",i.message,e);break;case"date":_t(n,"date",i.message,e);break;case"time":_t(n,"time",i.message,e);break;case"duration":_t(n,"duration",i.message,e);break;case"length":ee(n,"minLength",typeof n.minLength=="number"?Math.max(n.minLength,i.value):i.value,i.message,e),ee(n,"maxLength",typeof n.maxLength=="number"?Math.min(n.maxLength,i.value):i.value,i.message,e);break;case"includes":{wt(n,RegExp(r(i.value)),i.message,e);break}case"ip":{i.version!=="v6"&&_t(n,"ipv4",i.message,e),i.version!=="v4"&&_t(n,"ipv6",i.message,e);break}case"emoji":wt(n,Dn.emoji,i.message,e);break;case"ulid":{wt(n,Dn.ulid,i.message,e);break}case"base64":{switch(e.base64Strategy){case"format:binary":{_t(n,"binary",i.message,e);break}case"contentEncoding:base64":{ee(n,"contentEncoding","base64",i.message,e);break}case"pattern:zod":{wt(n,Dn.base64,i.message,e);break}}break}case"nanoid":wt(n,Dn.nanoid,i.message,e)}return n}const z1=t=>Array.from(t).map(e=>/[a-zA-Z0-9]/.test(e)?e:`\\${e}`).join(""),_t=(t,e,n,r)=>{var i;t.format||((i=t.anyOf)==null?void 0:i.some(a=>a.format))?(t.anyOf||(t.anyOf=[]),t.format&&(t.anyOf.push({format:t.format,...t.errorMessage&&r.errorMessages&&{errorMessage:{format:t.errorMessage.format}}}),delete t.format,t.errorMessage&&(delete t.errorMessage.format,Object.keys(t.errorMessage).length===0&&delete t.errorMessage)),t.anyOf.push({format:e,...n&&r.errorMessages&&{errorMessage:{format:n}}})):ee(t,"format",e,n,r)},wt=(t,e,n,r)=>{var i;t.pattern||((i=t.allOf)==null?void 0:i.some(a=>a.pattern))?(t.allOf||(t.allOf=[]),t.pattern&&(t.allOf.push({pattern:t.pattern,...t.errorMessage&&r.errorMessages&&{errorMessage:{pattern:t.errorMessage.pattern}}}),delete t.pattern,t.errorMessage&&(delete t.errorMessage.pattern,Object.keys(t.errorMessage).length===0&&delete t.errorMessage)),t.allOf.push({pattern:Qf(e,r),...n&&r.errorMessages&&{errorMessage:{pattern:n}}})):ee(t,"pattern",Qf(e,r),n,r)},Qf=(t,e)=>{var l;const n=typeof t=="function"?t():t;if(!e.applyRegexFlags||!n.flags)return n.source;const r={i:n.flags.includes("i"),m:n.flags.includes("m"),s:n.flags.includes("s")},i=r.i?n.source.toLowerCase():n.source;let a="",s=!1,o=!1,u=!1;for(let c=0;c<i.length;c++){if(s){a+=i[c],s=!1;continue}if(r.i){if(o){if(i[c].match(/[a-z]/)){u?(a+=i[c],a+=`${i[c-2]}-${i[c]}`.toUpperCase(),u=!1):i[c+1]==="-"&&((l=i[c+2])==null?void 0:l.match(/[a-z]/))?(a+=i[c],u=!0):a+=`${i[c]}${i[c].toUpperCase()}`;continue}}else if(i[c].match(/[a-z]/)){a+=`[${i[c]}${i[c].toUpperCase()}]`;continue}}if(r.m){if(i[c]==="^"){a+=`(^|(?<=[\r
]))`;continue}else if(i[c]==="$"){a+=`($|(?=[\r
]))`;continue}}if(r.s&&i[c]==="."){a+=o?`${i[c]}\r
`:`[${i[c]}\r
]`;continue}a+=i[c],i[c]==="\\"?s=!0:o&&i[c]==="]"?o=!1:!o&&i[c]==="["&&(o=!0)}try{const c=new RegExp(a)}catch{return console.warn(`Could not convert regex pattern at ${e.currentPath.join("/")} to a flag-independent form! Falling back to the flag-ignorant source`),n.source}return a};function lg(t,e){var r,i,a,s,o;if(e.target==="openApi3"&&((r=t.keyType)==null?void 0:r._def.typeName)===O.ZodEnum)return{type:"object",required:t.keyType._def.values,properties:t.keyType._def.values.reduce((u,l)=>{var c;return{...u,[l]:(c=X(t.valueType._def,{...e,currentPath:[...e.currentPath,"properties",l]}))!=null?c:{}}},{}),additionalProperties:!1};const n={type:"object",additionalProperties:(i=X(t.valueType._def,{...e,currentPath:[...e.currentPath,"additionalProperties"]}))!=null?i:{}};if(e.target==="openApi3")return n;if(((a=t.keyType)==null?void 0:a._def.typeName)===O.ZodString&&((s=t.keyType._def.checks)==null?void 0:s.length)){const u=Object.entries(ug(t.keyType._def,e)).reduce((l,[c,d])=>c==="type"?l:{...l,[c]:d},{});return{...n,propertyNames:u}}else if(((o=t.keyType)==null?void 0:o._def.typeName)===O.ZodEnum)return{...n,propertyNames:{enum:t.keyType._def.values}};return n}function B1(t,e){if(e.mapStrategy==="record")return lg(t,e);const n=X(t.keyType._def,{...e,currentPath:[...e.currentPath,"items","items","0"]})||{},r=X(t.valueType._def,{...e,currentPath:[...e.currentPath,"items","items","1"]})||{};return{type:"array",maxItems:125,items:{type:"array",items:[n,r],minItems:2,maxItems:2}}}function H1(t){const e=t.values,r=Object.keys(t.values).filter(a=>typeof e[e[a]]!="number").map(a=>e[a]),i=Array.from(new Set(r.map(a=>typeof a)));return{type:i.length===1?i[0]==="string"?"string":"number":["string","number"],enum:r}}function V1(){return{not:{}}}function Z1(t){return t.target==="openApi3"?{enum:["null"],nullable:!0}:{type:"null"}}const Bs={ZodString:"string",ZodNumber:"number",ZodBigInt:"integer",ZodBoolean:"boolean",ZodNull:"null"};function G1(t,e){if(e.target==="openApi3")return qf(t,e);const n=t.options instanceof Map?Array.from(t.options.values()):t.options;if(n.every(r=>r._def.typeName in Bs&&(!r._def.checks||!r._def.checks.length))){const r=n.reduce((i,a)=>{const s=Bs[a._def.typeName];return s&&!i.includes(s)?[...i,s]:i},[]);return{type:r.length>1?r:r[0]}}else if(n.every(r=>r._def.typeName==="ZodLiteral"&&!r.description)){const r=n.reduce((i,a)=>{const s=typeof a._def.value;switch(s){case"string":case"number":case"boolean":return[...i,s];case"bigint":return[...i,"integer"];case"object":if(a._def.value===null)return[...i,"null"];case"symbol":case"undefined":case"function":default:return i}},[]);if(r.length===n.length){const i=r.filter((a,s,o)=>o.indexOf(a)===s);return{type:i.length>1?i:i[0],enum:n.reduce((a,s)=>a.includes(s._def.value)?a:[...a,s._def.value],[])}}}else if(n.every(r=>r._def.typeName==="ZodEnum"))return{type:"string",enum:n.reduce((r,i)=>[...r,...i._def.values.filter(a=>!r.includes(a))],[])};return qf(t,e)}const qf=(t,e)=>{const n=(t.options instanceof Map?Array.from(t.options.values()):t.options).map((r,i)=>X(r._def,{...e,currentPath:[...e.currentPath,"anyOf",`${i}`]})).filter(r=>!!r&&(!e.strictUnions||typeof r=="object"&&Object.keys(r).length>0));return n.length?{anyOf:n}:void 0};function W1(t,e){if(["ZodString","ZodNumber","ZodBigInt","ZodBoolean","ZodNull"].includes(t.innerType._def.typeName)&&(!t.innerType._def.checks||!t.innerType._def.checks.length))return e.target==="openApi3"?{type:Bs[t.innerType._def.typeName],nullable:!0}:{type:[Bs[t.innerType._def.typeName],"null"]};if(e.target==="openApi3"){const r=X(t.innerType._def,{...e,currentPath:[...e.currentPath]});return r&&"$ref"in r?{allOf:[r],nullable:!0}:r&&{...r,nullable:!0}}const n=X(t.innerType._def,{...e,currentPath:[...e.currentPath,"anyOf","0"]});return n&&{anyOf:[n,{type:"null"}]}}function J1(t,e){const n={type:"number"};if(!t.checks)return n;for(const r of t.checks)switch(r.kind){case"int":n.type="integer",sg(n,"type",r.message,e);break;case"min":e.target==="jsonSchema7"?r.inclusive?ee(n,"minimum",r.value,r.message,e):ee(n,"exclusiveMinimum",r.value,r.message,e):(r.inclusive||(n.exclusiveMinimum=!0),ee(n,"minimum",r.value,r.message,e));break;case"max":e.target==="jsonSchema7"?r.inclusive?ee(n,"maximum",r.value,r.message,e):ee(n,"exclusiveMaximum",r.value,r.message,e):(r.inclusive||(n.exclusiveMaximum=!0),ee(n,"maximum",r.value,r.message,e));break;case"multipleOf":ee(n,"multipleOf",r.value,r.message,e);break}return n}function Q1(t,e){var n,r;return e.removeAdditionalStrategy==="strict"?t.catchall._def.typeName==="ZodNever"?t.unknownKeys!=="strict":(n=X(t.catchall._def,{...e,currentPath:[...e.currentPath,"additionalProperties"]}))!=null?n:!0:t.catchall._def.typeName==="ZodNever"?t.unknownKeys==="passthrough":(r=X(t.catchall._def,{...e,currentPath:[...e.currentPath,"additionalProperties"]}))!=null?r:!0}function q1(t,e){const n={type:"object",...Object.entries(t.shape()).reduce((r,[i,a])=>{if(a===void 0||a._def===void 0)return r;const s=X(a._def,{...e,currentPath:[...e.currentPath,"properties",i],propertyPath:[...e.currentPath,"properties",i]});return s===void 0?r:{properties:{...r.properties,[i]:s},required:a.isOptional()?r.required:[...r.required,i]}},{properties:{},required:[]}),additionalProperties:Q1(t,e)};return n.required.length||delete n.required,n}const K1=(t,e)=>{var r;if(e.currentPath.toString()===((r=e.propertyPath)==null?void 0:r.toString()))return X(t.innerType._def,e);const n=X(t.innerType._def,{...e,currentPath:[...e.currentPath,"anyOf","1"]});return n?{anyOf:[{not:{}},n]}:{}},X1=(t,e)=>{if(e.pipeStrategy==="input")return X(t.in._def,e);if(e.pipeStrategy==="output")return X(t.out._def,e);const n=X(t.in._def,{...e,currentPath:[...e.currentPath,"allOf","0"]}),r=X(t.out._def,{...e,currentPath:[...e.currentPath,"allOf",n?"1":"0"]});return{allOf:[n,r].filter(i=>i!==void 0)}};function Y1(t,e){return X(t.type._def,e)}function eS(t,e){const r={type:"array",uniqueItems:!0,items:X(t.valueType._def,{...e,currentPath:[...e.currentPath,"items"]})};return t.minSize&&ee(r,"minItems",t.minSize.value,t.minSize.message,e),t.maxSize&&ee(r,"maxItems",t.maxSize.value,t.maxSize.message,e),r}function tS(t,e){return t.rest?{type:"array",minItems:t.items.length,items:t.items.map((n,r)=>X(n._def,{...e,currentPath:[...e.currentPath,"items",`${r}`]})).reduce((n,r)=>r===void 0?n:[...n,r],[]),additionalItems:X(t.rest._def,{...e,currentPath:[...e.currentPath,"additionalItems"]})}:{type:"array",minItems:t.items.length,maxItems:t.items.length,items:t.items.map((n,r)=>X(n._def,{...e,currentPath:[...e.currentPath,"items",`${r}`]})).reduce((n,r)=>r===void 0?n:[...n,r],[])}}function nS(){return{not:{}}}function rS(){return{}}const iS=(t,e)=>X(t.innerType._def,e);function X(t,e,n=!1){var s;const r=e.seen.get(t);if(e.override){const o=(s=e.override)==null?void 0:s.call(e,t,e,r,n);if(o!==T1)return o}if(r&&!n){const o=aS(r,e);if(o!==void 0)return o}const i={def:t,path:e.currentPath,jsonSchema:void 0};e.seen.set(t,i);const a=oS(t,t.typeName,e);return a&&uS(t,e,a),i.jsonSchema=a,a}const aS=(t,e)=>{switch(e.$refStrategy){case"root":return{$ref:t.path.join("/")};case"relative":return{$ref:sS(e.currentPath,t.path)};case"none":case"seen":return t.path.length<e.currentPath.length&&t.path.every((n,r)=>e.currentPath[r]===n)?(console.warn(`Recursive reference detected at ${e.currentPath.join("/")}! Defaulting to any`),{}):e.$refStrategy==="seen"?{}:void 0}},sS=(t,e)=>{let n=0;for(;n<t.length&&n<e.length&&t[n]===e[n];n++);return[(t.length-n).toString(),...e.slice(n)].join("/")},oS=(t,e,n)=>{switch(e){case O.ZodString:return ug(t,n);case O.ZodNumber:return J1(t,n);case O.ZodObject:return q1(t,n);case O.ZodBigInt:return R1(t,n);case O.ZodBoolean:return I1();case O.ZodDate:return og(t,n);case O.ZodUndefined:return nS();case O.ZodNull:return Z1(n);case O.ZodArray:return P1(t,n);case O.ZodUnion:case O.ZodDiscriminatedUnion:return G1(t,n);case O.ZodIntersection:return U1(t,n);case O.ZodTuple:return tS(t,n);case O.ZodRecord:return lg(t,n);case O.ZodLiteral:return F1(t,n);case O.ZodEnum:return D1(t);case O.ZodNativeEnum:return H1(t);case O.ZodNullable:return W1(t,n);case O.ZodOptional:return K1(t,n);case O.ZodMap:return B1(t,n);case O.ZodSet:return eS(t,n);case O.ZodLazy:return X(t.getter()._def,n);case O.ZodPromise:return Y1(t,n);case O.ZodNaN:case O.ZodNever:return V1();case O.ZodEffects:return j1(t,n);case O.ZodAny:return C1();case O.ZodUnknown:return rS();case O.ZodDefault:return L1(t,n);case O.ZodBranded:return N1(t,n);case O.ZodReadonly:return iS(t,n);case O.ZodCatch:return $1(t,n);case O.ZodPipeline:return X1(t,n);case O.ZodFunction:case O.ZodVoid:case O.ZodSymbol:return;default:return(r=>{})()}},uS=(t,e,n)=>(t.description&&(n.description=t.description,e.markdownDescription&&(n.markdownDescription=t.description)),n),lS=(t,e)=>{var u;const n=O1(e),r=typeof e=="object"&&e.definitions?Object.entries(e.definitions).reduce((l,[c,d])=>{var f;return{...l,[c]:(f=X(d._def,{...n,currentPath:[...n.basePath,n.definitionPath,c]},!0))!=null?f:{}}},{}):void 0,i=typeof e=="string"?e:(e==null?void 0:e.nameStrategy)==="title"||e==null?void 0:e.name,a=(u=X(t._def,i===void 0?n:{...n,currentPath:[...n.basePath,n.definitionPath,i]},!1))!=null?u:{},s=typeof e=="object"&&e.name!==void 0&&e.nameStrategy==="title"?e.name:void 0;s!==void 0&&(a.title=s);const o=i===void 0?r?{...a,[n.definitionPath]:r}:a:{$ref:[...n.$refStrategy==="relative"?[]:n.basePath,n.definitionPath,i].join("/"),[n.definitionPath]:{...r,[i]:a}};return n.target==="jsonSchema7"?o.$schema="http://json-schema.org/draft-07/schema#":n.target==="jsonSchema2019-09"&&(o.$schema="https://json-schema.org/draft/2019-09/schema#"),o};function pu(t){return t.replace(/[^a-zA-Z-_0-9]/g,"_")}const cS=["*","_","`"];function dS(t){let e="";for(const[n,r]of Object.entries(t))e+=`	classDef ${n} ${r};
`;return e}function fS(t,e,n){var h,p,v,_,m;const{firstNode:r,lastNode:i,nodeColors:a,withStyles:s=!0,curveStyle:o="linear",wrapLabelNWords:u=9}=n!=null?n:{};let l=s?`%%{init: {'flowchart': {'curve': '${o}'}}}%%
graph TD;
`:`graph TD;
`;if(s){const g="default",y={[g]:"{0}({1})"};r!==void 0&&(y[r]="{0}([{1}]):::first"),i!==void 0&&(y[i]="{0}([{1}]):::last");for(const[w,E]of Object.entries(t)){const T=(h=E.name.split(":").pop())!=null?h:"";let P=cS.some(B=>T.startsWith(B)&&T.endsWith(B))?`<p>${T}</p>`:T;Object.keys((p=E.metadata)!=null?p:{}).length&&(P+=`<hr/><small><em>${Object.entries((v=E.metadata)!=null?v:{}).map(([B,le])=>`${B} = ${le}`).join(`
`)}</em></small>`);const J=((_=y[w])!=null?_:y[g]).replace("{0}",pu(w)).replace("{1}",P);l+=`	${J}
`}}const c={};for(const g of e){const y=g.source.split(":"),w=g.target.split(":"),E=y.filter((T,C)=>T===w[C]).join(":");c[E]||(c[E]=[]),c[E].push(g)}const d=new Set;function f(g,y){const w=g.length===1&&g[0].source===g[0].target;if(y&&!w){const E=y.split(":").pop();if(d.has(E))throw new Error(`Found duplicate subgraph '${E}' -- this likely means that you're reusing a subgraph node with the same name. Please adjust your graph to have subgraph nodes with unique names.`);d.add(E),l+=`	subgraph ${E}
`}for(const E of g){const{source:T,target:C,data:P,conditional:J}=E;let B="";if(P!==void 0){let le=P;const Ge=le.split(" ");Ge.length>u&&(le=Array.from({length:Math.ceil(Ge.length/u)},(yt,$)=>Ge.slice($*u,($+1)*u).join(" ")).join("&nbsp;<br>&nbsp;")),B=J?` -. &nbsp;${le}&nbsp; .-> `:` -- &nbsp;${le}&nbsp; --> `}else B=J?" -.-> ":" --> ";l+=`	${pu(T)}${B}${pu(C)};
`}for(const E in c)E.startsWith(`${y}:`)&&E!==y&&f(c[E],E);y&&!w&&(l+=`	end
`)}f((m=c[""])!=null?m:[],"");for(const g in c)!g.includes(":")&&g!==""&&f(c[g],g);return s&&(l+=dS(a!=null?a:{})),l}async function hS(t,e){let{backgroundColor:n="white"}=e!=null?e:{};const r=btoa(t);n!==void 0&&(/^#(?:[0-9a-fA-F]{3}){1,2}$/.test(n)||(n=`!${n}`));const i=`https://mermaid.ink/img/${r}?bgColor=${n}`,a=await fetch(i);if(!a.ok)throw new Error(["Failed to render the graph using the Mermaid.INK API.",`Status code: ${a.status}`,`Status text: ${a.statusText}`].join(`
`));return await a.blob()}function pS(t,e){var n;if(t!==void 0&&!Ni(t))return t;if(Ic(e))try{let r=e.getName();return r=r.startsWith("Runnable")?r.slice(8):r,r}catch{return e.getName()}else return(n=e.name)!=null?n:"UnknownSchema"}function mS(t){return Ic(t.data)?{type:"runnable",data:{id:t.data.lc_id,name:t.data.getName()}}:{type:"schema",data:{...lS(t.data.schema),title:t.data.name}}}class yo{constructor(e){var n,r;Object.defineProperty(this,"nodes",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"edges",{enumerable:!0,configurable:!0,writable:!0,value:[]}),this.nodes=(n=e==null?void 0:e.nodes)!=null?n:this.nodes,this.edges=(r=e==null?void 0:e.edges)!=null?r:this.edges}toJSON(){const e={};return Object.values(this.nodes).forEach((n,r)=>{e[n.id]=Ni(n.id)?r:n.id}),{nodes:Object.values(this.nodes).map(n=>({id:e[n.id],...mS(n)})),edges:this.edges.map(n=>{const r={source:e[n.source],target:e[n.target]};return typeof n.data<"u"&&(r.data=n.data),typeof n.conditional<"u"&&(r.conditional=n.conditional),r})}}addNode(e,n,r){if(n!==void 0&&this.nodes[n]!==void 0)throw new Error(`Node with id ${n} already exists`);const i=n!=null?n:nt(),a={id:i,data:e,name:pS(n,e),metadata:r};return this.nodes[i]=a,a}removeNode(e){delete this.nodes[e.id],this.edges=this.edges.filter(n=>n.source!==e.id&&n.target!==e.id)}addEdge(e,n,r,i){if(this.nodes[e.id]===void 0)throw new Error(`Source node ${e.id} not in graph`);if(this.nodes[n.id]===void 0)throw new Error(`Target node ${n.id} not in graph`);const a={source:e.id,target:n.id,data:r,conditional:i};return this.edges.push(a),a}firstNode(){return Kf(this)}lastNode(){return Xf(this)}extend(e,n=""){let r=n;Object.values(e.nodes).map(l=>l.id).every(Ni)&&(r="");const a=l=>r?`${r}:${l}`:l;Object.entries(e.nodes).forEach(([l,c])=>{this.nodes[a(l)]={...c,id:a(l)}});const s=e.edges.map(l=>({...l,source:a(l.source),target:a(l.target)}));this.edges=[...this.edges,...s];const o=e.firstNode(),u=e.lastNode();return[o?{id:a(o.id),data:o.data}:void 0,u?{id:a(u.id),data:u.data}:void 0]}trimFirstNode(){const e=this.firstNode();e&&Kf(this,[e.id])&&this.removeNode(e)}trimLastNode(){const e=this.lastNode();e&&Xf(this,[e.id])&&this.removeNode(e)}reid(){const e=Object.fromEntries(Object.values(this.nodes).map(i=>[i.id,i.name])),n=new Map;Object.values(e).forEach(i=>{n.set(i,(n.get(i)||0)+1)});const r=i=>{const a=e[i];return Ni(i)&&n.get(a)===1?a:i};return new yo({nodes:Object.fromEntries(Object.entries(this.nodes).map(([i,a])=>[r(i),{...a,id:r(i)}])),edges:this.edges.map(i=>({...i,source:r(i.source),target:r(i.target)}))})}drawMermaid(e){const{withStyles:n,curveStyle:r,nodeColors:i={default:"fill:#f2f0ff,line-height:1.2",first:"fill-opacity:0",last:"fill:#bfb6fc"},wrapLabelNWords:a}=e!=null?e:{},s=this.reid(),o=s.firstNode(),u=s.lastNode();return fS(s.nodes,s.edges,{firstNode:o==null?void 0:o.id,lastNode:u==null?void 0:u.id,withStyles:n,curveStyle:r,nodeColors:i,wrapLabelNWords:a})}async drawMermaidPng(e){const n=this.drawMermaid(e);return hS(n,{backgroundColor:e==null?void 0:e.backgroundColor})}}function Kf(t,e=[]){const n=new Set(t.edges.filter(i=>!e.includes(i.source)).map(i=>i.target)),r=[];for(const i of Object.values(t.nodes))!e.includes(i.id)&&!n.has(i.id)&&r.push(i);return r.length===1?r[0]:void 0}function Xf(t,e=[]){const n=new Set(t.edges.filter(i=>!e.includes(i.target)).map(i=>i.source)),r=[];for(const i of Object.values(t.nodes))!e.includes(i.id)&&!n.has(i.id)&&r.push(i);return r.length===1?r[0]:void 0}function gS(t){const e=new TextEncoder,n=new ReadableStream({async start(r){for await(const i of t)r.enqueue(e.encode(`event: data
data: ${JSON.stringify(i)}

`));r.enqueue(e.encode(`event: end

`)),r.close()}});return Be.fromReadableStream(n)}function Yf(t){return typeof t=="object"&&t!==null&&typeof t[Symbol.iterator]=="function"&&typeof t.next=="function"}const yS=t=>t!=null&&typeof t=="object"&&"next"in t&&typeof t.next=="function";function yl(t){return typeof t=="object"&&t!==null&&typeof t[Symbol.asyncIterator]=="function"}function*eh(t,e){for(;;){const{value:n,done:r}=ur.runWithConfig(t,e.next.bind(e),!0);if(r)break;yield n}}async function*th(t,e){const n=e[Symbol.asyncIterator]();for(;;){const{value:r,done:i}=await ur.runWithConfig(t,n.next.bind(e),!0);if(i)break;yield r}}function ye(t,e){return t&&!Array.isArray(t)&&!(t instanceof Date)&&typeof t=="object"?t:{[e]:t}}class Ue extends or{constructor(){super(...arguments),Object.defineProperty(this,"lc_runnable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:void 0})}getName(e){var r,i;const n=(i=(r=this.name)!=null?r:this.constructor.lc_name())!=null?i:this.constructor.name;return e?`${n}${e}`:n}bind(e){return new Kn({bound:this,kwargs:e,config:{}})}map(){return new Hs({bound:this})}withRetry(e){return new vS({bound:this,kwargs:{},config:{},maxAttemptNumber:e==null?void 0:e.stopAfterAttempt,...e})}withConfig(e){return new Kn({bound:this,config:e,kwargs:{}})}withFallbacks(e){const n=Array.isArray(e)?e:e.fallbacks;return new wS({runnable:this,fallbacks:n})}_getOptionsList(e,n=0){if(Array.isArray(e)&&e.length!==n)throw new Error(`Passed "options" must be an array with the same length as the inputs, but got ${e.length} options for ${n} inputs`);if(Array.isArray(e))return e.map(ne);if(n>1&&!Array.isArray(e)&&e.runId){console.warn("Provided runId will be used only for the first element of the batch.");const r=Object.fromEntries(Object.entries(e).filter(([i])=>i!=="runId"));return Array.from({length:n},(i,a)=>ne(a===0?e:r))}return Array.from({length:n},()=>ne(e))}async batch(e,n,r){var u,l;const i=this._getOptionsList(n!=null?n:{},e.length),a=(l=(u=i[0])==null?void 0:u.maxConcurrency)!=null?l:r==null?void 0:r.maxConcurrency,s=new S1({maxConcurrency:a,onFailedAttempt:c=>{throw c}}),o=e.map((c,d)=>s.call(async()=>{try{return await this.invoke(c,i[d])}catch(f){if(r!=null&&r.returnExceptions)return f;throw f}}));return Promise.all(o)}async*_streamIterator(e,n){yield this.invoke(e,n)}async stream(e,n){const r=ne(n),i=new ri({generator:this._streamIterator(e,r),config:r});return await i.setup,Be.fromAsyncGenerator(i)}_separateRunnableConfigFromCallOptions(e){let n;e===void 0?n=ne(e):n=ne({callbacks:e.callbacks,tags:e.tags,metadata:e.metadata,runName:e.runName,configurable:e.configurable,recursionLimit:e.recursionLimit,maxConcurrency:e.maxConcurrency,runId:e.runId,timeout:e.timeout,signal:e.signal});const r={...e};return delete r.callbacks,delete r.tags,delete r.metadata,delete r.runName,delete r.configurable,delete r.recursionLimit,delete r.maxConcurrency,delete r.runId,delete r.timeout,delete r.signal,[n,r]}async _callWithConfig(e,n,r){var u;const i=ne(r),a=await Ye(i),s=await(a==null?void 0:a.handleChainStart(this.toJSON(),ye(n,"input"),i.runId,i==null?void 0:i.runType,void 0,void 0,(u=i==null?void 0:i.runName)!=null?u:this.getName()));delete i.runId;let o;try{const l=e.call(this,n,i,s);o=await Nn(l,r==null?void 0:r.signal)}catch(l){throw await(s==null?void 0:s.handleChainError(l)),l}return await(s==null?void 0:s.handleChainEnd(ye(o,"output"))),o}async _batchWithConfig(e,n,r,i){var l;const a=this._getOptionsList(r!=null?r:{},n.length),s=await Promise.all(a.map(Ye)),o=await Promise.all(s.map(async(c,d)=>{var h;const f=await(c==null?void 0:c.handleChainStart(this.toJSON(),ye(n[d],"input"),a[d].runId,a[d].runType,void 0,void 0,(h=a[d].runName)!=null?h:this.getName()));return delete a[d].runId,f}));let u;try{const c=e.call(this,n,a,o,i);u=await Nn(c,(l=a==null?void 0:a[0])==null?void 0:l.signal)}catch(c){throw await Promise.all(o.map(d=>d==null?void 0:d.handleChainError(c))),c}return await Promise.all(o.map(c=>c==null?void 0:c.handleChainEnd(ye(u,"output")))),u}async*_transformStreamWithConfig(e,n,r){let i,a=!0,s,o=!0;const u=ne(r),l=await Ye(u);async function*c(){for await(const f of e){if(a)if(i===void 0)i=f;else try{i=zt(i,f)}catch{i=void 0,a=!1}yield f}}let d;try{const f=await p1(n.bind(this),c(),async()=>{var _;return l==null?void 0:l.handleChainStart(this.toJSON(),{input:""},u.runId,u.runType,void 0,void 0,(_=u.runName)!=null?_:this.getName())},r==null?void 0:r.signal,u);delete u.runId,d=f.setup;const h=d==null?void 0:d.handlers.find(v1);let p=f.output;h!==void 0&&d!==void 0&&(p=h.tapOutputIterable(d.runId,p));const v=d==null?void 0:d.handlers.find(m1);v!==void 0&&d!==void 0&&(p=v.tapOutputIterable(d.runId,p));for await(const _ of p)if(yield _,o)if(s===void 0)s=_;else try{s=zt(s,_)}catch{s=void 0,o=!1}}catch(f){throw await(d==null?void 0:d.handleChainError(f,void 0,void 0,void 0,{inputs:ye(i,"input")})),f}await(d==null?void 0:d.handleChainEnd(s!=null?s:{},void 0,void 0,void 0,{inputs:ye(i,"input")}))}getGraph(e){const n=new yo,r=n.addNode({name:`${this.getName()}Input`,schema:Ii.any()}),i=n.addNode(this),a=n.addNode({name:`${this.getName()}Output`,schema:Ii.any()});return n.addEdge(r,i),n.addEdge(i,a),n}pipe(e){return new Zn({first:this,last:Gn(e)})}pick(e){return this.pipe(new ES(e))}assign(e){return this.pipe(new bS(new Sa({steps:e})))}async*transform(e,n){let r;for await(const i of e)r===void 0?r=i:r=zt(r,i);yield*this._streamIterator(r,ne(n))}async*streamLog(e,n,r){const i=new Gf({...r,autoClose:!1,_schemaFormat:"original"}),a=ne(n);yield*this._streamLog(e,i,a)}async*_streamLog(e,n,r){const{callbacks:i}=r;if(i===void 0)r.callbacks=[n];else if(Array.isArray(i))r.callbacks=i.concat([n]);else{const u=i.copy();u.addHandler(n,!0),r.callbacks=u}const a=this.stream(e,r);async function s(){try{const u=await a;for await(const l of u){const c=new Jt({ops:[{op:"add",path:"/streamed_output/-",value:l}]});await n.writer.write(c)}}finally{await n.writer.close()}}const o=s();try{for await(const u of n)yield u}finally{await o}}streamEvents(e,n,r){let i;if(n.version==="v1")i=this._streamEventsV1(e,n,r);else if(n.version==="v2")i=this._streamEventsV2(e,n,r);else throw new Error('Only versions "v1" and "v2" of the schema are currently supported.');return n.encoding==="text/event-stream"?gS(i):Be.fromAsyncGenerator(i)}async*_streamEventsV2(e,n,r){var h,p;const i=new _1({...r,autoClose:!1}),a=ne(n),s=(h=a.runId)!=null?h:nt();a.runId=s;const o=a.callbacks;if(o===void 0)a.callbacks=[i];else if(Array.isArray(o))a.callbacks=o.concat(i);else{const v=o.copy();v.addHandler(i,!0),a.callbacks=v}const u=this;async function l(){try{const v=await u.stream(e,a),_=i.tapOutputIterable(s,v);for await(const m of _);}finally{await i.finish()}}const c=l();let d=!1,f;try{for await(const v of i){if(!d){v.data.input=e,d=!0,f=v.run_id,yield v;continue}v.run_id===f&&v.event.endsWith("_end")&&(p=v.data)!=null&&p.input&&delete v.data.input,yield v}}finally{await c}}async*_streamEventsV1(e,n,r){var p,v,_;let i,a=!1;const s=ne(n),o=(p=s.tags)!=null?p:[],u=(v=s.metadata)!=null?v:{},l=(_=s.runName)!=null?_:this.getName(),c=new Gf({...r,autoClose:!1,_schemaFormat:"streaming_events"}),d=new k1({...r}),f=this._streamLog(e,c,s);for await(const m of f){if(i?i=i.concat(m):i=Qr.fromRunLogPatch(m),i.state===void 0)throw new Error('Internal error: "streamEvents" state is missing. Please open a bug report.');if(!a){a=!0;const E={...i.state},T={run_id:E.id,event:`on_${E.type}_start`,name:l,tags:o,metadata:u,data:{input:e}};d.includeEvent(T,E.type)&&(yield T)}const g=m.ops.filter(E=>E.path.startsWith("/logs/")).map(E=>E.path.split("/")[2]),y=[...new Set(g)];for(const E of y){let T,C={};const P=i.state.logs[E];if(P.end_time===void 0?P.streamed_output.length>0?T="stream":T="start":T="end",T==="start")P.inputs!==void 0&&(C.input=P.inputs);else if(T==="end")P.inputs!==void 0&&(C.input=P.inputs),C.output=P.final_output;else if(T==="stream"){const J=P.streamed_output.length;if(J!==1)throw new Error(`Expected exactly one chunk of streamed output, got ${J} instead. Encountered in: "${P.name}"`);C={chunk:P.streamed_output[0]},P.streamed_output=[]}yield{event:`on_${P.type}_${T}`,name:P.name,run_id:P.id,tags:P.tags,metadata:P.metadata,data:C}}const{state:w}=i;if(w.streamed_output.length>0){const E=w.streamed_output.length;if(E!==1)throw new Error(`Expected exactly one chunk of streamed output, got ${E} instead. Encountered in: "${w.name}"`);const T={chunk:w.streamed_output[0]};w.streamed_output=[];const C={event:`on_${w.type}_stream`,run_id:w.id,tags:o,metadata:u,name:l,data:T};d.includeEvent(C,w.type)&&(yield C)}}const h=i==null?void 0:i.state;if(h!==void 0){const m={event:`on_${h.type}_end`,name:l,run_id:h.id,tags:o,metadata:u,data:{output:h.final_output}};d.includeEvent(m,h.type)&&(yield m)}}static isRunnable(e){return Ic(e)}withListeners({onStart:e,onEnd:n,onError:r}){return new Kn({bound:this,config:{},configFactories:[i=>({callbacks:[new ag({config:i,onStart:e,onEnd:n,onError:r})]})]})}asTool(e){return SS(this,e)}}class Kn extends Ue{static lc_name(){return"RunnableBinding"}constructor(e){super(e),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain_core","runnables"]}),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"bound",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"config",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"kwargs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"configFactories",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.bound=e.bound,this.kwargs=e.kwargs,this.config=e.config,this.configFactories=e.configFactories}getName(e){return this.bound.getName(e)}async _mergeConfig(...e){const n=Wf(this.config,...e);return Wf(n,...this.configFactories?await Promise.all(this.configFactories.map(async r=>await r(n))):[])}bind(e){return new this.constructor({bound:this.bound,kwargs:{...this.kwargs,...e},config:this.config})}withConfig(e){return new this.constructor({bound:this.bound,kwargs:this.kwargs,config:{...this.config,...e}})}withRetry(e){return new this.constructor({bound:this.bound.withRetry(e),kwargs:this.kwargs,config:this.config})}async invoke(e,n){return this.bound.invoke(e,await this._mergeConfig(ne(n),this.kwargs))}async batch(e,n,r){const i=Array.isArray(n)?await Promise.all(n.map(async a=>this._mergeConfig(ne(a),this.kwargs))):await this._mergeConfig(ne(n),this.kwargs);return this.bound.batch(e,i,r)}async*_streamIterator(e,n){yield*this.bound._streamIterator(e,await this._mergeConfig(ne(n),this.kwargs))}async stream(e,n){return this.bound.stream(e,await this._mergeConfig(ne(n),this.kwargs))}async*transform(e,n){yield*this.bound.transform(e,await this._mergeConfig(ne(n),this.kwargs))}streamEvents(e,n,r){const i=this,a=async function*(){yield*i.bound.streamEvents(e,{...await i._mergeConfig(ne(n),i.kwargs),version:n.version},r)};return Be.fromAsyncGenerator(a())}static isRunnableBinding(e){return e.bound&&Ue.isRunnable(e.bound)}withListeners({onStart:e,onEnd:n,onError:r}){return new Kn({bound:this.bound,kwargs:this.kwargs,config:this.config,configFactories:[i=>({callbacks:[new ag({config:i,onStart:e,onEnd:n,onError:r})]})]})}}class Hs extends Ue{static lc_name(){return"RunnableEach"}constructor(e){super(e),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain_core","runnables"]}),Object.defineProperty(this,"bound",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.bound=e.bound}bind(e){return new Hs({bound:this.bound.bind(e)})}async invoke(e,n){return this._callWithConfig(this._invoke.bind(this),e,n)}async _invoke(e,n,r){return this.bound.batch(e,$e(n,{callbacks:r==null?void 0:r.getChild()}))}withListeners({onStart:e,onEnd:n,onError:r}){return new Hs({bound:this.bound.withListeners({onStart:e,onEnd:n,onError:r})})}}class vS extends Kn{static lc_name(){return"RunnableRetry"}constructor(e){var n,r;super(e),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain_core","runnables"]}),Object.defineProperty(this,"maxAttemptNumber",{enumerable:!0,configurable:!0,writable:!0,value:3}),Object.defineProperty(this,"onFailedAttempt",{enumerable:!0,configurable:!0,writable:!0,value:()=>{}}),this.maxAttemptNumber=(n=e.maxAttemptNumber)!=null?n:this.maxAttemptNumber,this.onFailedAttempt=(r=e.onFailedAttempt)!=null?r:this.onFailedAttempt}_patchConfigForRetry(e,n,r){const i=e>1?`retry:attempt:${e}`:void 0;return $e(n,{callbacks:r==null?void 0:r.getChild(i)})}async _invoke(e,n,r){return ar.exports(i=>super.invoke(e,this._patchConfigForRetry(i,n,r)),{onFailedAttempt:i=>this.onFailedAttempt(i,e),retries:Math.max(this.maxAttemptNumber-1,0),randomize:!0})}async invoke(e,n){return this._callWithConfig(this._invoke.bind(this),e,n)}async _batch(e,n,r,i){const a={};try{await ar.exports(async s=>{const o=e.map((f,h)=>h).filter(f=>a[f.toString()]===void 0||a[f.toString()]instanceof Error),u=o.map(f=>e[f]),l=o.map(f=>this._patchConfigForRetry(s,n==null?void 0:n[f],r==null?void 0:r[f])),c=await super.batch(u,l,{...i,returnExceptions:!0});let d;for(let f=0;f<c.length;f+=1){const h=c[f],p=o[f];h instanceof Error&&d===void 0&&(d=h,d.input=u[f]),a[p.toString()]=h}if(d)throw d;return c},{onFailedAttempt:s=>this.onFailedAttempt(s,s.input),retries:Math.max(this.maxAttemptNumber-1,0),randomize:!0})}catch(s){if((i==null?void 0:i.returnExceptions)!==!0)throw s}return Object.keys(a).sort((s,o)=>parseInt(s,10)-parseInt(o,10)).map(s=>a[parseInt(s,10)])}async batch(e,n,r){return this._batchWithConfig(this._batch.bind(this),e,n,r)}}class Zn extends Ue{static lc_name(){return"RunnableSequence"}constructor(e){var n;super(e),Object.defineProperty(this,"first",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"middle",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"last",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain_core","runnables"]}),this.first=e.first,this.middle=(n=e.middle)!=null?n:this.middle,this.last=e.last,this.name=e.name}get steps(){return[this.first,...this.middle,this.last]}async invoke(e,n){var u;const r=ne(n),i=await Ye(r),a=await(i==null?void 0:i.handleChainStart(this.toJSON(),ye(e,"input"),r.runId,void 0,void 0,void 0,r==null?void 0:r.runName));delete r.runId;let s=e,o;try{const l=[this.first,...this.middle];for(let c=0;c<l.length;c+=1){const f=l[c].invoke(s,$e(r,{callbacks:a==null?void 0:a.getChild(`seq:step:${c+1}`)}));s=await Nn(f,n==null?void 0:n.signal)}if((u=n==null?void 0:n.signal)!=null&&u.aborted)throw new Error("Aborted");o=await this.last.invoke(s,$e(r,{callbacks:a==null?void 0:a.getChild(`seq:step:${this.steps.length}`)}))}catch(l){throw await(a==null?void 0:a.handleChainError(l)),l}return await(a==null?void 0:a.handleChainEnd(ye(o,"output"))),o}async batch(e,n,r){var u;const i=this._getOptionsList(n!=null?n:{},e.length),a=await Promise.all(i.map(Ye)),s=await Promise.all(a.map(async(l,c)=>{const d=await(l==null?void 0:l.handleChainStart(this.toJSON(),ye(e[c],"input"),i[c].runId,void 0,void 0,void 0,i[c].runName));return delete i[c].runId,d}));let o=e;try{for(let l=0;l<this.steps.length;l+=1){const d=this.steps[l].batch(o,s.map((f,h)=>{const p=f==null?void 0:f.getChild(`seq:step:${l+1}`);return $e(i[h],{callbacks:p})}),r);o=await Nn(d,(u=i[0])==null?void 0:u.signal)}}catch(l){throw await Promise.all(s.map(c=>c==null?void 0:c.handleChainError(l))),l}return await Promise.all(s.map(l=>l==null?void 0:l.handleChainEnd(ye(o,"output")))),o}async*_streamIterator(e,n){var d;const r=await Ye(n),{runId:i,...a}=n!=null?n:{},s=await(r==null?void 0:r.handleChainStart(this.toJSON(),ye(e,"input"),i,void 0,void 0,void 0,a==null?void 0:a.runName)),o=[this.first,...this.middle,this.last];let u=!0,l;async function*c(){yield e}try{let f=o[0].transform(c(),$e(a,{callbacks:s==null?void 0:s.getChild("seq:step:1")}));for(let h=1;h<o.length;h+=1)f=await o[h].transform(f,$e(a,{callbacks:s==null?void 0:s.getChild(`seq:step:${h+1}`)}));for await(const h of f)if((d=n==null?void 0:n.signal)==null||d.throwIfAborted(),yield h,u)if(l===void 0)l=h;else try{l=zt(l,h)}catch{l=void 0,u=!1}}catch(f){throw await(s==null?void 0:s.handleChainError(f)),f}await(s==null?void 0:s.handleChainEnd(ye(l,"output")))}getGraph(e){const n=new yo;let r=null;return this.steps.forEach((i,a)=>{const s=i.getGraph(e);a!==0&&s.trimFirstNode(),a!==this.steps.length-1&&s.trimLastNode(),n.extend(s);const o=s.firstNode();if(!o)throw new Error(`Runnable ${i} has no first node`);r&&n.addEdge(r,o),r=s.lastNode()}),n}pipe(e){var n;return Zn.isRunnableSequence(e)?new Zn({first:this.first,middle:this.middle.concat([this.last,e.first,...e.middle]),last:e.last,name:(n=this.name)!=null?n:e.name}):new Zn({first:this.first,middle:[...this.middle,this.last],last:Gn(e),name:this.name})}static isRunnableSequence(e){return Array.isArray(e.middle)&&Ue.isRunnable(e)}static from([e,...n],r){return new Zn({first:Gn(e),middle:n.slice(0,-1).map(Gn),last:Gn(n[n.length-1]),name:r})}}class Sa extends Ue{static lc_name(){return"RunnableMap"}getStepsKeys(){return Object.keys(this.steps)}constructor(e){super(e),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain_core","runnables"]}),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"steps",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.steps={};for(const[n,r]of Object.entries(e.steps))this.steps[n]=Gn(r)}static from(e){return new Sa({steps:e})}async invoke(e,n){const r=ne(n),i=await Ye(r),a=await(i==null?void 0:i.handleChainStart(this.toJSON(),{input:e},r.runId,void 0,void 0,void 0,r==null?void 0:r.runName));delete r.runId;const s={};try{const o=Object.entries(this.steps).map(async([u,l])=>{s[u]=await l.invoke(e,$e(r,{callbacks:a==null?void 0:a.getChild(`map:key:${u}`)}))});await Nn(Promise.all(o),n==null?void 0:n.signal)}catch(o){throw await(a==null?void 0:a.handleChainError(o)),o}return await(a==null?void 0:a.handleChainEnd(s)),s}async*_transform(e,n,r){const i={...this.steps},a=ig(e,Object.keys(i).length),s=new Map(Object.entries(i).map(([o,u],l)=>{const c=u.transform(a[l],$e(r,{callbacks:n==null?void 0:n.getChild(`map:key:${o}`)}));return[o,c.next().then(d=>({key:o,gen:c,result:d}))]}));for(;s.size;){const o=Promise.race(s.values()),{key:u,result:l,gen:c}=await Nn(o,r==null?void 0:r.signal);s.delete(u),l.done||(yield{[u]:l.value},s.set(u,c.next().then(d=>({key:u,gen:c,result:d}))))}}transform(e,n){return this._transformStreamWithConfig(e,this._transform.bind(this),n)}async stream(e,n){async function*r(){yield e}const i=ne(n),a=new ri({generator:this.transform(r(),i),config:i});return await a.setup,Be.fromAsyncGenerator(a)}}class Nc extends Ue{constructor(e){if(super(e),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain_core","runnables"]}),Object.defineProperty(this,"func",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),!kc(e.func))throw new Error("RunnableTraceable requires a function that is wrapped in traceable higher-order function");this.func=e.func}async invoke(e,n){const[r]=this._getOptionsList(n!=null?n:{},1),i=await Ye(r),a=this.func($e(r,{callbacks:i}),e);return Nn(a,r==null?void 0:r.signal)}async*_streamIterator(e,n){var a,s;const[r]=this._getOptionsList(n!=null?n:{},1),i=await this.invoke(e,n);if(yl(i)){for await(const o of i)(a=r==null?void 0:r.signal)==null||a.throwIfAborted(),yield o;return}if(yS(i)){for(;;){(s=r==null?void 0:r.signal)==null||s.throwIfAborted();const o=i.next();if(o.done)break;yield o.value}return}yield i}static from(e){return new Nc({func:e})}}function _S(t){if(kc(t))throw new Error("RunnableLambda requires a function that is not wrapped in traceable higher-order function. This shouldn't happen.")}class vo extends Ue{static lc_name(){return"RunnableLambda"}constructor(e){if(kc(e.func))return Nc.from(e.func);super(e),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain_core","runnables"]}),Object.defineProperty(this,"func",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),_S(e.func),this.func=e.func}static from(e){return new vo({func:e})}async _invoke(e,n,r){return new Promise((i,a)=>{var o;const s=$e(n,{callbacks:r==null?void 0:r.getChild(),recursionLimit:((o=n==null?void 0:n.recursionLimit)!=null?o:fu)-1});ur.runWithConfig(s,async()=>{var u,l,c;try{let d=await this.func(e,{...s});if(d&&Ue.isRunnable(d)){if((n==null?void 0:n.recursionLimit)===0)throw new Error("Recursion limit reached.");d=await d.invoke(e,{...s,recursionLimit:((u=s.recursionLimit)!=null?u:fu)-1})}else if(yl(d)){let f;for await(const h of th(s,d))if((l=n==null?void 0:n.signal)==null||l.throwIfAborted(),f===void 0)f=h;else try{f=zt(f,h)}catch{f=h}d=f}else if(Yf(d)){let f;for(const h of eh(s,d))if((c=n==null?void 0:n.signal)==null||c.throwIfAborted(),f===void 0)f=h;else try{f=zt(f,h)}catch{f=h}d=f}i(d)}catch(d){a(d)}})})}async invoke(e,n){return this._callWithConfig(this._invoke.bind(this),e,n)}async*_transform(e,n,r){var o,u,l;let i;for await(const c of e)if(i===void 0)i=c;else try{i=zt(i,c)}catch{i=c}const a=$e(r,{callbacks:n==null?void 0:n.getChild(),recursionLimit:((o=r==null?void 0:r.recursionLimit)!=null?o:fu)-1}),s=await new Promise((c,d)=>{ur.runWithConfig(a,async()=>{try{const f=await this.func(i,{...a,config:a});c(f)}catch(f){d(f)}})});if(s&&Ue.isRunnable(s)){if((r==null?void 0:r.recursionLimit)===0)throw new Error("Recursion limit reached.");const c=await s.stream(i,a);for await(const d of c)yield d}else if(yl(s))for await(const c of th(a,s))(u=r==null?void 0:r.signal)==null||u.throwIfAborted(),yield c;else if(Yf(s))for(const c of eh(a,s))(l=r==null?void 0:r.signal)==null||l.throwIfAborted(),yield c;else yield s}transform(e,n){return this._transformStreamWithConfig(e,this._transform.bind(this),n)}async stream(e,n){async function*r(){yield e}const i=ne(n),a=new ri({generator:this.transform(r(),i),config:i});return await a.setup,Be.fromAsyncGenerator(a)}}class wS extends Ue{static lc_name(){return"RunnableWithFallbacks"}constructor(e){super(e),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain_core","runnables"]}),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"runnable",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"fallbacks",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.runnable=e.runnable,this.fallbacks=e.fallbacks}*runnables(){yield this.runnable;for(const e of this.fallbacks)yield e}async invoke(e,n){var l;const r=ne(n),i=await Ye(n),{runId:a,...s}=r,o=await(i==null?void 0:i.handleChainStart(this.toJSON(),ye(e,"input"),a,void 0,void 0,void 0,s==null?void 0:s.runName));let u;for(const c of this.runnables()){(l=r==null?void 0:r.signal)==null||l.throwIfAborted();try{const d=await c.invoke(e,$e(s,{callbacks:o==null?void 0:o.getChild()}));return await(o==null?void 0:o.handleChainEnd(ye(d,"output"))),d}catch(d){u===void 0&&(u=d)}}throw u===void 0?new Error("No error stored at end of fallback."):(await(o==null?void 0:o.handleChainError(u)),u)}async*_streamIterator(e,n){var d;const r=ne(n),i=await Ye(n),{runId:a,...s}=r,o=await(i==null?void 0:i.handleChainStart(this.toJSON(),ye(e,"input"),a,void 0,void 0,void 0,s==null?void 0:s.runName));let u,l;for(const f of this.runnables()){(d=r==null?void 0:r.signal)==null||d.throwIfAborted();const h=$e(s,{callbacks:o==null?void 0:o.getChild()});try{l=await f.stream(e,h);break}catch(p){u===void 0&&(u=p)}}if(l===void 0){const f=u!=null?u:new Error("No error stored at end of fallback.");throw await(o==null?void 0:o.handleChainError(f)),f}let c;try{for await(const f of l){yield f;try{c=c===void 0?c:zt(c,f)}catch{c=void 0}}}catch(f){throw await(o==null?void 0:o.handleChainError(f)),f}await(o==null?void 0:o.handleChainEnd(ye(c,"output")))}async batch(e,n,r){var u;if(r!=null&&r.returnExceptions)throw new Error("Not implemented.");const i=this._getOptionsList(n!=null?n:{},e.length),a=await Promise.all(i.map(l=>Ye(l))),s=await Promise.all(a.map(async(l,c)=>{const d=await(l==null?void 0:l.handleChainStart(this.toJSON(),ye(e[c],"input"),i[c].runId,void 0,void 0,void 0,i[c].runName));return delete i[c].runId,d}));let o;for(const l of this.runnables()){(u=i[0].signal)==null||u.throwIfAborted();try{const c=await l.batch(e,s.map((d,f)=>$e(i[f],{callbacks:d==null?void 0:d.getChild()})),r);return await Promise.all(s.map((d,f)=>d==null?void 0:d.handleChainEnd(ye(c[f],"output")))),c}catch(c){o===void 0&&(o=c)}}throw o?(await Promise.all(s.map(l=>l==null?void 0:l.handleChainError(o))),o):new Error("No error stored at end of fallbacks.")}}function Gn(t){if(typeof t=="function")return new vo({func:t});if(Ue.isRunnable(t))return t;if(!Array.isArray(t)&&typeof t=="object"){const e={};for(const[n,r]of Object.entries(t))e[n]=Gn(r);return new Sa({steps:e})}else throw new Error(`Expected a Runnable, function or object.
Instead got an unsupported type.`)}class bS extends Ue{static lc_name(){return"RunnableAssign"}constructor(e){e instanceof Sa&&(e={mapper:e}),super(e),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain_core","runnables"]}),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"mapper",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.mapper=e.mapper}async invoke(e,n){const r=await this.mapper.invoke(e,n);return{...e,...r}}async*_transform(e,n,r){const i=this.mapper.getStepsKeys(),[a,s]=ig(e),o=this.mapper.transform(s,$e(r,{callbacks:n==null?void 0:n.getChild()})),u=o.next();for await(const l of a){if(typeof l!="object"||Array.isArray(l))throw new Error(`RunnableAssign can only be used with objects as input, got ${typeof l}`);const c=Object.fromEntries(Object.entries(l).filter(([d])=>!i.includes(d)));Object.keys(c).length>0&&(yield c)}yield(await u).value;for await(const l of o)yield l}transform(e,n){return this._transformStreamWithConfig(e,this._transform.bind(this),n)}async stream(e,n){async function*r(){yield e}const i=ne(n),a=new ri({generator:this.transform(r(),i),config:i});return await a.setup,Be.fromAsyncGenerator(a)}}class ES extends Ue{static lc_name(){return"RunnablePick"}constructor(e){(typeof e=="string"||Array.isArray(e))&&(e={keys:e}),super(e),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain_core","runnables"]}),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"keys",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.keys=e.keys}async _pick(e){if(typeof this.keys=="string")return e[this.keys];{const n=this.keys.map(r=>[r,e[r]]).filter(r=>r[1]!==void 0);return n.length===0?void 0:Object.fromEntries(n)}}async invoke(e,n){return this._callWithConfig(this._pick.bind(this),e,n)}async*_transform(e){for await(const n of e){const r=await this._pick(n);r!==void 0&&(yield r)}}transform(e,n){return this._transformStreamWithConfig(e,this._transform.bind(this),n)}async stream(e,n){async function*r(){yield e}const i=ne(n),a=new ri({generator:this.transform(r(),i),config:i});return await a.setup,Be.fromAsyncGenerator(a)}}class nh extends Kn{constructor(e){var r;const n=Zn.from([vo.from(async i=>{let a;if(JE(i))try{a=await this.schema.parseAsync(i.args)}catch{throw new QE("Received tool input did not match expected schema",JSON.stringify(i.args))}else a=i;return a}).withConfig({runName:`${e.name}:parse_input`}),e.bound]).withConfig({runName:e.name});super({bound:n,config:(r=e.config)!=null?r:{}}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"description",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"schema",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.name=e.name,this.description=e.description,this.schema=e.schema}static lc_name(){return"RunnableToolLike"}}function SS(t,e){var i,a,s;const n=(i=e.name)!=null?i:t.getName(),r=(s=e.description)!=null?s:(a=e.schema)==null?void 0:a.description;return e.schema.constructor===Ii.ZodString?new nh({name:n,description:r,schema:Ii.object({input:Ii.string()}).transform(o=>o.input),bound:t}):new nh({name:n,description:r,schema:e.schema,bound:t})}class kS{constructor(e){var n;Object.defineProperty(this,"pageContent",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"metadata",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"id",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.pageContent=e.pageContent!==void 0?e.pageContent.toString():"",this.metadata=(n=e.metadata)!=null?n:{},this.id=e.id}}class cg extends or{}class TS extends cg{static lc_name(){return"StringPromptValue"}constructor(e){super({value:e}),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain_core","prompt_values"]}),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"value",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.value=e}toString(){return this.value}toChatMessages(){return[new ng(this.value)]}}class xS extends cg{static lc_name(){return"ChatPromptValue"}constructor(e){Array.isArray(e)&&(e={messages:e}),super(e),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain_core","prompt_values"]}),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"messages",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.messages=e.messages}toString(){return rg(this.messages)}toChatMessages(){return this.messages}}async function OS(t,e){if(t instanceof ReadableStream){const n=t.getReader();for(;;){const r=await n.read();if(r.done){e(new Uint8Array,!0);break}e(r.value)}}else try{for await(const n of t)e(new Uint8Array(n));e(new Uint8Array,!0)}catch(n){throw new Error(["Parsing event source stream failed.","Ensure your implementation of fetch returns a web or Node readable stream.",`Error: ${n.message}`].join(`
`))}}function CS(t){let e,n,r,i=!1;return function(s,o){if(o){t(s,0,!0);return}e===void 0?(e=s,n=0,r=-1):e=RS(e,s);const u=e.length;let l=0;for(;n<u;){i&&(e[n]===10&&(l=++n),i=!1);let c=-1;for(;n<u&&c===-1;++n)switch(e[n]){case 58:r===-1&&(r=n-l);break;case 13:i=!0;case 10:c=n;break}if(c===-1)break;t(e.subarray(l,c),r),l=n,r=-1}l===u?e=void 0:l!==0&&(e=e.subarray(l),n-=l)}}function PS(t,e,n){let r=mu();const i=new TextDecoder;return function(s,o,u){if(u){IS(r)||(t==null||t(r),r=mu());return}if(s.length===0)t==null||t(r),r=mu();else if(o>0){const l=i.decode(s.subarray(0,o)),c=o+(s[o+1]===32?2:1),d=i.decode(s.subarray(c));switch(l){case"data":r.data=r.data?r.data+`
`+d:d;break;case"event":r.event=d;break;case"id":e==null||e(r.id=d);break;case"retry":{const f=parseInt(d,10);Number.isNaN(f)||n==null||n(r.retry=f);break}}}}}function RS(t,e){const n=new Uint8Array(t.length+e.length);return n.set(t),n.set(e,t.length),n}function mu(){return{data:"",event:"",id:"",retry:void 0}}function gu(t,e){const n=new ReadableStream({async start(r){const i=PS(s=>{var o;if(s.event==="error")throw new Error((o=s.data)!=null?o:"Unspecified event streaming error.");s.event==="metadata"?e==null||e(s):s.data&&r.enqueue(s.data)});await OS(t,CS((s,o,u)=>{i(s,o,u),u&&r.close()}))}});return Be.fromReadableStream(n)}function IS(t){return t.data===""&&t.event===""&&t.id===""&&t.retry===void 0}function ln(t,e){for(const n of e)if(!t.has(n))return!1;return!0}function Tt(t){if(Array.isArray(t))return t.map(Tt);if(typeof t=="object"){if(!t||t instanceof Date)return t;const e=Object.keys(t),n=new Set(e);if(ln(n,new Set(["page_content","metadata"])))return new kS({pageContent:t.page_content,metadata:t.metadata});if(ln(n,new Set(["content","type","additional_kwargs"]))){if(t.type==="HumanMessage"||t.type==="human")return new ng({content:t.content});if(t.type==="SystemMessage"||t.type==="system")return new i1({content:t.content});if(t.type==="ChatMessage"||t.type==="generic")return new mo({content:t.content,role:t.role});if(t.type==="FunctionMessage"||t.type==="function")return new r1({content:t.content,name:t.name});if(t.type==="ToolMessage"||t.type==="tool")return new tg({content:t.content,tool_call_id:t.tool_call_id,status:t.status});if(t.type==="AIMessage"||t.type==="ai")return new n1({content:t.content});if(t.type==="HumanMessageChunk")return new Cc({content:t.content});if(t.type==="SystemMessageChunk")return new Pc({content:t.content});if(t.type==="ChatMessageChunk")return new xc({content:t.content,role:t.role});if(t.type==="FunctionMessageChunk")return new Oc({content:t.content,name:t.name});if(t.type==="ToolMessageChunk")return new Tc({content:t.content,tool_call_id:t.tool_call_id,status:t.status});if(t.type==="AIMessageChunk")return new Ea({content:t.content})}if(ln(n,new Set(["text","generation_info","type"]))){if(t.type==="ChatGenerationChunk")return new Rc({message:Tt(t.message),text:t.text,generationInfo:t.generation_info});if(t.type==="ChatGeneration")return{message:Tt(t.message),text:t.text,generationInfo:t.generation_info};if(t.type==="GenerationChunk")return new qr({text:t.text,generationInfo:t.generation_info});if(t.type==="Generation")return{text:t.text,generationInfo:t.generation_info}}if(ln(n,new Set(["tool","tool_input","log","type"]))&&t.type==="AgentAction")return{tool:t.tool,toolInput:t.tool_input,log:t.log};if(ln(n,new Set(["return_values","log","type"]))&&t.type==="AgentFinish")return{returnValues:t.return_values,log:t.log};if(ln(n,new Set(["generations","run","type"]))&&t.type==="LLMResult")return{generations:Tt(t.generations),llmOutput:t.llm_output,[y1]:t.run};if(ln(n,new Set(["messages"])))return new xS({messages:t.messages.map(a=>Tt(a))});if(ln(n,new Set(["text"])))return new TS(t.text);const r=a=>[a,Tt(t[a])];return Object.fromEntries(e.map(r))}return t}function NS(t){const e=JSON.parse(t);return Tt(e)}function mi(t){const e={...t};return delete e.callbacks,delete e.signal,e}function vl(t){if(Array.isArray(t))return t.map(vl);if(e1(t)){const e={content:t.content,type:t._getType(),additional_kwargs:t.additional_kwargs,name:t.name,example:!1};return tg.isInstance(t)?e.tool_call_id=t.tool_call_id:mo.isInstance(t)&&(e.role=t.role),e}if(typeof t=="object"){if(!t||t instanceof Date)return t;const e=Object.keys(t),n=i=>[i,vl(t[i])];return Object.fromEntries(e.map(n))}return t}class $S extends Ue{constructor(e){super(e),Object.defineProperty(this,"url",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"options",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"fetchImplementation",{enumerable:!0,configurable:!0,writable:!0,value:(...s)=>fetch(...s)}),Object.defineProperty(this,"fetchRequestOptions",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain","schema","runnable","remote"]});const{url:n,options:r,fetch:i,fetchRequestOptions:a}=e;this.url=n.replace(/\/$/,""),this.options=r,this.fetchImplementation=i!=null?i:this.fetchImplementation,this.fetchRequestOptions=a}async post(e,n,r){var i,a,s,o;return this.fetchImplementation(`${this.url}${e}`,{method:"POST",body:JSON.stringify(vl(n)),signal:r!=null?r:AbortSignal.timeout((a=(i=this.options)==null?void 0:i.timeout)!=null?a:6e4),...this.fetchRequestOptions,headers:{"Content-Type":"application/json",...(s=this.fetchRequestOptions)==null?void 0:s.headers,...(o=this.options)==null?void 0:o.headers}})}async _invoke(e,n,r){const[i,a]=this._separateRunnableConfigFromCallOptions(n),s=await this.post("/invoke",{input:e,config:mi(i),kwargs:a!=null?a:{}},i.signal);if(!s.ok)throw new Error(`${s.status} Error: ${await s.text()}`);return Tt((await s.json()).output)}async invoke(e,n){return this._callWithConfig(this._invoke,e,n)}async _batch(e,n,r,i){var c,d;if(i!=null&&i.returnExceptions)throw new Error("returnExceptions is not supported for remote clients");const a=n==null?void 0:n.map(f=>this._separateRunnableConfigFromCallOptions(f)),[s,o]=(c=a==null?void 0:a.reduce(([f,h],[p,v])=>[[...f,p],[...h,v]],[[],[]]))!=null?c:[void 0,void 0],u=await this.post("/batch",{inputs:e,config:(s!=null?s:[]).map(mi).map(f=>({...f,...i})),kwargs:o},(d=n==null?void 0:n[0])==null?void 0:d.signal);if(!u.ok)throw new Error(`${u.status} Error: ${await u.text()}`);const l=await u.json();if(!l.output)throw new Error("Invalid response from remote runnable");return Tt(l.output)}async batch(e,n,r){if(r!=null&&r.returnExceptions)throw Error("returnExceptions is not supported for remote clients");return this._batchWithConfig(this._batch.bind(this),e,n,r)}async*_streamIterator(e,n){const[r,i]=this._separateRunnableConfigFromCallOptions(n),a=await Ye(n),s=await(a==null?void 0:a.handleChainStart(this.toJSON(),ye(e,"input"),r.runId,void 0,void 0,void 0,r.runName));delete r.runId;let o,u=!0;try{const l=await this.post("/stream",{input:e,config:mi(r),kwargs:i},r.signal);if(!l.ok){const f=await l.json(),h=new Error(`RemoteRunnable call failed with status code ${l.status}: ${f.message}`);throw h.response=l,h}const{body:c}=l;if(!c)throw new Error("Could not begin remote stream. Please check the given URL and try again.");const d=gu(c);for await(const f of d){const h=NS(f);if(yield h,u)if(o===void 0)o=h;else try{o=zt(o,h)}catch{o=void 0,u=!1}}}catch(l){throw await(s==null?void 0:s.handleChainError(l)),l}await(s==null?void 0:s.handleChainEnd(o!=null?o:{}))}async*streamLog(e,n,r){const[i,a]=this._separateRunnableConfigFromCallOptions(n),s=await Ye(n),o=await(s==null?void 0:s.handleChainStart(this.toJSON(),ye(e,"input"),i.runId,void 0,void 0,void 0,i.runName));delete i.runId;const u={include_names:r==null?void 0:r.includeNames,include_types:r==null?void 0:r.includeTypes,include_tags:r==null?void 0:r.includeTags,exclude_names:r==null?void 0:r.excludeNames,exclude_types:r==null?void 0:r.excludeTypes,exclude_tags:r==null?void 0:r.excludeTags};let l;try{const c=await this.post("/stream_log",{input:e,config:mi(i),kwargs:a,...u,diff:!1},i.signal),{body:d,ok:f}=c;if(!f)throw new Error(`${c.status} Error: ${await c.text()}`);if(!d)throw new Error("Could not begin remote stream log. Please check the given URL and try again.");const h=gu(d);for await(const p of h){const v=Tt(JSON.parse(p)),_=new Jt({ops:v.ops});yield _,l===void 0?l=Qr.fromRunLogPatch(_):l=l.concat(_)}}catch(c){throw await(o==null?void 0:o.handleChainError(c)),c}await(o==null?void 0:o.handleChainEnd(l==null?void 0:l.state.final_output))}_streamEvents(e,n,r){const i=this;return async function*(){const[s,o]=i._separateRunnableConfigFromCallOptions(n),u=await Ye(n),l=await(u==null?void 0:u.handleChainStart(i.toJSON(),ye(e,"input"),s.runId,void 0,void 0,void 0,s.runName));delete s.runId;const c={include_names:r==null?void 0:r.includeNames,include_types:r==null?void 0:r.includeTypes,include_tags:r==null?void 0:r.includeTags,exclude_names:r==null?void 0:r.excludeNames,exclude_types:r==null?void 0:r.excludeTypes,exclude_tags:r==null?void 0:r.excludeTags},d=[];try{const f=await i.post("/stream_events",{input:e,config:mi(s),kwargs:o,...c,diff:!1},s.signal),{body:h,ok:p}=f;if(!p)throw new Error(`${f.status} Error: ${await f.text()}`);if(!h)throw new Error("Could not begin remote stream events. Please check the given URL and try again.");const v=gu(h);for await(const _ of v){const m=Tt(JSON.parse(_)),g={event:m.event,name:m.name,run_id:m.run_id,tags:m.tags,metadata:m.metadata,data:m.data};yield g,d.push(g)}}catch(f){throw await(l==null?void 0:l.handleChainError(f)),f}await(l==null?void 0:l.handleChainEnd(d))}()}streamEvents(e,n,r){if(n.version!=="v1"&&n.version!=="v2")throw new Error('Only versions "v1" and "v2" of the events schema is currently supported.');if(n.encoding!==void 0)throw new Error("Special encodings are not supported for this runnable.");const i=this._streamEvents(e,n,r);return Be.fromAsyncGenerator(i)}}var $c={exports:{}},_o={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var AS=Vs.exports,LS=Symbol.for("react.element"),jS=Symbol.for("react.fragment"),DS=Object.prototype.hasOwnProperty,MS=AS.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,US={key:!0,ref:!0,__self:!0,__source:!0};function dg(t,e,n){var r,i={},a=null,s=null;n!==void 0&&(a=""+n),e.key!==void 0&&(a=""+e.key),e.ref!==void 0&&(s=e.ref);for(r in e)DS.call(e,r)&&!US.hasOwnProperty(r)&&(i[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)i[r]===void 0&&(i[r]=e[r]);return{$$typeof:LS,type:t,key:a,ref:s,props:i,_owner:MS.current}}_o.Fragment=jS;_o.jsx=dg;_o.jsxs=dg;(function(t){t.exports=_o})($c);const _e=$c.exports.jsx,yu=$c.exports.jsxs,FS=new $S({url:"http://localhost:8000/ollama"});async function zS(){let e=(await miro.board.getSelection()).filter(a=>a.type==="sticky_note");if(e.length<=0)return;let n=`
`;for(let a of e)n+=`- ${a.content}
`;let r=await miro.board.createStickyNote({content:"\u751F\u6210\u4E2D\uFF01\uFF01\uFF01",x:0,y:0});const i=await FS.invoke({context:n});r.content=i.content,await r.sync(),console.log(`Context: ${n}
Result: ${i.content}
`)}const BS=()=>{const[t,e]=Vs.exports.useState(0);return yu("div",{className:"grid wrapper",children:[_e("div",{className:"cs1 ce12",children:_e("img",{src:"https://di8m9w6rqrh5d.cloudfront.net/JIlYx8qbpWSpOvsR2zvaK74zfLDaj0JO/1920_c988019b-6f82-4ee8-84ac-a74e1616c1e1.png",alt:""})}),_e("div",{className:"cs1 ce12 tabs",children:yu("div",{className:"tabs-header-list",children:[_e("div",{tabIndex:0,className:`tab ${t===0?"tab-active":""}`,onClick:()=>e(0),children:_e("div",{className:"tab-text",children:"Phase 1"})}),_e("div",{tabIndex:1,className:`tab ${t===1?"tab-active":""}`,onClick:()=>e(1),children:_e("div",{className:"tab-text",children:"Phase 2"})}),_e("div",{tabIndex:2,className:`tab ${t===2?"tab-active":""}`,onClick:()=>e(2),children:_e("div",{className:"tab-text",children:"Phase 3"})})]})}),t===0?yu("div",{className:"cs1 ce12",children:[_e("div",{className:"cs1 ce12",children:_e("img",{src:"/src/assets/congratulations.png",alt:""})}),_e("h1",{children:"Congratulations!"}),_e("p",{children:"You've just created your first Miro app!"}),_e("p",{children:"To explore more and build your own app, see the Miro Developer Platform documentation."})]}):"",t===1?_e("div",{className:"cs1 ce12",children:_e("button",{className:"button button-primary",onClick:zS,children:"Get Abstract"})}):"",t===2?_e("div",{className:"cs1 ce12",children:_e("a",{className:"button button-primary",target:"_blank",href:"https://developers.miro.com",children:"Read the documentation"})}):""]})},HS=document.getElementById("root"),VS=dm(HS);VS.render(_e(BS,{}));
